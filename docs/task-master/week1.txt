# 1주차: 프로젝트 착수, 요구사항 확정 및 핵심 설계

## 1주차 목표
개발 범위 확정, 기술 스택 최종 결정, 핵심 아키텍처 및 데이터 모델 설계 완료, 개발 환경 세팅

## 현재 개발 상태 분석

### 이미 구현된 내용
1. **Next.js 프로젝트 기본 구조**
   - `src/app` 디렉토리 구조로 Next.js 13+ App Router 적용 완료
   - TypeScript 설정 완료
   - Tailwind CSS 설정 및 globals.css 구성 완료

2. **기본 레이아웃 및 네비게이션**
   - `Layout.tsx`: 전체 레이아웃 컴포넌트 구현
   - `Navigation.tsx`: 메가메뉴 형태의 네비게이션 구현
     - 사용자 유형별 메뉴 필터링 기능 (광고주/영업사원/관리자)
     - 스크롤 시 네비게이션 숨김/표시 기능
     - 3단계 메뉴 구조 (메인 > 서브 > 서브서브)
   - `Footer.tsx`: 푸터 컴포넌트 구현

3. **페이지 구조**
   - `/my-site`: 마이사이트 관련 페이지
   - `/target-marketing`: 타겟마케팅 관련 페이지
   - `/messages`: 문자메시지 관련 페이지

4. **기본 컴포넌트**
   - `MessageSendForm.tsx`: 메시지 발송 폼 컴포넌트
   - `ReceiverSelector.tsx`: 수신자 선택 컴포넌트

5. **회원가입 페이지 (업데이트됨)**
   - 5단계 회원가입 프로세스 구현
     - 기본정보: 이메일, 이름, 휴대폰(본인인증 포함), 비밀번호
     - 기업정보: 기업명, 대표자명, 사업자등록번호, 주소, 대표번호, 080번호, 고객센터
     - 제출서류: 사업자등록증, 재직증명서 업로드
     - 세금계산서 정보: 수신 이메일, 담당자, 연락처
     - 약관동의: 서비스 이용약관, 개인정보 수집 및 이용, 마케팅 정보 수집
   - 진행 상태 표시 UI
   - 휴대폰 본인인증 기능 (인증번호 발송/확인)
   - 파일 업로드 기능
   - 단계별 유효성 검사

6. **인증 관련**
   - `AuthContext`: 사용자 인증 상태 관리
   - API 타입 정의 및 기본 API 호출 함수 구현

### 미구현 사항
1. Firebase 프로젝트 연동 및 설정
2. Firebase Authentication 설정
3. Firestore 데이터베이스 구조 설계
4. Firebase Functions 프로젝트 초기화
5. CI/CD 파이프라인 구축 (GitHub Actions)
6. 환경변수 설정 구조

## 1주차 상세 작업 계획

### Day 1-2: 요구사항 분석 및 확정
#### 작업 내용
1. **요구사항 워크샵**
   - 기능정의서, 추가 요구사항 문서 기반 상세 분석
   - 클라이언트와 요구사항 확정 미팅
   - 우선순위 설정 및 MVP 범위 확정

2. **기술 스택 최종 확정**
   - 현재 구현된 Next.js + TypeScript 기반 확정
   - 상태관리: Zustand vs Recoil 결정
   - UI 컴포넌트: Headless UI vs Shadcn/ui 결정
   - 데이터 페칭: SWR vs React Query 결정

3. **프로젝트 문서화**
   - 확정된 요구사항 명세서 작성
   - 기술 스택 결정 사항 문서화

### Day 3-4: 아키텍처 및 데이터 모델 설계
#### 작업 내용
1. **시스템 아키텍처 설계**
   - 전체 시스템 구성도 작성
   - Firebase 서비스 활용 계획
     - Authentication: 사용자 인증
     - Firestore: 데이터 저장
     - Functions: 서버리스 API
     - Storage: 파일 저장
     - Hosting: 웹 호스팅
   - 외부 서비스 연동 아키텍처
     - OpenAI API
     - PG사 API
     - 메시지 발송 서버 인터페이스

2. **Firestore 데이터 모델 설계**
   ```
   주요 컬렉션 구조:
   - users (사용자 정보)
     - uid (Firebase Auth UID)
     - email
     - name
     - role (advertiser/sales/admin)
     - credits (잔액)
     - referralCode (추천인 코드)
     - createdAt
     
   - campaigns (캠페인)
     - id
     - userId
     - name
     - budget
     - status
     - targetGroups
     - messages
     - createdAt
     
   - templates (템플릿)
     - id
     - userId
     - name
     - content
     - channel (SMS/LMS/MMS/RCS/알림톡/친구톡)
     - isAIGenerated
     - graphicElements
     
   - messages (메시지)
     - id
     - campaignId
     - recipient
     - content
     - channel
     - status
     - sentAt
     
   - payments (결제)
     - id
     - userId
     - amount
     - pgTransactionId
     - status
     
   - rewards_users (영업사원)
     - userId
     - referralTree
     - earnings
     - level
   ```

3. **API 엔드포인트 설계**
   - RESTful API 구조 정의
   - 주요 엔드포인트 목록 작성
   - Request/Response 스펙 초안

### Day 5: 개발 환경 구축
#### 작업 내용
1. **Firebase 프로젝트 설정**
   ```bash
   # Firebase CLI 설치
   npm install -g firebase-tools
   
   # Firebase 프로젝트 초기화
   firebase init
   
   # 선택 서비스:
   - Firestore
   - Functions (TypeScript)
   - Hosting
   - Storage
   - Emulators
   ```

2. **프로젝트 구조 개선**
   ```
   mts-message/
   ├── src/
   │   ├── app/           (기존)
   │   ├── components/    (기존)
   │   ├── lib/          (신규)
   │   │   ├── firebase/ 
   │   │   ├── utils/
   │   │   └── hooks/
   │   └── types/        (신규)
   ├── functions/        (신규)
   │   ├── src/
   │   └── package.json
   └── .github/         (신규)
       └── workflows/
   ```

3. **환경변수 설정**
   - `.env.local` 파일 생성
   - Firebase 설정 정보
   - API 키 관리 구조

4. **GitHub Actions CI/CD 파이프라인**
   ```yaml
   # .github/workflows/ci.yml
   name: CI/CD Pipeline
   on:
     push:
       branches: [main, develop]
     pull_request:
       branches: [main, develop]
   
   jobs:
     lint-and-test:
       runs-on: ubuntu-latest
       steps:
         - uses: actions/checkout@v3
         - uses: actions/setup-node@v3
         - run: npm ci
         - run: npm run lint
         - run: npm run test
         - run: npm run build
   ```

## 1주차 예상 산출물

1. **문서**
   - ✅ 확정된 요구사항 명세서
   - ✅ 시스템 아키텍처 설계서
   - ✅ Firestore 데이터베이스 스키마 정의서
   - ✅ API 엔드포인트 목록 (초안)
   - ✅ 개발환경 구성 보고서

2. **코드/설정**
   - ✅ Firebase 프로젝트 초기 설정
   - ✅ 개선된 프로젝트 폴더 구조
   - ✅ 환경변수 설정 구조
   - ✅ GitHub Actions 기본 CI 파이프라인
   - ✅ TypeScript 타입 정의 파일 구조

## 주요 결정 사항 (1주차 내)

1. **상태관리 라이브러리**: Zustand 선택 (간단하고 TypeScript 친화적)
2. **데이터 페칭**: SWR 선택 (Next.js와 잘 통합됨)
3. **UI 컴포넌트**: Headless UI + 커스텀 컴포넌트
4. **폼 관리**: React Hook Form (이미 일부 구현됨)
5. **스타일링**: Tailwind CSS (이미 적용됨)

## 리스크 및 대응 방안

1. **메시지 서버 인터페이스 스펙 미확정**
   - 대응: 클라이언트에게 1주차 내 스펙 요청
   - 임시 Mock API 구조 설계

2. **PG사 연동 정보 부재**
   - 대응: 테스트 환경용 PG 설정 준비
   - 실제 연동은 정보 제공 후 진행

3. **AI API 사용량 및 비용**
   - 대응: OpenAI API 사용량 예측 및 비용 산정
   - 클라이언트와 비용 한도 협의

## 다음 주 준비사항

- 2주차 UI/UX 디자인을 위한 Figma 프로젝트 생성
- 디자인 레퍼런스 수집 (solapi.com, ppurio.com, findjob.co.kr)
- 와이어프레임 초안 준비 