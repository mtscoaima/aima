# MTS API ë°œì‹ ë²ˆí˜¸ ë“±ë¡ ë¬¸ì œ ë° í•´ê²°ë°©ì•ˆ

ì‘ì„±ì¼: 2025-10-29
ë¬¸ì„œ ë²„ì „: 1.0

================================================================================

## 1ï¸âƒ£ í˜„ì¬ ë°œìƒí•œ ë¬¸ì œ

### ë¬¸ì œ ì¦ìƒ
- SMS/LMS ë°œì†¡ ì‹œ ì‹¤íŒ¨: "ì„±ê³µ: 0ê±´, ì‹¤íŒ¨: 1ê±´"
- ì˜¤ë¥˜ ì½”ë“œ: ER17
- ì˜¤ë¥˜ ë©”ì‹œì§€: "NotAllowedCallbackNumber (í—ˆìš©ë˜ì§€ ì•Šì€ ë°œì‹ ë²ˆí˜¸)"

### í…ŒìŠ¤íŠ¸ í™˜ê²½
- ë°œì‹ ë²ˆí˜¸: 010-4057-1331
- ìˆ˜ì‹ ë²ˆí˜¸: 010-4057-1331 (ë³¸ì¸)
- ë°œì†¡ ì‹œë„: SMS ë‹¨ë¬¸ ë©”ì‹œì§€

### ì‹¤ì œ MTS API ìš”ì²­/ì‘ë‹µ

[ìš”ì²­]
{
  "auth_code": "7z12bG8oKXrMnHZcJBtycw==",
  "callback_number": "01040571331",
  "phone_number": "01040571331",
  "message": "[í…ŒìŠ¤íŠ¸] SMS ë‹¨ë¬¸ ë°œì†¡ í…ŒìŠ¤íŠ¸ì…ë‹ˆë‹¤."
}

[ì‘ë‹µ]
{
  "code": "ER17",
  "received_at": "2025-10-29 11:59:06",
  "message": "NotAllowedCallbackNumber"
}

================================================================================

## 2ï¸âƒ£ ë¬¸ì œ ì›ì¸

### MTS API ë°œì‹ ë²ˆí˜¸ ì •ì±…
MTS API ì—°ë™ê·œê²©ì„œ ë¬¸ì„œ ë¶„ì„ ê²°ê³¼:

1. ë°œì‹ ë²ˆí˜¸ ì‚¬ì „ ë“±ë¡ í•„ìˆ˜

   ER17 ì˜¤ë¥˜ ì½”ë“œ ì •ì˜:
   "MTS ë©”ì‹œì§€: ì „í™˜ì „ì†¡ ì‚¬ìš© ì‹œ, ì‚¬ì „ ìŠ¹ì¸ë°›ì€ ë°œì‹ ë²ˆí˜¸ê°€ ì•„ë‹™ë‹ˆë‹¤."

   SMS ê²°ê³¼ì½”ë“œí‘œ:
   ER17: "MTS ë©”ì‹œì§€: ì‚¬ì „ ìŠ¹ì¸ë°›ì€ ë°œì‹ ë²ˆí˜¸ê°€ ì•„ë‹™ë‹ˆë‹¤."

2. ë¬¸ì„œ ì›ë¬¸ ëª…ì‹œ

   "ì „í™˜ì „ì†¡ì„ í•˜ë„ë¡ ìš”ì²­ì„ ì£¼ì‹¤ ì‹œ,
    ë°œì‹  ì „í™”ë²ˆí˜¸ëŠ” ë°˜ë“œì‹œ ì‚¬ì „ë“±ë¡ ëœ ë°œì‹ ë²ˆí˜¸ë¥¼ ë„£ì–´ì£¼ì…”ì•¼ í•©ë‹ˆë‹¤."

3. callback_number íŒŒë¼ë¯¸í„°
   - íƒ€ì…: text(15)
   - í•„ìˆ˜: Y (Required)
   - ì„¤ëª…: "ë°œì‹ ì „í™”ë²ˆí˜¸"
   - ë°˜ë“œì‹œ MTS ì‹œìŠ¤í…œì— ì‚¬ì „ ë“±ë¡ë˜ì–´ ìˆì–´ì•¼ í•¨

================================================================================

## 3ï¸âƒ£ MTS API ë¬¸ì„œ ì¡°ì‚¬ ê²°ê³¼

### ì¡°ì‚¬í•œ ë¬¸ì„œ (ì´ 9ê°œ)

ë°œì†¡API í´ë” (4ê°œ):
1. MTS_ì¹´ì¹´ì˜¤ì•Œë¦¼í†¡_Restful_Interface_Guide_v2.1.md
2. MTS_ì¹´ì¹´ì˜¤ë¸Œëœë“œë©”ì‹œì§€_ê¸°ë³¸í˜•_ë³€ìˆ˜ë¶„ë¦¬ë°©ì‹_Restful_Interface_Guide_v1.1.md
3. MTS_ì¹´ì¹´ì˜¤ë¸Œëœë“œë©”ì‹œì§€_ê¸°ë³¸í˜•_ì „ë¬¸ë°©ì‹_Restful_Interface_Guide_v1.0.md
4. MTS_ì¹´ì¹´ì˜¤ë¸Œëœë“œë©”ì‹œì§€_ììœ í˜•_Restful_Interface_Guide_v1.0.md

ë¹„ì¦ˆAPI í´ë” (5ê°œ):
5. ì¹´ì¹´ì˜¤ ë°œì‹ í”„ë¡œí•„ê´€ë¦¬ ìë™í™” API v20251002.md
6. ì¹´ì¹´ì˜¤ ë¸Œëœë“œë©”ì‹œì§€ í…œí”Œë¦¿ API_1.4.md
7. ì¹´ì¹´ì˜¤ ì•Œë¦¼í†¡ í…œí”Œë¦¿ ìë™í™” API 20250801.md
8. ì¹´ì¹´ì˜¤ ì´ë¯¸ì§€ ì—…ë¡œë“œ API 20210629.md
9. MTS_ë„¤ì´ë²„ìŠ¤ë§ˆíŠ¸ì•Œë¦¼ í…œí”Œë¦¿API_1.7.md

### ì¡°ì‚¬ ê²°ê³¼
- âŒ SMS/LMS/MMS ë°œì‹ ë²ˆí˜¸ë¥¼ APIë¡œ ë“±ë¡í•˜ëŠ” ë°©ë²• ì—†ìŒ
- âœ… ì¹´ì¹´ì˜¤ ë°œì‹ í”„ë¡œí•„ ê´€ë¦¬ APIë§Œ ì¡´ì¬ (ì¹´ì¹´ì˜¤í†¡ ì±„ë„ìš©, SMSì™€ëŠ” ë³„ê°œ)
- âœ… SMS/LMS/MMS ë°œì†¡ APIë§Œ ì¡´ì¬
- âŒ ë°œì‹ ë²ˆí˜¸ ë“±ë¡/ìŠ¹ì¸ ìš”ì²­ API ì—†ìŒ

### í™•ì¸ëœ API ëª©ë¡

[SMS/LMS/MMS ë°œì†¡]
- POST /sndng/sms/sendMessage (ë‹¨ê±´)
- POST /sndng/sms/sendMessages (ë³µìˆ˜, ìµœëŒ€ 1000ê±´)
- POST /sndng/mms/sendMessage (ë‹¨ê±´)
- POST /sndng/mms/sendMessages (ë³µìˆ˜, ìµœëŒ€ 1000ê±´)
- POST /rspns/sms/rspnsMessages (ë°œì†¡ ê²°ê³¼ ì¡°íšŒ)
- POST /rspns/mms/rspnsMessages (ë°œì†¡ ê²°ê³¼ ì¡°íšŒ)
- POST /img/upload_image (MMS ì´ë¯¸ì§€ ì—…ë¡œë“œ)

[ì¹´ì¹´ì˜¤ ë°œì‹ í”„ë¡œí•„ - ì¹´ì¹´ì˜¤í†¡ ì±„ë„ìš©]
- POST /mts/api/sender/token (ì¸ì¦ í† í° ìš”ì²­)
- POST /mts/api/create/new/senderKey (ë°œì‹ í”„ë¡œí•„ ë“±ë¡)
- POST /mts/api/select/senderKey (ë°œì‹ í”„ë¡œí•„ ì¡°íšŒ)
- POST /mts/api/delete/senderKey (ë°œì‹ í”„ë¡œí•„ ì‚­ì œ)

================================================================================

## 4ï¸âƒ£ í•´ê²° ë°©ë²•

### ë‹¨ê¸° í•´ê²°ì±… (í…ŒìŠ¤íŠ¸ ë‹¨ê³„)

#### ì˜µì…˜ A: MTS ë‹´ë‹¹ìì—ê²Œ ë°œì‹ ë²ˆí˜¸ ë“±ë¡ ìš”ì²­

ìš”ì²­ ë‚´ìš©:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ë‹´ë‹¹ìë‹˜,

SMS/LMS/MMS ë°œì†¡ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ ë°œì‹ ë²ˆí˜¸ ë“±ë¡ì„ ìš”ì²­ë“œë¦½ë‹ˆë‹¤.

- ë“±ë¡ ìš”ì²­ ë²ˆí˜¸: 010-4057-1331
- ìš©ë„: SMS/LMS/MMS ë°œì†¡ í…ŒìŠ¤íŠ¸
- ì¸ì¦ì½”ë“œ: 7z12bG8oKXrMnHZcJBtycw==
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

#### ì˜µì…˜ B: ì´ë¯¸ ë“±ë¡ëœ í…ŒìŠ¤íŠ¸ ë²ˆí˜¸ í™•ì¸
- .env.localì˜ TEST_CALLING_NUMBER í™•ì¸
- í•´ë‹¹ ë²ˆí˜¸ê°€ ì´ë¯¸ MTSì— ë“±ë¡ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸
- ë“±ë¡ë˜ì–´ ìˆë‹¤ë©´ í•´ë‹¹ ë²ˆí˜¸ë¡œ í…ŒìŠ¤íŠ¸

---

### ì¤‘ì¥ê¸° í•´ê²°ì±… (ì‹¤ì œ ì„œë¹„ìŠ¤ ìš´ì˜)

#### ë°©ì•ˆ 1: ëŒ€í‘œ ë°œì‹ ë²ˆí˜¸ ë°©ì‹ (ê¶Œì¥ â­)

ì¥ì :
  âœ… í•œ ë²ˆë§Œ ë“±ë¡í•˜ë©´ ëª¨ë“  ì‚¬ìš©ìê°€ ì‚¬ìš© ê°€ëŠ¥
  âœ… ê´€ë¦¬ ê°„í¸
  âœ… ë¹„ìš© íš¨ìœ¨ì 
  âœ… ëŒ€ë¶€ë¶„ì˜ SMS ì„œë¹„ìŠ¤ê°€ ì´ ë°©ì‹ ì‚¬ìš©

ë‹¨ì :
  âŒ ì‚¬ìš©ìë³„ ê°œì¸ ë²ˆí˜¸ ì‚¬ìš© ë¶ˆê°€

êµ¬í˜„:
  - íšŒì‚¬ ëŒ€í‘œë²ˆí˜¸ 1ê°œë¥¼ MTSì— ë“±ë¡ (ì˜ˆ: 1588-xxxx, 080-xxx-xxxx)
  - ëª¨ë“  ì‚¬ìš©ìê°€ ì´ ë²ˆí˜¸ë¡œ ë°œì†¡
  - ì‚¬ìš©ìëŠ” ë¡œê·¸ì¸ë§Œ í•˜ë©´ ì¦‰ì‹œ ë°œì†¡ ê°€ëŠ¥

---

#### ë°©ì•ˆ 2: ì‚¬ìš©ìë³„ ë°œì‹ ë²ˆí˜¸ ë°©ì‹

ì¥ì :
  âœ… ì‚¬ìš©ìê°€ ìì‹ ì˜ ë²ˆí˜¸ë¡œ ë°œì†¡ ê°€ëŠ¥
  âœ… ìˆ˜ì‹ ìì—ê²Œ ë°œì‹ ì ì‹ ì›ì´ ëª…í™•

ë‹¨ì :
  âŒ ê° ì‚¬ìš©ìë§ˆë‹¤ MTS ë‹´ë‹¹ìì—ê²Œ ë“±ë¡ ìš”ì²­ í•„ìš”
  âŒ ìŠ¹ì¸ ëŒ€ê¸° ì‹œê°„ ì†Œìš”
  âŒ ê´€ë¦¬ ë³µì¡
  âŒ í™•ì¥ì„± ë‚®ìŒ

êµ¬í˜„ ì‹œë‚˜ë¦¬ì˜¤:
  1. ì‚¬ìš©ì íšŒì›ê°€ì…
  2. ì‚¬ìš©ìê°€ ë°œì‹ ë²ˆí˜¸ ë“±ë¡ ìš”ì²­
  3. ì‹œìŠ¤í…œì´ ê´€ë¦¬ìì—ê²Œ ì•Œë¦¼
  4. ê´€ë¦¬ìê°€ MTS ë‹´ë‹¹ìì—ê²Œ ë“±ë¡ ìš”ì²­
  5. MTS ìŠ¹ì¸ ì™„ë£Œ í›„ ì‚¬ìš©ìì—ê²Œ ì•Œë¦¼
  6. ì‚¬ìš©ì ë°œì†¡ ê°€ëŠ¥

---

#### ë°©ì•ˆ 3: í•˜ì´ë¸Œë¦¬ë“œ ë°©ì‹
  - ê¸°ë³¸: ëŒ€í‘œ ë°œì‹ ë²ˆí˜¸ ì‚¬ìš©
  - ì˜µì…˜: ì‚¬ìš©ìê°€ ì›í•˜ë©´ ê°œì¸ ë²ˆí˜¸ ë“±ë¡ (ìœ ë£Œ ì˜µì…˜)

================================================================================

## 5ï¸âƒ£ MTS ë‹´ë‹¹ì ë¬¸ì˜ ì‚¬í•­

ë‹¤ìŒ ë‚´ìš©ì„ MTS ë‹´ë‹¹ìì—ê²Œ í™•ì¸ í•„ìš”:

### ì§ˆë¬¸ 1: ë°œì‹ ë²ˆí˜¸ ìë™ ë“±ë¡ API

Q: SMS/LMS/MMS ë°œì‹ ë²ˆí˜¸ë¥¼ APIë¥¼ í†µí•´ ìë™ìœ¼ë¡œ ë“±ë¡/ìŠ¹ì¸ ìš”ì²­í•  ìˆ˜ ìˆëŠ”
   ë°©ë²•ì´ ìˆë‚˜ìš”?

A: (ë‹´ë‹¹ì í™•ì¸ í•„ìš”)

---

### ì§ˆë¬¸ 2: ëŒ€ëŸ‰ ë°œì‹ ë²ˆí˜¸ ë“±ë¡ í”„ë¡œì„¸ìŠ¤

Q: ì„œë¹„ìŠ¤ ì‚¬ìš©ìê°€ ëŠ˜ì–´ë‚  ê²½ìš°, ëŒ€ëŸ‰ì˜ ë°œì‹ ë²ˆí˜¸ë¥¼ ë“±ë¡í•˜ëŠ”
   ê°„ì†Œí™”ëœ í”„ë¡œì„¸ìŠ¤ê°€ ìˆë‚˜ìš”?

A: (ë‹´ë‹¹ì í™•ì¸ í•„ìš”)

---

### ì§ˆë¬¸ 3: ëŒ€í‘œ ë°œì‹ ë²ˆí˜¸ ì •ì±…

Q: í•˜ë‚˜ì˜ ëŒ€í‘œ ë°œì‹ ë²ˆí˜¸ë¡œ ì—¬ëŸ¬ ì‚¬ìš©ìê°€ ë°œì†¡í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•œê°€ìš”?
   ë°œì†¡ëŸ‰ ì œí•œì´ë‚˜ ì •ì±…ì  ì œì•½ì‚¬í•­ì´ ìˆë‚˜ìš”?

A: (ë‹´ë‹¹ì í™•ì¸ í•„ìš”)

---

### ì§ˆë¬¸ 4: í…ŒìŠ¤íŠ¸ í™˜ê²½

Q: í…ŒìŠ¤íŠ¸ìš© ë°œì‹ ë²ˆí˜¸ëŠ” ì–´ë–»ê²Œ ë“±ë¡í•˜ë‚˜ìš”?
   í…ŒìŠ¤íŠ¸ í™˜ê²½ê³¼ ìš´ì˜ í™˜ê²½ì˜ ë°œì‹ ë²ˆí˜¸ê°€ ë³„ë„ì¸ê°€ìš”?

A: (ë‹´ë‹¹ì í™•ì¸ í•„ìš”)

================================================================================

## 6ï¸âƒ£ ê¶Œì¥ ì‚¬í•­

### ì¦‰ì‹œ ì¡°ì¹˜ (í…ŒìŠ¤íŠ¸ ì™„ë£Œë¥¼ ìœ„í•´)

1. MTS ë‹´ë‹¹ìì—ê²Œ ì—°ë½
   - ë°œì‹ ë²ˆí˜¸ 010-4057-1331 ë“±ë¡ ìš”ì²­
   - ë˜ëŠ” ì´ë¯¸ ë“±ë¡ëœ í…ŒìŠ¤íŠ¸ ë²ˆí˜¸ í™•ì¸

2. ë“±ë¡ ì™„ë£Œ í›„
   - Phase 1-1 (SMS) í…ŒìŠ¤íŠ¸
   - Phase 1-2 (LMS) í…ŒìŠ¤íŠ¸
   - Phase 1-3 (MMS) í…ŒìŠ¤íŠ¸

---

### ì„œë¹„ìŠ¤ ë°©í–¥ ê²°ì • (ìš´ì˜ ì „ëµ)

1. ë°©ì•ˆ 1 ì„ íƒ ì‹œ (ëŒ€í‘œ ë°œì‹ ë²ˆí˜¸ - ê¶Œì¥)
   - ëŒ€í‘œë²ˆí˜¸ 1ê°œ ë“±ë¡
   - ë°œì‹ ë²ˆí˜¸ ê´€ë¦¬ UI ì œê±°
   - ëª¨ë“  ì‚¬ìš©ìê°€ ëŒ€í‘œë²ˆí˜¸ë¡œ ë°œì†¡

2. ë°©ì•ˆ 2 ì„ íƒ ì‹œ (ì‚¬ìš©ìë³„ ë°œì‹ ë²ˆí˜¸)
   - ë°œì‹ ë²ˆí˜¸ ë“±ë¡ ì›Œí¬í”Œë¡œìš° êµ¬ì¶•
   - ê´€ë¦¬ì ìŠ¹ì¸ í”„ë¡œì„¸ìŠ¤ ê°•í™”
   - ì‚¬ìš©ì ëŒ€ê¸° ì‹œê°„ ì•ˆë‚´

================================================================================

## ğŸ“Œ ìš”ì•½

ë¬¸ì œ:
  ë°œì‹ ë²ˆí˜¸ê°€ MTS ì‹œìŠ¤í…œì— ì‚¬ì „ ë“±ë¡ë˜ì§€ ì•Šì•„ ER17 ì˜¤ë¥˜ ë°œìƒ

ì›ì¸:
  MTS APIëŠ” SMS/LMS/MMS ë°œì†¡ ì‹œ ë°˜ë“œì‹œ ì‚¬ì „ ë“±ë¡ëœ ë°œì‹ ë²ˆí˜¸ë§Œ í—ˆìš©

í•´ê²°:
  - ë‹¨ê¸°: MTS ë‹´ë‹¹ìì—ê²Œ í…ŒìŠ¤íŠ¸ìš© ë°œì‹ ë²ˆí˜¸ ë“±ë¡ ìš”ì²­
  - ì¥ê¸°: ëŒ€í‘œ ë°œì‹ ë²ˆí˜¸ 1ê°œ ë“±ë¡ í›„ ëª¨ë“  ì‚¬ìš©ìê°€ ê³µìœ  (ê¶Œì¥)

í™•ì¸ ì‚¬í•­:
  MTS ë‹´ë‹¹ìì—ê²Œ ë°œì‹ ë²ˆí˜¸ ìë™ ë“±ë¡ API ì¡´ì¬ ì—¬ë¶€ ë¬¸ì˜

================================================================================

## 7ï¸âƒ£ ì¶”ê°€ ë¬¸ì œ: ER15 ì—ëŸ¬ (MessageSizeOverException)

### ë¬¸ì œ ë°œê²¬ì¼
2025-11-03

### ë¬¸ì œ ì¦ìƒ
- SMS/LMS ë°œì†¡ ì‹œ ER15 ì—ëŸ¬ ë°œìƒ
- ì˜¤ë¥˜ ì½”ë“œ: ER15
- ì˜¤ë¥˜ ë©”ì‹œì§€: "MessageSizeOverException"
- ë°œì†¡ ì‹œë„ ë©”ì‹œì§€: 264ë°”ì´íŠ¸ (90ë°”ì´íŠ¸ ì´ˆê³¼)

### ì‹¤ì œ MTS API ìš”ì²­/ì‘ë‹µ

[ìš”ì²­ - 1ì°¨ ì‹œë„]
{
  "auth_code": "***",
  "callback_number": "01040571331",
  "phone_number": "01040571331",
  "message": "ì•ˆë…•í•˜ì„¸ìš” ìœ¤ê±´ë‹˜ ì— í‹°ì—ìŠ¤ì»´í¼ë‹ˆì…ë‹ˆë‹¤.\n2025-11-03 íŠ¹ë³„ í• ì¸ ì•ˆë‚´ë“œë¦½ë‹ˆë‹¤...",
  // subject ì—†ìŒ â†’ SMSë¡œ ì²˜ë¦¬
}

[ì‘ë‹µ]
{
  "code": "ER15",
  "received_at": "2025-11-03 16:20:39",
  "message": "MessageSizeOverException"
}

[ìš”ì²­ - 2ì°¨ ì‹œë„ (subject ì¶”ê°€)]
{
  "auth_code": "***",
  "callback_number": "01040571331",
  "phone_number": "01040571331",
  "message": "ì•ˆë…•í•˜ì„¸ìš” ìœ¤ê±´ë‹˜...",
  "subject": ""  // ë¹ˆ ë¬¸ìì—´ ì¶”ê°€
}

[ì‘ë‹µ]
{
  "code": "ER15",  // ì—¬ì „íˆ ì‹¤íŒ¨
  "received_at": "2025-11-03 16:24:10",
  "message": "MessageSizeOverException"
}

[ìš”ì²­ - 3ì°¨ ì‹œë„ (subjectì— ê³µë°±)]
{
  "subject": " "  // ê³µë°± í•œ ì¹¸
}

[ì‘ë‹µ]
{
  "code": "ER15",  // ì—¬ì „íˆ ì‹¤íŒ¨
  "received_at": "2025-11-03 16:49:34"
}

---

### ë¬¸ì œ ì›ì¸ ë¶„ì„

1. **SMS ê¸¸ì´ ì œí•œ**
   - SMS: 90ë°”ì´íŠ¸ ì œí•œ (í•œê¸€ ì•½ 30ì)
   - LMS: 2000ë°”ì´íŠ¸ ì œí•œ (í•œê¸€ ì•½ 666ì)

2. **MTS API SMS/LMS êµ¬ë¶„ ë°©ì‹**
   - ë¬¸ì„œ: "subject íŒŒë¼ë¯¸í„°ê°€ ìˆìœ¼ë©´ LMSë¡œ ì „ì†¡"
   - ì‹¤ì œ: subjectê°€ ë¹ˆ ë¬¸ìì—´("")ì´ë‚˜ ê³µë°±(" ")ì¸ ê²½ìš° SMSë¡œ ì²˜ë¦¬ë¨

3. **ë©”ì‹œì§€ ë°”ì´íŠ¸ ê³„ì‚°**
   - ì‹¤ì œ ë©”ì‹œì§€: ë³€ìˆ˜ ì¹˜í™˜ ì „ ì›ë³¸ í¬í•¨ ì•½ 264ë°”ì´íŠ¸
   - SMS ì œí•œ(90ë°”ì´íŠ¸) ì´ˆê³¼
   - MTS APIê°€ SMSë¡œ ì¸ì‹í•˜ì—¬ ER15 ì—ëŸ¬ ë°˜í™˜

---

### í•´ê²° ì‹œë„ ê³¼ì •

#### ì‹œë„ 1: ë°”ì´íŠ¸ ê³„ì‚° ë° ìë™ LMS ì „í™˜
```typescript
// src/lib/mtsApi.ts
const messageBytes = Buffer.byteLength(message, 'utf-8');

if (messageBytes > 90 || subject) {
  requestBody.subject = subject || '';
}
```
ê²°ê³¼: âŒ ì‹¤íŒ¨ (ë¹ˆ ë¬¸ìì—´ì€ LMSë¡œ ì¸ì‹ ì•ˆ ë¨)

#### ì‹œë„ 2: ê³µë°±ìœ¼ë¡œ ë³€ê²½
```typescript
requestBody.subject = subject || ' ';
```
ê²°ê³¼: âŒ ì‹¤íŒ¨ (ê³µë°±ë„ LMSë¡œ ì¸ì‹ ì•ˆ ë¨)

#### ì‹œë„ 3: ì˜ë¯¸ìˆëŠ” ê°’ ì¶”ê°€ (ìµœì¢… ì ìš©)
```typescript
requestBody.subject = subject || 'LMS';
```
ê²°ê³¼: â³ í…ŒìŠ¤íŠ¸ ëŒ€ê¸° ì¤‘

---

### MTS API ë¬¸ì„œ í™•ì¸ ì‚¬í•­

**SMS ë©”ì‹œì§€ ì „ì†¡ API**
- path: /sndng/sms/sendMessage
- message: text(1000) - í•„ìˆ˜ - "ê³µë°± í¬í•¨ 1000ìë¡œ ì œí•œ"
- subject: text(20) - ì„ íƒ - "ì œëª© LMS/MMS ì „ì†¡ì‹œ ì œëª©"

**ì£¼ì˜ì‚¬í•­**:
- subject íŒŒë¼ë¯¸í„°ëŠ” ì„ íƒì‚¬í•­
- subjectê°€ ìˆìœ¼ë©´ LMSë¡œ, ì—†ìœ¼ë©´ SMSë¡œ ì²˜ë¦¬
- **ë¹ˆ ë¬¸ìì—´("")ì´ë‚˜ ê³µë°±(" ")ì€ subjectê°€ ì—†ëŠ” ê²ƒìœ¼ë¡œ ê°„ì£¼ë  ìˆ˜ ìˆìŒ**

---

### MTS ë‹´ë‹¹ì ë¬¸ì˜ ì‚¬í•­ (ì¶”ê°€)

#### ì§ˆë¬¸ 5: SMS/LMS ìë™ êµ¬ë¶„ ì •ì±…

Q: subject íŒŒë¼ë¯¸í„°ì˜ ê°’ì´ ë¹ˆ ë¬¸ìì—´("")ì´ê±°ë‚˜ ê³µë°±(" ")ì¼ ê²½ìš°,
   SMSì™€ LMS ì¤‘ ì–´ëŠ ê²ƒìœ¼ë¡œ ì²˜ë¦¬ë˜ë‚˜ìš”?

í˜„ìƒ:
  - subject: "" (ë¹ˆ ë¬¸ìì—´) â†’ SMSë¡œ ì²˜ë¦¬ë˜ì–´ ER15 ë°œìƒ
  - subject: " " (ê³µë°±) â†’ SMSë¡œ ì²˜ë¦¬ë˜ì–´ ER15 ë°œìƒ
  - subject: "LMS" (ê°’ ìˆìŒ) â†’ í…ŒìŠ¤íŠ¸ í•„ìš”

ë¬¸ì˜:
  - 90ë°”ì´íŠ¸ ì´ˆê³¼ ë©”ì‹œì§€ë¥¼ ìë™ìœ¼ë¡œ LMSë¡œ ì „í™˜í•˜ë ¤ë©´
    subjectì— ì–´ë–¤ ê°’ì„ ë„£ì–´ì•¼ í•˜ë‚˜ìš”?
  - ë¹ˆ ë¬¸ìì—´ë¡œëŠ” LMS ì „í™˜ì´ ë¶ˆê°€ëŠ¥í•œê°€ìš”?

A: (ë‹´ë‹¹ì í™•ì¸ í•„ìš”)

---

#### ì§ˆë¬¸ 6: ER15 ì—ëŸ¬ ìƒì„¸ ì •ë³´

Q: ER15 (MessageSizeOverException) ì—ëŸ¬ëŠ” ì •í™•íˆ ì–´ë–¤ ìƒí™©ì—ì„œ ë°œìƒí•˜ë‚˜ìš”?

í˜„ìƒ:
  - 264ë°”ì´íŠ¸ ë©”ì‹œì§€ë¥¼ subject ì—†ì´ ì „ì†¡ â†’ ER15
  - 264ë°”ì´íŠ¸ ë©”ì‹œì§€ë¥¼ subject="" ë¡œ ì „ì†¡ â†’ ER15
  - 264ë°”ì´íŠ¸ëŠ” LMS ì œí•œ(2000ë°”ì´íŠ¸) ì´ë‚´ì¸ë°ë„ ì—ëŸ¬ ë°œìƒ

ë¬¸ì˜:
  - ER15ëŠ” SMS 90ë°”ì´íŠ¸ ì´ˆê³¼ ì‹œ ë°œìƒí•˜ëŠ” ì—ëŸ¬ì¸ê°€ìš”?
  - ì•„ë‹ˆë©´ LMS 2000ë°”ì´íŠ¸ ì´ˆê³¼ ì‹œ ë°œìƒí•˜ëŠ” ì—ëŸ¬ì¸ê°€ìš”?
  - subjectê°€ ìˆì–´ë„ ER15ê°€ ë°œìƒí•  ìˆ˜ ìˆë‚˜ìš”?

A: (ë‹´ë‹¹ì í™•ì¸ í•„ìš”)

---

### ìµœì¢… ì ìš© ì½”ë“œ (2025-11-03)

```typescript
// src/lib/mtsApi.ts - Line 141-145

// ë©”ì‹œì§€ ë°”ì´íŠ¸ ê³„ì‚° (í•œê¸€ = 3ë°”ì´íŠ¸, ì˜ë¬¸/ìˆ«ì = 1ë°”ì´íŠ¸)
const messageBytes = Buffer.byteLength(message, 'utf-8');

// 90ë°”ì´íŠ¸ ì´ˆê³¼ ì‹œ LMSë¡œ ì „ì†¡ (subject í•„ìˆ˜)
// MTS APIëŠ” subject ìœ ë¬´ë¡œ SMS/LMSë¥¼ êµ¬ë¶„í•©ë‹ˆë‹¤
if (messageBytes > 90 || subject) {
  requestBody.subject = subject || 'LMS'; // ê¸°ë³¸ ì œëª©ìœ¼ë¡œ LMS ì „ì†¡
}
```

**ë³€ê²½ ë‚´ì—­**:
- ER15 ì—ëŸ¬ ì½”ë“œ ë§¤í•‘ ì¶”ê°€
- ë©”ì‹œì§€ ë°”ì´íŠ¸ ê³„ì‚° ë¡œì§ ì¶”ê°€
- 90ë°”ì´íŠ¸ ì´ˆê³¼ ì‹œ ìë™ìœ¼ë¡œ subject ì¶”ê°€
- subject ê¸°ë³¸ê°’: 'LMS' (ë¹ˆ ë¬¸ìì—´ì€ ì¸ì‹ ì•ˆ ë¨)

---

### ì„ì‹œ í•´ê²° ë°©ì•ˆ

**ì˜µì…˜ A: subjectì— ì˜ë¯¸ìˆëŠ” ê°’ ì‚¬ìš© (ì ìš©ë¨)**
```typescript
requestBody.subject = subject || 'LMS';
```

**ì˜µì…˜ B: ì‚¬ìš©ìì—ê²Œ ì œëª© ì…ë ¥ ìš”ì²­**
- UIì—ì„œ LMS ë°œì†¡ ì‹œ ì œëª© ì…ë ¥ í•„ë“œ ì¶”ê°€
- ì‚¬ìš©ìê°€ ì œëª©ì„ ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ ê¸°ë³¸ê°’ ì‚¬ìš©

**ì˜µì…˜ C: ë©”ì‹œì§€ ìë™ ë¶„í•  (í–¥í›„ ê³ ë ¤)**
- 90ë°”ì´íŠ¸ ì´ˆê³¼ ì‹œ ìë™ìœ¼ë¡œ ì—¬ëŸ¬ SMSë¡œ ë¶„í• 
- ë‹¨, ë¹„ìš© ì¦ê°€ ë° ìˆ˜ì‹  ê²½í—˜ ì €í•˜ ê°€ëŠ¥ì„±

---

### í…ŒìŠ¤íŠ¸ ë©”ì‹œì§€ ì˜ˆì‹œ

```
ì•ˆë…•í•˜ì„¸ìš” #[ì´ë¦„]ë‹˜ #[íšŒì‚¬ëª…]ì…ë‹ˆë‹¤.
#[ì˜¤ëŠ˜ë‚ ì§œ] íŠ¹ë³„ í• ì¸ ì•ˆë‚´ë“œë¦½ë‹ˆë‹¤.
ì „í™”ë²ˆí˜¸: #[ì „í™”ë²ˆí˜¸]
ê·¸ë£¹ëª…: #[ê·¸ë£¹ëª…]
í˜„ì¬ì‹œê°„: #[í˜„ì¬ì‹œê°„]
ìš”ì¼: #[ìš”ì¼]
ë°œì‹ ë²ˆí˜¸: #[ë°œì‹ ë²ˆí˜¸]
íšŒì‚¬ëª…: #[íšŒì‚¬ëª…]
ë‹´ë‹¹ìëª…: #[ë‹´ë‹¹ìëª…]
```

**ë³€ìˆ˜ ì¹˜í™˜ í›„ ì‹¤ì œ ë©”ì‹œì§€**:
```
ì•ˆë…•í•˜ì„¸ìš” ìœ¤ê±´ë‹˜ ì— í‹°ì—ìŠ¤ì»´í¼ë‹ˆì…ë‹ˆë‹¤.
2025-11-03 íŠ¹ë³„ í• ì¸ ì•ˆë‚´ë“œë¦½ë‹ˆë‹¤.
ì „í™”ë²ˆí˜¸: 010-4057-1331
ê·¸ë£¹ëª…: í…ŒìŠ¤íŠ¸ê·¸ë£¹
í˜„ì¬ì‹œê°„: 16:49
ìš”ì¼: ì¼ìš”ì¼
ë°œì‹ ë²ˆí˜¸: 010-4057-1331
íšŒì‚¬ëª…: ì— í‹°ì—ìŠ¤ì»´í¼ë‹ˆ
ë‹´ë‹¹ìëª…: ìœ¤ê±´
```

ë°”ì´íŠ¸ ìˆ˜: ì•½ 264ë°”ì´íŠ¸ (í•œê¸€ 88ì ìˆ˜ì¤€)

================================================================================

ê´€ë ¨ íŒŒì¼:
- docs/ì—°ë™ê·œê²©ì„œmd/ë°œì†¡API/MTS_ì¹´ì¹´ì˜¤ì•Œë¦¼í†¡_Restful_Interface_Guide_v2.1.md
- src/lib/mtsApi.ts (ER15 ì—ëŸ¬ ì²˜ë¦¬ ë° ìë™ LMS ì „í™˜ ë¡œì§ ì¶”ê°€)
- .env.local (TEST_CALLING_NUMBER)

================================================================================

## Section 8: MMS ì´ë¯¸ì§€ ì—…ë¡œë“œ ë° ì „ì†¡ êµ¬í˜„ ì™„ë£Œ (2025-11-03)

### ë¬¸ì œ ìƒí™©
MMS ë©”ì‹œì§€ ì „ì†¡ ì‹œ ì´ë¯¸ì§€ë¥¼ ì²¨ë¶€í•˜ëŠ” ê¸°ëŠ¥ì´ í•„ìš”í–ˆìœ¼ë‚˜, ê¸°ì¡´ Naver SENS API ê¸°ë°˜ìœ¼ë¡œ êµ¬í˜„ë˜ì–´ ìˆì—ˆìŒ.

### í•´ê²° ê³¼ì •

#### 1. ì´ë¯¸ì§€ ì—…ë¡œë“œ API ì „í™˜
**íŒŒì¼**: `src/app/api/messages/upload-image/route.ts`

**ë³€ê²½ ë‚´ìš©**:
- Naver SENS API â†’ MTS API (`/img/upload_image`) ì „í™˜
- í™˜ê²½ ë³€ìˆ˜: `NAVER_ACCESS_KEY_ID`, `NAVER_SECRET_KEY`, `NAVER_SENS_SERVICE_ID` ì œê±°
- MTS API ê¶Œì¥ ìŠ¤í™ ì ìš©:
  - í•´ìƒë„: 1500x1440 â†’ 640x480px
  - íŒŒì¼ í¬ê¸°: 300KB ì´í•˜ (ë™ì¼)
  - í¬ë§·: JPG (ìë™ ë³€í™˜)
  - í’ˆì§ˆ: 88% â†’ 85%

**MTS API ì‘ë‹µ êµ¬ì¡°**:
```json
{
  "code": "0000",
  "image": "/2025/11/03/20251103052213575.jpg",
  "message": "StoredFileSuccess"
}
```
- ì£¼ì˜: í•„ë“œëª…ì´ `images`ê°€ ì•„ë‹Œ `image` (ë‹¨ìˆ˜í˜•)

#### 2. MMS ì „ì†¡ ë¡œì§ êµ¬í˜„
**íŒŒì¼**: `src/lib/mtsApi.ts`

**sendMtsSMS í•¨ìˆ˜ ìˆ˜ì •**:
- íŒŒë¼ë¯¸í„° ì¶”ê°€: `imageUrl?: string`
- ë©”ì‹œì§€ íƒ€ì… ìë™ íŒë‹¨:
  ```typescript
  let messageType = 'SMS';
  if (imageUrl) {
    messageType = 'MMS';
  } else if (messageBytes > 90) {
    messageType = 'LMS';
  }
  ```
- attachment ê°ì²´ ìƒì„±:
  ```typescript
  if (imageUrl) {
    requestBody.attachment = {
      image: [{
        img_url: imageUrl
      }]
    };
  }
  ```

#### 3. í”„ë¡ íŠ¸ì—”ë“œ-ë°±ì—”ë“œ ì—°ë™
**íŒŒì¼**: `src/components/messages/SmsMessageContent.tsx`
- ì—…ë¡œë“œ API ì‘ë‹µì—ì„œ `imageUrl` ì¶”ì¶œ
- `imageUrl`ì„ `fileId`ë¡œ ì‚¬ìš© (MTS ì´ë¯¸ì§€ ê²½ë¡œ)

**íŒŒì¼**: `src/app/api/messages/send/route.ts`
- `imageFileIds` íŒŒë¼ë¯¸í„° ì¶”ê°€ (í”„ë¡ íŠ¸ì—”ë“œ í˜¸í™˜ì„±)
- `imageUrls`ì™€ `imageFileIds` í†µí•©:
  ```typescript
  const finalImageUrls = imageFileIds.length > 0 ? imageFileIds : imageUrls;
  ```

**íŒŒì¼**: `src/lib/messageSender.ts`
- MMS ë°œì†¡ ì‹œ `sendMtsSMS` ì‚¬ìš© (ì²« ë²ˆì§¸ ì´ë¯¸ì§€ë§Œ)
  ```typescript
  sendResult = await sendMtsSMS(
    cleanPhone,
    message,
    callbackNumber,
    subject || 'MMS',
    undefined,
    imageUrls[0]
  );
  ```

### í…ŒìŠ¤íŠ¸ ê²°ê³¼
```
[MTS SMS/LMS/MMS API í˜¸ì¶œ ì‹œì‘]
ë©”ì‹œì§€ íƒ€ì…: MMS
ë©”ì‹œì§€ í¬ê¸°: 26 ë°”ì´íŠ¸
ì´ë¯¸ì§€ í¬í•¨: Yes
attachment: {
  "image": [{
    "img_url": "/2025/11/03/20251103052213575.jpg"
  }]
}
```

### í˜„ì¬ ìƒíƒœ
âœ… ì´ë¯¸ì§€ ì—…ë¡œë“œ: ì •ìƒ ì‘ë™
âœ… MMS ì „ì†¡ ìš”ì²­: ì •ìƒ ì‘ë™ (attachment í¬í•¨)
âŒ ì‹¤ì œ ì „ì†¡ ì‹¤íŒ¨: ER17 (ë°œì‹ ë²ˆí˜¸ ë¯¸ë“±ë¡/ë¯¸ìŠ¹ì¸)

### MTS ë¬¸ì˜ ì‚¬í•­
**ì§ˆë¬¸ 7**: MMS ì´ë¯¸ì§€ URL í˜•ì‹
- ì—…ë¡œë“œ APIì—ì„œ ë°›ì€ ìƒëŒ€ ê²½ë¡œ(`/2025/11/03/...`)ë¥¼ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•´ë„ ë˜ë‚˜ìš”?
- ì•„ë‹ˆë©´ ì „ì²´ URL(`https://api.mtsco.co.kr/2025/11/03/...`)ì´ í•„ìš”í•œê°€ìš”?

================================================================================

ì‘ì„±ì: Claude Code
ìµœì¢… ìˆ˜ì •ì¼: 2025-11-03 (MMS ì´ë¯¸ì§€ ì—…ë¡œë“œ êµ¬í˜„ ì™„ë£Œ)
