================================================================================
ë©”ì‹œì§€ ë°œì†¡ ê¸°ëŠ¥ êµ¬í˜„ ê³„íšì„œ - SMS/LMS/MMS ì „ìš©
================================================================================
ì‘ì„±ì¼: 2025-10-13
ëŒ€ìƒ: messages/send í˜ì´ì§€ > ë©”ì‹œì§€ ë³´ë‚´ê¸° íƒ­ > ë¬¸ìë©”ì‹œì§€ í•˜ìœ„ íƒ­
ë²”ìœ„: SMS/LMS/MMS ë°œì†¡ ê¸°ëŠ¥ë§Œ í¬í•¨ (ì¹´ì¹´ì˜¤/RCS/ë„¤ì´ë²„ ì œì™¸)

âš ï¸âš ï¸âš ï¸ ì¤‘ìš” ê³µì§€ âš ï¸âš ï¸âš ï¸
================================================================================
ğŸš« UI ìˆ˜ì • ì ˆëŒ€ ê¸ˆì§€! ğŸš«
- ê¸°ì¡´ UI ì»´í¬ë„ŒíŠ¸ëŠ” ì ˆëŒ€ ìˆ˜ì •í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤
- ìƒˆë¡œìš´ UI ìš”ì†Œë¥¼ ì¶”ê°€í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤
- CSS ìŠ¤íƒ€ì¼ì„ ë³€ê²½í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤
- ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°ë¥¼ ë³€ê²½í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤

âœ… êµ¬í˜„ ê°€ëŠ¥í•œ ì‘ì—…:
- API ì—”ë“œí¬ì¸íŠ¸ ìƒì„± ë° ë¡œì§ êµ¬í˜„
- ê¸°ì¡´ UIì— API ì—°ë™ (state ë° handlerë§Œ)
- DB í…Œì´ë¸” ìƒì„± ë° ìŠ¤í‚¤ë§ˆ ê´€ë¦¬
- ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ ë° ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¶”ê°€

ğŸ“‹ êµ¬í˜„ ì „ ì²´í¬ë¦¬ìŠ¤íŠ¸:
[ ] ì´ ì‘ì—…ì´ UIë¥¼ ë³€ê²½í•˜ëŠ”ê°€? â†’ NOì—¬ì•¼ ì§„í–‰
[ ] ê¸°ì¡´ ì»´í¬ë„ŒíŠ¸ íŒŒì¼ì„ ìˆ˜ì •í•˜ëŠ”ê°€? â†’ ìµœì†Œí™”, API ì—°ë™ë§Œ
[ ] ìƒˆë¡œìš´ UI ìš”ì†Œë¥¼ ì¶”ê°€í•˜ëŠ”ê°€? â†’ ì ˆëŒ€ NO
================================================================================


================================================================================
ëª©ì°¨
================================================================================
1. í”„ë¡œì íŠ¸ ê°œìš” ë° í˜„í™©
2. ê¸°ì¡´ ë¦¬ì†ŒìŠ¤ ë¶„ì„ (ì¬ì‚¬ìš© ê°€ëŠ¥)
3. êµ¬í˜„ ì „ëµ (ê³µí†µ ë¡œì§ ì¶”ì¶œ)
4. ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ
5. API ì—”ë“œí¬ì¸íŠ¸ ì„¤ê³„
6. ê³µí†µ ë¡œì§ êµ¬í˜„ (messageSender.ts)
7. ë‹¨ê³„ë³„ êµ¬í˜„ ê³„íš (7ì¼)
8. í”„ë¡ íŠ¸ì—”ë“œ ì—°ë™ (API í˜¸ì¶œë§Œ)
9. í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤
10. ë³´ì•ˆ ë° ì—ëŸ¬ ì²˜ë¦¬


================================================================================
1. í”„ë¡œì íŠ¸ ê°œìš” ë° í˜„í™©
================================================================================

1.1 ëŒ€ìƒ UI êµ¬ì¡°
-------------
messages/send í˜ì´ì§€
  â””â”€ MessageSendTab (ë©”ì‹œì§€ ë³´ë‚´ê¸° íƒ­)
      â”œâ”€ ì¢Œì¸¡ ì˜ì—­
      â”‚   â”œâ”€ ë©”ì‹œì§€ ë°œì‹ ë²ˆí˜¸ ì„ íƒ
      â”‚   â”œâ”€ ë©”ì‹œì§€ ìˆ˜ì‹ ë²ˆí˜¸ ì¶”ê°€ (ì§ì ‘ì…ë ¥/ì£¼ì†Œë¡/ì—‘ì…€/í…ìŠ¤íŠ¸)
      â”‚   â”œâ”€ ì¶”ê°€í•œ ìˆ˜ì‹ ë²ˆí˜¸ ëª©ë¡ (ì´ 0ê°œ)
      â”‚   â””â”€ ì €ì¥ ì„¹ì…˜ (ìƒˆë¡œ ì €ì¥/ë®ì–´ì“°ê¸°/ë¶ˆëŸ¬ì˜¤ê¸°)
      â”‚
      â””â”€ ìš°ì¸¡ ì˜ì—­
          â”œâ”€ 4ê°œ í•˜ìœ„ íƒ­ (ğŸ“±ë¬¸ìë©”ì‹œì§€/ğŸ’¬ì¹´ì¹´ì˜¤í†¡/ğŸ”µRCS/ğŸŸ¢ë„¤ì´ë²„í†¡í†¡)
          â”œâ”€ SmsMessageContent ì»´í¬ë„ŒíŠ¸ â† ì´ ë¶€ë¶„ë§Œ êµ¬í˜„!
          â”‚   â”œâ”€ ì œëª© (40ì, optional)
          â”‚   â”œâ”€ ë©”ì‹œì§€ ë‚´ìš© (2000 bytes)
          â”‚   â”œâ”€ ì´ë¯¸ì§€ ì²¨ë¶€ í† ê¸€ (MMS)
          â”‚   â”œâ”€ ì¹˜í™˜ë¬¸êµ¬ ë²„íŠ¼ (#[ë³€ìˆ˜ëª…] í˜•ì‹)
          â”‚   â””â”€ ë°œì†¡ ì˜µì…˜ (ê´‘ê³ ë©”ì‹œì§€ ì—¬ë¶€, ëŒ€ì²´ë°œì†¡ ì—¬ë¶€)
          â””â”€ ì „ì†¡/ì˜ˆì•½ ì¤€ë¹„ ë²„íŠ¼

1.2 í˜„ì¬ ìƒíƒœ
-------------
âœ… UI ì™„ì„±: SmsMessageContent ì»´í¬ë„ŒíŠ¸ ì™„ì „ êµ¬í˜„
âœ… í™˜ê²½ë³€ìˆ˜: Naver SENS API ì„¤ì • ì™„ë£Œ
âœ… ê¸°ì¡´ êµ¬í˜„: reservations/message API ì™„ì „ ë™ì‘
âŒ ë°±ì—”ë“œ: messages/send ì „ìš© API ë¯¸êµ¬í˜„
âŒ ì—°ë™: UIì™€ API ì—°ê²° ë¯¸ì™„ë£Œ

1.3 êµ¬í˜„ ëª©í‘œ
------------
ë¬¸ìë©”ì‹œì§€ íƒ­ì—ì„œ ë‹¤ìŒ ê¸°ëŠ¥ì„ ì œê³µ:
- SMS/LMS/MMS ì¦‰ì‹œ ë° ì˜ˆì•½ ë°œì†¡
- ë°œì‹ ë²ˆí˜¸ ì„ íƒ ë° ê´€ë¦¬
- ìˆ˜ì‹ ì ê´€ë¦¬ (ì§ì ‘ ì…ë ¥, ì£¼ì†Œë¡, ì—‘ì…€, í…ìŠ¤íŠ¸ íŒŒì¼)
- ë©”ì‹œì§€ í…œí”Œë¦¿ ì €ì¥/ë¶ˆëŸ¬ì˜¤ê¸°
- ì”ì•¡ í™•ì¸ ë° ë‹¨ê°€ ê³„ì‚°
- ì¹˜í™˜ë¬¸êµ¬ ì²˜ë¦¬ (#[ë³€ìˆ˜ëª…] í˜•ì‹)
- ê´‘ê³ ë©”ì‹œì§€ í‘œê¸° ìë™ ì²˜ë¦¬
- MMS ì´ë¯¸ì§€ ì—…ë¡œë“œ

ğŸš« UI ìˆ˜ì • ê¸ˆì§€: ê¸°ì¡´ UIëŠ” ê·¸ëŒ€ë¡œ ë‘ê³  ë°±ì—”ë“œë§Œ êµ¬í˜„!


================================================================================
2. ê¸°ì¡´ ë¦¬ì†ŒìŠ¤ ë¶„ì„ (ì¬ì‚¬ìš© ê°€ëŠ¥)
================================================================================

2.1 ì´ë¯¸ ì‚¬ìš© ê°€ëŠ¥í•œ í™˜ê²½ë³€ìˆ˜
---------------------------
âœ… NEXT_PUBLIC_SUPABASE_URL
âœ… SUPABASE_SERVICE_ROLE_KEY
âœ… JWT_SECRET
âœ… NAVER_SENS_SERVICE_ID
âœ… NAVER_ACCESS_KEY_ID
âœ… NAVER_SECRET_KEY
âœ… TEST_CALLING_NUMBER

2.2 ê¸°ì¡´ DB í…Œì´ë¸” (í™œìš© ê°€ëŠ¥)
----------------------------
âœ… users - ì‚¬ìš©ì ì •ë³´
âœ… sender_numbers - ë°œì‹ ë²ˆí˜¸ ê´€ë¦¬
âœ… message_templates - ë©”ì‹œì§€ í…œí”Œë¦¿
âœ… transactions - ì”ì•¡ ê´€ë¦¬ (ì¶©ì „/ì‚¬ìš©)
âœ… reservation_message_templates - ì˜ˆì•½ ì‹œìŠ¤í…œ í…œí”Œë¦¿
âœ… reservation_scheduled_messages - ì˜ˆì•½ ë°œì†¡
âœ… reservation_message_logs - ë°œì†¡ ë‚´ì—­

2.3 ê¸°ì¡´ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë° ìœ í‹¸ë¦¬í‹°
-----------------------------
âœ… src/lib/naverSensApi.ts
   - sendNaverSMS(toNumber, message, subject?)
   - sendNaverMMS(toNumber, message, subject, fileIds)

âœ… src/utils/messageTemplateParser.ts
   - replaceTemplateVariables() - ë³€ìˆ˜ ì¹˜í™˜
   - determineMessageType() - SMS/LMS ìë™ íŒë‹¨
   - calculateMessageBytes() - ë°”ì´íŠ¸ ìˆ˜ ê³„ì‚°
   - extractVariables() - ì‚¬ìš© ë³€ìˆ˜ ì¶”ì¶œ
   - validateTemplate() - í…œí”Œë¦¿ ìœ íš¨ì„± ê²€ì¦

2.4 ê¸°ì¡´ API êµ¬í˜„ (reservations)
------------------------------
âœ… src/app/api/reservations/send-message/route.ts
   - ì¦‰ì‹œ/ì˜ˆì•½ ë°œì†¡
   - ì”ì•¡ í™•ì¸/ì°¨ê°
   - JWT ì¸ì¦
   - ë³€ìˆ˜ ì¹˜í™˜

âœ… src/app/api/reservations/scheduled-messages/route.ts
   - ì˜ˆì•½ ë©”ì‹œì§€ ëª©ë¡ ì¡°íšŒ
   - ì˜ˆì•½ ë©”ì‹œì§€ ì·¨ì†Œ

âœ… src/app/api/reservations/message-templates/route.ts
   - í…œí”Œë¦¿ CRUD


================================================================================
3. êµ¬í˜„ ì „ëµ (ê³µí†µ ë¡œì§ ì¶”ì¶œ) â­â­â­
================================================================================

3.1 ì™œ ê³µí†µ ë¡œì§ ì¶”ì¶œì¸ê°€?
------------------------
âŒ ë°©ì•ˆ A: ê¸°ì¡´ API ì§ì ‘ í˜¸ì¶œ
   - reservation_id í•„ìˆ˜ (ì˜ˆì•½ ì‹œìŠ¤í…œ ì˜ì¡´)

âŒ ë°©ì•ˆ B: ì½”ë“œ ë³µì‚¬í•˜ì—¬ ìƒˆ API ìƒì„±
   - ì½”ë“œ ì¤‘ë³µ
   - ìœ ì§€ë³´ìˆ˜ ë¶€ë‹´

âœ… ë°©ì•ˆ C: ê³µí†µ ë¡œì§ ì¶”ì¶œ (ì„ íƒ!)
   - ì½”ë“œ ì¬ì‚¬ìš©
   - ë…ë¦½ì ì¸ API
   - ìœ ì§€ë³´ìˆ˜ ìš©ì´

3.2 êµ¬í˜„ êµ¬ì¡°
------------
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ê¸°ì¡´: reservations/send-message API    â”‚
â”‚  ì‹ ê·œ: messages/send API                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ê³µí†µ ë¡œì§: src/lib/messageSender.ts    â”‚
â”‚  - sendMessage()                        â”‚
â”‚  - scheduleMessage()                    â”‚
â”‚  - checkBalance()                       â”‚
â”‚  - deductBalance()                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ì™¸ë¶€ API: Naver SENS                   â”‚
â”‚  DB: Supabase (transactions ë“±)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```


================================================================================
4. ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ
================================================================================

4.1 ê¸°ì¡´ í…Œì´ë¸” (ìˆ˜ì • ì—†ìŒ)
-------------------------
âœ… sender_numbers - ë°œì‹ ë²ˆí˜¸
âœ… message_templates - í…œí”Œë¦¿
âœ… transactions - ì”ì•¡ ê´€ë¦¬
âœ… users - ì‚¬ìš©ì ì •ë³´

4.2 ì‹ ê·œ í…Œì´ë¸” (ìƒì„± í•„ìš”)
-------------------------

ğŸ“Œ scheduled_messages (messages/send ì „ìš© ì˜ˆì•½ ë°œì†¡)
----------------------------------------------------
CREATE TABLE scheduled_messages (
  id SERIAL PRIMARY KEY,
  user_id INTEGER NOT NULL REFERENCES users(id) ON DELETE CASCADE,
  to_number VARCHAR(20) NOT NULL,
  to_name VARCHAR(100),
  message_content TEXT NOT NULL,
  subject VARCHAR(100),
  scheduled_at TIMESTAMP NOT NULL,
  status VARCHAR(20) DEFAULT 'pending', -- 'pending', 'sent', 'failed', 'cancelled'
  sent_at TIMESTAMP,
  error_message TEXT,
  metadata JSONB, -- ì¶”ê°€ ì •ë³´ (source: 'sms_tab', message_type: 'SMS' ë“±)
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

CREATE INDEX idx_scheduled_messages_user_id ON scheduled_messages(user_id);
CREATE INDEX idx_scheduled_messages_status ON scheduled_messages(status);
CREATE INDEX idx_scheduled_messages_scheduled_at ON scheduled_messages(scheduled_at);


ğŸ“Œ message_logs (ë°œì†¡ ë‚´ì—­) - Optional
-------------------------------------
CREATE TABLE message_logs (
  id SERIAL PRIMARY KEY,
  user_id INTEGER NOT NULL REFERENCES users(id) ON DELETE CASCADE,
  to_number VARCHAR(20) NOT NULL,
  to_name VARCHAR(100),
  message_content TEXT NOT NULL,
  subject VARCHAR(100),
  message_type VARCHAR(10) NOT NULL, -- 'SMS', 'LMS', 'MMS'
  sent_at TIMESTAMP,
  status VARCHAR(20) NOT NULL, -- 'sent', 'failed'
  error_message TEXT,
  credit_used INTEGER,
  metadata JSONB,
  created_at TIMESTAMP DEFAULT NOW()
);

CREATE INDEX idx_message_logs_user_id ON message_logs(user_id);
CREATE INDEX idx_message_logs_sent_at ON message_logs(sent_at);


================================================================================
5. API ì—”ë“œí¬ì¸íŠ¸ ì„¤ê³„
================================================================================

5.1 ì¦‰ì‹œ êµ¬í˜„ (Phase 1)
----------------------

ğŸ“ POST /api/messages/send
- ì¦‰ì‹œ ë°œì†¡ ë° ì˜ˆì•½ ë°œì†¡
- ë‹¤ì¤‘ ìˆ˜ì‹ ì ì§€ì›
- ì¹˜í™˜ë¬¸êµ¬ ì²˜ë¦¬ (#[ë³€ìˆ˜ëª…] í˜•ì‹)

ìš”ì²­:
{
  "recipients": [
    {
      "phone_number": "01012345678",
      "name": "í™ê¸¸ë™",
      "variables": {"ì´ë¦„": "í™ê¸¸ë™", "ì‹œê°„": "14:00"}
    }
  ],
  "message": "ì•ˆë…•í•˜ì„¸ìš” #[ì´ë¦„]ë‹˜",
  "subject": "ì œëª© (optional)",
  "sendType": "immediate", // 'immediate' | 'scheduled'
  "scheduledAt": "2025-10-15T14:00:00+09:00" // sendTypeì´ 'scheduled'ì¸ ê²½ìš°
}

ì‘ë‹µ (ì¦‰ì‹œ ë°œì†¡):
{
  "success": true,
  "totalCount": 1,
  "successCount": 1,
  "failCount": 0,
  "results": [
    {
      "recipient": "01012345678",
      "success": true,
      "messageId": "req-id-123",
      "messageType": "SMS",
      "creditUsed": 20
    }
  ]
}

ì‘ë‹µ (ì˜ˆì•½ ë°œì†¡):
{
  "success": true,
  "scheduledCount": 1,
  "scheduledAt": "2025-10-15T14:00:00+09:00",
  "results": [...]
}


ğŸ“ GET /api/messages/scheduled
- ì˜ˆì•½ ë©”ì‹œì§€ ëª©ë¡ ì¡°íšŒ

ì‘ë‹µ:
{
  "messages": [
    {
      "id": 1,
      "to_number": "01012345678",
      "to_name": "í™ê¸¸ë™",
      "message_content": "...",
      "scheduled_at": "2025-10-15T14:00:00+09:00",
      "status": "pending",
      "created_at": "..."
    }
  ]
}


ğŸ“ DELETE /api/messages/scheduled?id=123
- ì˜ˆì•½ ë©”ì‹œì§€ ì·¨ì†Œ

ì‘ë‹µ:
{
  "success": true
}


ğŸ“ GET /api/sender-numbers
- ë°œì‹ ë²ˆí˜¸ ëª©ë¡ ì¡°íšŒ

ì‘ë‹µ:
{
  "data": [
    {
      "id": 1,
      "phone_number": "01012345678",
      "display_name": "í™ê¸¸ë™",
      "is_default": true,
      "is_verified": true,
      "status": "ACTIVE"
    }
  ]
}


ğŸ“ POST /api/sender-numbers
- ë°œì‹ ë²ˆí˜¸ ë“±ë¡

ìš”ì²­:
{
  "phone_number": "01012345678",
  "display_name": "í™ê¸¸ë™"
}


ğŸ“ PUT /api/sender-numbers/:id/default
- ê¸°ë³¸ ë°œì‹ ë²ˆí˜¸ ì„¤ì •


ğŸ“ GET /api/message-templates
- í…œí”Œë¦¿ ëª©ë¡ ì¡°íšŒ

ğŸ“ POST /api/message-templates
- í…œí”Œë¦¿ ì €ì¥

ğŸ“ PUT /api/message-templates/:id
- í…œí”Œë¦¿ ìˆ˜ì •

ğŸ“ DELETE /api/message-templates/:id
- í…œí”Œë¦¿ ì‚­ì œ


5.2 ì¶”í›„ êµ¬í˜„ (Phase 2+)
-----------------------
- POST /api/contacts - ì£¼ì†Œë¡ ê´€ë¦¬
- POST /api/contacts/import/excel - ì—‘ì…€ ì—…ë¡œë“œ
- POST /api/upload/message-image - MMS ì´ë¯¸ì§€ ì—…ë¡œë“œ


================================================================================
6. ê³µí†µ ë¡œì§ êµ¬í˜„ (messageSender.ts)
================================================================================

íŒŒì¼: src/lib/messageSender.ts (ì‹ ê·œ ìƒì„±)

```typescript
import { createClient } from "@supabase/supabase-js";
import { sendNaverSMS } from "@/lib/naverSensApi";
import { determineMessageType } from "@/utils/messageTemplateParser";

const supabase = createClient(
  process.env.NEXT_PUBLIC_SUPABASE_URL!,
  process.env.SUPABASE_SERVICE_ROLE_KEY!
);

export interface SendMessageParams {
  userId: number;
  toNumber: string;
  toName?: string;
  message: string;
  subject?: string;
  messageType?: 'SMS' | 'LMS';
  metadata?: Record<string, any>;
}

export interface SendMessageResult {
  success: boolean;
  messageId?: string;
  logId?: number;
  messageType: 'SMS' | 'LMS';
  creditUsed: number;
  error?: string;
}

/**
 * ë©”ì‹œì§€ ë°œì†¡ ê³µí†µ ë¡œì§
 */
export async function sendMessage(
  params: SendMessageParams
): Promise<SendMessageResult> {
  const { userId, toNumber, toName, message, subject, metadata } = params;

  // ì „í™”ë²ˆí˜¸ ì •ë¦¬
  const cleanPhone = toNumber.replace(/[^0-9]/g, '');

  // ë©”ì‹œì§€ íƒ€ì… ê²°ì •
  const messageType = params.messageType || determineMessageType(message);

  // ë‹¨ê°€ ê³„ì‚°
  const creditRequired = messageType === 'SMS' ? 20 : 50;

  // 1. ì”ì•¡ í™•ì¸
  const balance = await checkBalance(userId);
  if (balance < creditRequired) {
    return {
      success: false,
      messageType,
      creditUsed: 0,
      error: `ê´‘ê³ ë¨¸ë‹ˆê°€ ë¶€ì¡±í•©ë‹ˆë‹¤ (í•„ìš”: ${creditRequired}ì›, í˜„ì¬: ${balance}ì›)`
    };
  }

  // 2. ë©”ì‹œì§€ ë°œì†¡
  const sendResult = await sendNaverSMS(cleanPhone, message, subject);

  if (!sendResult.success) {
    return {
      success: false,
      messageType,
      creditUsed: 0,
      error: sendResult.error || 'ë°œì†¡ ì‹¤íŒ¨'
    };
  }

  // 3. ì”ì•¡ ì°¨ê°
  await deductBalance(userId, creditRequired, messageType, metadata);

  return {
    success: true,
    messageId: sendResult.requestId,
    messageType,
    creditUsed: creditRequired
  };
}

/**
 * ì˜ˆì•½ ë°œì†¡
 */
export interface ScheduleMessageParams {
  userId: number;
  toNumber: string;
  toName?: string;
  message: string;
  subject?: string;
  scheduledAt: string;
  metadata?: Record<string, any>;
}

export async function scheduleMessage(
  params: ScheduleMessageParams,
  tableName: string = 'scheduled_messages'
): Promise<{ success: boolean; scheduledId?: number; error?: string }> {
  const { userId, toNumber, toName, message, subject, scheduledAt, metadata } = params;

  // ê³¼ê±° ì‹œê°„ ì²´í¬
  const scheduledTime = new Date(scheduledAt);
  if (scheduledTime <= new Date()) {
    return {
      success: false,
      error: "ì˜ˆì•½ ì‹œê°„ì€ í˜„ì¬ ì‹œê°„ ì´í›„ì—¬ì•¼ í•©ë‹ˆë‹¤"
    };
  }

  const cleanPhone = toNumber.replace(/[^0-9]/g, '');

  const { data, error } = await supabase
    .from(tableName)
    .insert({
      user_id: userId,
      to_number: cleanPhone,
      to_name: toName || '',
      message_content: message,
      subject: subject || '',
      scheduled_at: scheduledAt,
      status: 'pending',
      metadata: metadata || {}
    })
    .select()
    .single();

  if (error) {
    console.error('ì˜ˆì•½ ë©”ì‹œì§€ ì €ì¥ ì‹¤íŒ¨:', error);
    return {
      success: false,
      error: "ì˜ˆì•½ ë©”ì‹œì§€ ì €ì¥ ì‹¤íŒ¨"
    };
  }

  return {
    success: true,
    scheduledId: data.id
  };
}

/**
 * ì”ì•¡ í™•ì¸
 */
export async function checkBalance(userId: number): Promise<number> {
  const { data: transactions } = await supabase
    .from('transactions')
    .select('*')
    .eq('user_id', userId)
    .eq('status', 'completed')
    .order('created_at', { ascending: false });

  let balance = 0;
  for (const transaction of transactions || []) {
    const metadata = transaction.metadata as Record<string, any> | null;

    if (transaction.type === "charge") {
      if (!metadata?.isReward) {
        balance += transaction.amount;
      }
    } else if (transaction.type === "usage") {
      if (metadata?.transactionType !== "point") {
        balance -= transaction.amount;
      }
    } else if (transaction.type === "refund") {
      balance += transaction.amount;
    } else if (transaction.type === "penalty") {
      balance -= transaction.amount;
    }
  }

  return balance;
}

/**
 * ì”ì•¡ ì°¨ê°
 */
async function deductBalance(
  userId: number,
  amount: number,
  messageType: string,
  metadata?: Record<string, any>
): Promise<void> {
  await supabase.from('transactions').insert({
    user_id: userId,
    amount: amount,
    type: 'usage',
    status: 'completed',
    description: `ë©”ì‹œì§€ ë°œì†¡ (${messageType})`,
    metadata: {
      transactionType: 'advertising',
      usage_type: 'message_send',
      message_type: messageType,
      source: 'sms_tab',
      ...metadata
    },
    created_at: new Date().toISOString()
  });
}
```


================================================================================
7. ë‹¨ê³„ë³„ êµ¬í˜„ ê³„íš (7ì¼)
================================================================================

ğŸš« ì£¼ì˜: ëª¨ë“  ë‹¨ê³„ì—ì„œ UI ìˆ˜ì • ê¸ˆì§€! API ì—°ë™ë§Œ ì§„í–‰!

Day 1: ê³µí†µ ë¡œì§ ë° DB ì¤€ë¹„
--------------------------
[ ] src/lib/messageSender.ts ìƒì„± ë° êµ¬í˜„
    - sendMessage() í•¨ìˆ˜
    - scheduleMessage() í•¨ìˆ˜
    - checkBalance() í•¨ìˆ˜
    - deductBalance() í•¨ìˆ˜
[ ] DB ë§ˆì´ê·¸ë ˆì´ì…˜ ì‘ì„±
    - scheduled_messages í…Œì´ë¸” ìƒì„±
    - message_logs í…Œì´ë¸” ìƒì„± (optional)
[ ] ê¸°ì¡´ reservations APIì™€ ë¡œì§ ë¹„êµ í…ŒìŠ¤íŠ¸


Day 2: ë©”ì‹œì§€ ë°œì†¡ API êµ¬í˜„
--------------------------
[ ] src/app/api/messages/send/route.ts ìƒì„±
    - POST í•¸ë“¤ëŸ¬ êµ¬í˜„
    - JWT ì¸ì¦ í†µí•©
    - ë‹¤ì¤‘ ìˆ˜ì‹ ì ì²˜ë¦¬
    - ì¹˜í™˜ë¬¸êµ¬ ì²˜ë¦¬ (#[ë³€ìˆ˜ëª…] í˜•ì‹)
    - ì¦‰ì‹œ/ì˜ˆì•½ ë°œì†¡ ë¶„ê¸°
[ ] ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ (Postman/Thunder Client)
    - ë‹¨ì¼ ìˆ˜ì‹ ì ì¦‰ì‹œ ë°œì†¡
    - ë‹¤ì¤‘ ìˆ˜ì‹ ì ì¦‰ì‹œ ë°œì†¡
    - ì˜ˆì•½ ë°œì†¡


Day 3: ì˜ˆì•½ ë©”ì‹œì§€ ê´€ë¦¬ API êµ¬í˜„
-------------------------------
[ ] src/app/api/messages/scheduled/route.ts ìƒì„±
    - GET: ì˜ˆì•½ ë©”ì‹œì§€ ëª©ë¡ ì¡°íšŒ
    - DELETE: ì˜ˆì•½ ë©”ì‹œì§€ ì·¨ì†Œ
[ ] ì˜ˆì•½ ë°œì†¡ ìŠ¤ì¼€ì¤„ëŸ¬ ì„¤ê³„
    - Supabase Edge Function ë˜ëŠ” Cron Job
[ ] í…ŒìŠ¤íŠ¸


Day 4: ë°œì‹ ë²ˆí˜¸ ê´€ë¦¬ API êµ¬í˜„
---------------------------
[ ] src/app/api/sender-numbers/route.ts ìƒì„±
    - GET: ë°œì‹ ë²ˆí˜¸ ëª©ë¡ ì¡°íšŒ
    - POST: ë°œì‹ ë²ˆí˜¸ ë“±ë¡
[ ] src/app/api/sender-numbers/[id]/default/route.ts
    - PUT: ê¸°ë³¸ê°’ ì„¤ì •
[ ] í…ŒìŠ¤íŠ¸


Day 5: ë©”ì‹œì§€ í…œí”Œë¦¿ API
----------------------------------------
[ ] ê¸°ì¡´ API í™œìš© ê°€ëŠ¥ì„± ê²€í† 
    - message_templates í…Œì´ë¸” í™œìš©
[ ] í•„ìš”ì‹œ ì‹ ê·œ API êµ¬í˜„
    - GET /api/message-templates
    - POST /api/message-templates
    - PUT /api/message-templates/:id
    - DELETE /api/message-templates/:id
[ ] í…ŒìŠ¤íŠ¸


Day 6: í”„ë¡ íŠ¸ì—”ë“œ ì—°ë™ (ğŸš« UI ìˆ˜ì • ê¸ˆì§€!)
----------------------------------------
[ ] MessageSendTab.tsx - API ì—°ë™ë§Œ ì¶”ê°€
    - selectedSenderNumber ìƒíƒœ ì¶”ê°€
    - recipients ìƒíƒœ ì¶”ê°€
    - messageData ìƒíƒœ ì¶”ê°€
    - handleSend() í•¨ìˆ˜ êµ¬í˜„ (API í˜¸ì¶œ)
    - handleSchedule() í•¨ìˆ˜ êµ¬í˜„ (API í˜¸ì¶œ)

[ ] SmsMessageContent.tsx - API ì—°ë™ë§Œ ì¶”ê°€
    - ë¶€ëª¨ë¡œë¶€í„° props ë°›ê¸°
    - ë©”ì‹œì§€ ë°ì´í„° ë³€ê²½ ì‹œ ë¶€ëª¨ì—ê²Œ ì „ë‹¬

[ ] SenderNumberSelectModal.tsx
    - fetchSenderNumbers() API í˜¸ì¶œ ì¶”ê°€
    - onSelect í•¸ë“¤ëŸ¬ ì—°ê²°

[ ] SaveContentModal.tsx
    - handleSave() API í˜¸ì¶œ ì¶”ê°€

[ ] LoadContentModal.tsx
    - fetchTemplates() API í˜¸ì¶œ ì¶”ê°€

âš ï¸ ì£¼ì˜: ì»´í¬ë„ŒíŠ¸ JSX êµ¬ì¡°ëŠ” ì ˆëŒ€ ìˆ˜ì •í•˜ì§€ ë§ ê²ƒ!
         useState, useEffect, handler í•¨ìˆ˜ë§Œ ì¶”ê°€!


Day 7: í†µí•© í…ŒìŠ¤íŠ¸ ë° ë²„ê·¸ ìˆ˜ì •
-----------------------------
[ ] ì „ì²´ í”Œë¡œìš° í…ŒìŠ¤íŠ¸
    1. ë°œì‹ ë²ˆí˜¸ ì„ íƒ
    2. ìˆ˜ì‹ ë²ˆí˜¸ ì…ë ¥
    3. ë©”ì‹œì§€ ì‘ì„±
    4. ì¦‰ì‹œ ë°œì†¡
    5. ì˜ˆì•½ ë°œì†¡
    6. í…œí”Œë¦¿ ì €ì¥/ë¶ˆëŸ¬ì˜¤ê¸°

[ ] ì—ëŸ¬ ì¼€ì´ìŠ¤ í…ŒìŠ¤íŠ¸
    - ì”ì•¡ ë¶€ì¡±
    - ì˜ëª»ëœ ì „í™”ë²ˆí˜¸
    - ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜
    - JWT ë§Œë£Œ

[ ] ë²„ê·¸ ìˆ˜ì • ë° ìµœì í™”


================================================================================
8. í”„ë¡ íŠ¸ì—”ë“œ ì—°ë™ (API í˜¸ì¶œë§Œ, ğŸš« UI ìˆ˜ì • ê¸ˆì§€!)
================================================================================

8.1 MessageSendTab.tsx ì—°ë™
---------------------------

```typescript
// ğŸš« ê¸°ì¡´ JSXëŠ” ì ˆëŒ€ ìˆ˜ì •í•˜ì§€ ë§ ê²ƒ!
// âœ… ë‹¤ìŒ ì½”ë“œë§Œ ì¶”ê°€:

import { useState, useEffect } from 'react';

export default function MessageSendTab() {
  // ìƒíƒœ ì¶”ê°€
  const [selectedSenderNumber, setSelectedSenderNumber] = useState(null);
  const [recipients, setRecipients] = useState([]);
  const [messageData, setMessageData] = useState({
    subject: '',
    content: '',
    isAd: false
  });
  const [loading, setLoading] = useState(false);

  // ìˆ˜ì‹ ì ì¶”ê°€ í•¸ë“¤ëŸ¬
  const handleAddRecipient = (phoneNumber: string) => {
    // ì „í™”ë²ˆí˜¸ ìœ íš¨ì„± ê²€ì‚¬
    const cleaned = phoneNumber.replace(/[^0-9]/g, '');
    if (!/^01[0-9]{8,9}$/.test(cleaned)) {
      alert('ì˜¬ë°”ë¥¸ ì „í™”ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”.');
      return;
    }

    setRecipients([...recipients, { phone_number: cleaned }]);
  };

  // ë°œì†¡ í•¸ë“¤ëŸ¬
  const handleSend = async () => {
    // ìœ íš¨ì„± ê²€ì‚¬
    if (!selectedSenderNumber) {
      alert('ë°œì‹ ë²ˆí˜¸ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.');
      return;
    }

    if (recipients.length === 0) {
      alert('ìˆ˜ì‹ ìë¥¼ ì¶”ê°€í•´ì£¼ì„¸ìš”.');
      return;
    }

    if (!messageData.content) {
      alert('ë©”ì‹œì§€ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
      return;
    }

    // ë°œì†¡ í™•ì¸
    const confirmed = confirm(
      `${recipients.length}ëª…ì—ê²Œ ë°œì†¡í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`
    );

    if (!confirmed) return;

    setLoading(true);
    try {
      const response = await fetch('/api/messages/send', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'Authorization': `Bearer ${getToken()}` // ê¸°ì¡´ ì¸ì¦ í† í° ì‚¬ìš©
        },
        body: JSON.stringify({
          recipients,
          message: messageData.content,
          subject: messageData.subject,
          sendType: 'immediate'
        })
      });

      const result = await response.json();

      if (result.success) {
        alert(`${result.successCount}ê±´ ë°œì†¡ ì™„ë£Œ!`);
        // ìˆ˜ì‹ ì ëª©ë¡ ì´ˆê¸°í™”
        setRecipients([]);
      } else {
        alert(`ë°œì†¡ ì‹¤íŒ¨: ${result.error}`);
      }
    } catch (error) {
      console.error('ë°œì†¡ ì˜¤ë¥˜:', error);
      alert('ë°œì†¡ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
    } finally {
      setLoading(false);
    }
  };

  // ğŸš« ê¸°ì¡´ return JSXëŠ” ì ˆëŒ€ ìˆ˜ì •í•˜ì§€ ë§ ê²ƒ!
  // âœ… ë²„íŠ¼ onClickì—ë§Œ í•¸ë“¤ëŸ¬ ì—°ê²°
}
```


8.2 SenderNumberSelectModal.tsx ì—°ë™
-----------------------------------

```typescript
// ğŸš« ê¸°ì¡´ JSXëŠ” ì ˆëŒ€ ìˆ˜ì •í•˜ì§€ ë§ ê²ƒ!
// âœ… ë‹¤ìŒ ì½”ë“œë§Œ ì¶”ê°€:

const [senderNumbers, setSenderNumbers] = useState([]);
const [loading, setLoading] = useState(false);

useEffect(() => {
  if (isOpen) {
    fetchSenderNumbers();
  }
}, [isOpen]);

const fetchSenderNumbers = async () => {
  setLoading(true);
  try {
    const response = await fetch('/api/sender-numbers', {
      headers: {
        'Authorization': `Bearer ${getToken()}`
      }
    });

    const { data } = await response.json();
    setSenderNumbers(data || []);
  } catch (error) {
    console.error('ë°œì‹ ë²ˆí˜¸ ì¡°íšŒ ì‹¤íŒ¨:', error);
  } finally {
    setLoading(false);
  }
};

const handleSelect = (number) => {
  onSelect(number); // ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ë¡œ ì „ë‹¬
  onClose();
};
```


8.3 SaveContentModal.tsx ì—°ë™
----------------------------------

```typescript
const handleSave = async () => {
  if (!templateName || !currentContent) {
    alert('í…œí”Œë¦¿ ì´ë¦„ê³¼ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”.');
    return;
  }

  try {
    const response = await fetch('/api/message-templates', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'Authorization': `Bearer ${getToken()}`
      },
      body: JSON.stringify({
        name: templateName,
        content: currentContent,
        category: 'ê¸°íƒ€'
      })
    });

    if (response.ok) {
      alert('ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');
      onClose();
    } else {
      const { error } = await response.json();
      alert(`ì €ì¥ ì‹¤íŒ¨: ${error}`);
    }
  } catch (error) {
    console.error('ì €ì¥ ì˜¤ë¥˜:', error);
    alert('ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
  }
};
```


================================================================================
9. í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤
================================================================================

9.1 API ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ (Postman/Thunder Client)
-------------------------------------------

âœ… POST /api/messages/send (ì¦‰ì‹œ ë°œì†¡)
ìš”ì²­:
```json
{
  "recipients": [{"phone_number": "01012345678"}],
  "message": "í…ŒìŠ¤íŠ¸ ë©”ì‹œì§€",
  "sendType": "immediate"
}
```
ì˜ˆìƒ ê²°ê³¼: 200 OK, successCount: 1

âœ… POST /api/messages/send (ì˜ˆì•½ ë°œì†¡)
ìš”ì²­:
```json
{
  "recipients": [{"phone_number": "01012345678"}],
  "message": "í…ŒìŠ¤íŠ¸ ë©”ì‹œì§€",
  "sendType": "scheduled",
  "scheduledAt": "2025-10-15T14:00:00+09:00"
}
```
ì˜ˆìƒ ê²°ê³¼: 200 OK, scheduledCount: 1

âœ… GET /api/messages/scheduled
ì˜ˆìƒ ê²°ê³¼: 200 OK, messages ë°°ì—´ ë°˜í™˜

âœ… GET /api/sender-numbers
ì˜ˆìƒ ê²°ê³¼: 200 OK, data ë°°ì—´ ë°˜í™˜

âœ… POST /api/message-templates
ìš”ì²­:
```json
{
  "name": "í…ŒìŠ¤íŠ¸ í…œí”Œë¦¿",
  "content": "ì•ˆë…•í•˜ì„¸ìš”"
}
```
ì˜ˆìƒ ê²°ê³¼: 201 Created


9.2 í†µí•© í…ŒìŠ¤íŠ¸ (UIì—ì„œ)
-----------------------
ğŸš« ì£¼ì˜: UI ìˆ˜ì • ì—†ì´ ê¸°ëŠ¥ë§Œ í…ŒìŠ¤íŠ¸!

1. ë°œì‹ ë²ˆí˜¸ ì„ íƒ
   [ ] ë°œì‹ ë²ˆí˜¸ ëª©ë¡ì´ í‘œì‹œë˜ëŠ”ê°€?
   [ ] ì„ íƒ ì‹œ ìƒíƒœê°€ ì—…ë°ì´íŠ¸ë˜ëŠ”ê°€?

2. ìˆ˜ì‹ ë²ˆí˜¸ ì¶”ê°€
   [ ] ì „í™”ë²ˆí˜¸ ì…ë ¥ í›„ ì¶”ê°€ ë²„íŠ¼ í´ë¦­
   [ ] ëª©ë¡ì— ì¶”ê°€ë˜ëŠ”ê°€?
   [ ] ì˜ëª»ëœ ë²ˆí˜¸ ì…ë ¥ ì‹œ ì—ëŸ¬ ë©”ì‹œì§€?

3. ë©”ì‹œì§€ ì‘ì„±
   [ ] ë‚´ìš© ì…ë ¥ ì‹œ ìƒíƒœ ì—…ë°ì´íŠ¸?
   [ ] ê¸€ì ìˆ˜ ì¹´ìš´íŠ¸ ë™ì‘?

4. ì¦‰ì‹œ ë°œì†¡
   [ ] ë°œì†¡ ë²„íŠ¼ í´ë¦­
   [ ] í™•ì¸ ë‹¤ì´ì–¼ë¡œê·¸ í‘œì‹œ?
   [ ] ë°œì†¡ ì™„ë£Œ ë©”ì‹œì§€?
   [ ] ì”ì•¡ ì°¨ê° í™•ì¸?

5. í…œí”Œë¦¿ ì €ì¥
   [ ] ì €ì¥ ëª¨ë‹¬ ì—´ë¦¼?
   [ ] í…œí”Œë¦¿ ì´ë¦„ ì…ë ¥ í›„ ì €ì¥?
   [ ] ì €ì¥ ì™„ë£Œ ë©”ì‹œì§€?

6. í…œí”Œë¦¿ ë¶ˆëŸ¬ì˜¤ê¸°
   [ ] ë¶ˆëŸ¬ì˜¤ê¸° ëª¨ë‹¬ ì—´ë¦¼?
   [ ] í…œí”Œë¦¿ ëª©ë¡ í‘œì‹œ?
   [ ] ì„ íƒ ì‹œ ë‚´ìš© ë³µì›?


9.3 ì—ëŸ¬ ì¼€ì´ìŠ¤ í…ŒìŠ¤íŠ¸
---------------------
[ ] ì”ì•¡ ë¶€ì¡± ì‹œ ë°œì†¡ ì°¨ë‹¨
[ ] ì˜ëª»ëœ ì „í™”ë²ˆí˜¸ ì…ë ¥ ì‹œ ì—ëŸ¬
[ ] JWT í† í° ë§Œë£Œ ì‹œ 401 ì—ëŸ¬
[ ] ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ ì²˜ë¦¬
[ ] ì˜ˆì•½ ì‹œê°„ì´ ê³¼ê±°ì¸ ê²½ìš° ì—ëŸ¬


================================================================================
10. ë³´ì•ˆ ë° ì—ëŸ¬ ì²˜ë¦¬
================================================================================

10.1 ë³´ì•ˆ
--------
âœ… JWT í† í° ê²€ì¦ (ëª¨ë“  API)
âœ… ì‚¬ìš©ìë³„ ë°ì´í„° ê²©ë¦¬ (user_id í•„í„°)
âœ… ì „í™”ë²ˆí˜¸ í˜•ì‹ ê²€ì¦
âœ… SQL Injection ë°©ì§€ (Parameterized Query)
âœ… Rate Limiting (ì¶”í›„ ì¶”ê°€)

10.2 ì—ëŸ¬ ì²˜ë¦¬
------------
í´ë¼ì´ì–¸íŠ¸:
```typescript
try {
  const response = await fetch('/api/messages/send', {...});
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.error);
  }
  const data = await response.json();
  // ì„±ê³µ ì²˜ë¦¬
} catch (error) {
  console.error(error);
  alert(error.message || 'ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
}
```

ì„œë²„:
- 200: ì„±ê³µ
- 400: ì˜ëª»ëœ ìš”ì²­
- 401: ì¸ì¦ ì‹¤íŒ¨
- 403: ê¶Œí•œ ì—†ìŒ
- 500: ì„œë²„ ì˜¤ë¥˜


================================================================================
11. ìµœì¢… í™•ì¸ ì‚¬í•­
================================================================================

êµ¬í˜„ ì‹œì‘ ì „ ì²´í¬:
------------------
[ ] ì´ ê³„íšì„œë¥¼ ì²˜ìŒë¶€í„° ëê¹Œì§€ ì½ì—ˆëŠ”ê°€?
[ ] UI ìˆ˜ì • ê¸ˆì§€ ì›ì¹™ì„ ì´í•´í–ˆëŠ”ê°€?
[ ] ê¸°ì¡´ ë¦¬ì†ŒìŠ¤ (API, ë¼ì´ë¸ŒëŸ¬ë¦¬)ë¥¼ íŒŒì•…í–ˆëŠ”ê°€?
[ ] ê³µí†µ ë¡œì§ ì¶”ì¶œ ì „ëµì„ ì´í•´í–ˆëŠ”ê°€?
[ ] 7ì¼ êµ¬í˜„ ì¼ì •ì„ í™•ì¸í–ˆëŠ”ê°€?

êµ¬í˜„ ì¤‘ ì²´í¬:
------------
[ ] ğŸš« UI íŒŒì¼(JSX)ì„ ìˆ˜ì •í•˜ê³  ìˆì§€ ì•Šì€ê°€?
[ ] âœ… API ì—”ë“œí¬ì¸íŠ¸ë§Œ ìƒì„±í•˜ê³  ìˆëŠ”ê°€?
[ ] âœ… ê¸°ì¡´ ìœ í‹¸ë¦¬í‹°ë¥¼ ì¬ì‚¬ìš©í•˜ê³  ìˆëŠ”ê°€?
[ ] âœ… í…ŒìŠ¤íŠ¸ë¥¼ ë³‘í–‰í•˜ê³  ìˆëŠ”ê°€?

êµ¬í˜„ ì™„ë£Œ í›„ ì²´í¬:
----------------
[ ] ëª¨ë“  APIê°€ ì •ìƒ ë™ì‘í•˜ëŠ”ê°€?
[ ] í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ë°œì†¡ì´ ê°€ëŠ¥í•œê°€?
[ ] ì”ì•¡ ì°¨ê°ì´ ì •ìƒ ë™ì‘í•˜ëŠ”ê°€?
[ ] ì˜ˆì•½ ë°œì†¡ì´ ì •ìƒ ë™ì‘í•˜ëŠ”ê°€?
[ ] ì—ëŸ¬ ì¼€ì´ìŠ¤ê°€ ì ì ˆíˆ ì²˜ë¦¬ë˜ëŠ”ê°€?
[ ] ğŸš« UIê°€ ë³€ê²½ë˜ì§€ ì•Šì•˜ëŠ”ê°€?


================================================================================
12. ì°¸ê³  ì‚¬í•­
================================================================================

12.1 ë©”ì‹œì§€ íƒ€ì…ë³„ ë‹¨ê°€
---------------------
- SMS (90ë°”ì´íŠ¸ ì´í•˜): 20ì›
- LMS (91ë°”ì´íŠ¸ ì´ìƒ): 50ì›
- MMS (ì´ë¯¸ì§€ í¬í•¨): 200ì› (ì¶”í›„ êµ¬í˜„)

12.2 ì¹˜í™˜ë¬¸êµ¬ í˜•ì‹
----------------
- SMS: #[ë³€ìˆ˜ëª…] í˜•ì‹
- ì˜ˆì‹œ: "ì•ˆë…•í•˜ì„¸ìš” #[ì´ë¦„]ë‹˜, #[ì‹œê°„]ì— ë°©ë¬¸ ì˜ˆì•½ë˜ì—ˆìŠµë‹ˆë‹¤."

12.3 ì „í™”ë²ˆí˜¸ í˜•ì‹
----------------
- í˜•ì‹: 01012345678 (í•˜ì´í”ˆ ì œê±°)
- ì •ê·œì‹: /^01[0-9]{8,9}$/

12.4 ê°œë°œ í™˜ê²½
-------------
- Node.js: v18+
- Next.js: 15.3.2
- TypeScript: 5+
- Supabase: PostgreSQL


================================================================================
ë¬¸ì„œ ë
================================================================================

ğŸ“Œ ë§ˆì§€ë§‰ ì²´í¬:
[ ] UI ìˆ˜ì • ê¸ˆì§€ ì›ì¹™ì„ ìˆ™ì§€í–ˆìŠµë‹ˆê¹Œ? â†’ YES
[ ] êµ¬í˜„ ê³„íšì„ ì´í•´í–ˆìŠµë‹ˆê¹Œ? â†’ YES
[ ] 7ì¼ ì¼ì •ì„ í™•ì¸í–ˆìŠµë‹ˆê¹Œ? â†’ YES

âœ… ëª¨ë‘ YESë¼ë©´ êµ¬í˜„ì„ ì‹œì‘í•˜ì„¸ìš”!
ğŸš« UIëŠ” ì ˆëŒ€ ê±´ë“œë¦¬ì§€ ë§ê³  APIë§Œ êµ¬í˜„í•˜ì„¸ìš”!

================================================================================
