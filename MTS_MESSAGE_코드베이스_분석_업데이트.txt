# MTS Message í”„ë¡œì íŠ¸ ì½”ë“œë² ì´ìŠ¤ ë¶„ì„ (ì—…ë°ì´íŠ¸)

## 1. í”„ë¡œì íŠ¸ ê°œìš”

### 1.1 ê¸°ìˆ  ìŠ¤íƒ
- **í”„ë ˆì„ì›Œí¬**: Next.js 15.3.2 (App Router)
- **ì–¸ì–´**: TypeScript 5
- **ë°ì´í„°ë² ì´ìŠ¤**: Supabase (PostgreSQL)
- **ì¸ì¦**: JWT ê¸°ë°˜ ì»¤ìŠ¤í…€ ì¸ì¦ (Supabase Auth ë¯¸ì‚¬ìš©)
- **ìŠ¤íƒ€ì¼ë§**: Tailwind CSS 4, CSS Modules
- **AI í†µí•©**: OpenAI API (GPT-4, DALL-E 3)
- **SMS/MMS**: Naver SENS API
- **ê²°ì œ**: NicePay (KGì´ë‹ˆì‹œìŠ¤)
- **íŒŒì¼ ì²˜ë¦¬**: Sharp (ì´ë¯¸ì§€), xlsx (ì—‘ì…€), html2canvas
- **ì°¨íŠ¸**: Chart.js, react-chartjs-2
- **ê¸°íƒ€**: bcryptjs, jsonwebtoken, nodemailer, uuid, crypto-js

### 1.2 ì•„í‚¤í…ì²˜ êµ¬ì¡°
```
í´ë¼ì´ì–¸íŠ¸ (React/Next.js)
    â†“ (API í˜¸ì¶œ, JWT í† í°)
API Routes (Next.js API)
    â†“ (Service Role Key)
Supabase (PostgreSQL + Storage)
    â†“
ì™¸ë¶€ ì„œë¹„ìŠ¤ (Naver SENS, OpenAI, NicePay, ê³µê³µë°ì´í„° API)
```

**í•µì‹¬ ì•„í‚¤í…ì²˜ ì›ì¹™**:
- í´ë¼ì´ì–¸íŠ¸ì—ì„œëŠ” Supabase ì§ì ‘ ì ‘ê·¼ ë¶ˆê°€
- ëª¨ë“  ë°ì´í„° ì‘ì—…ì€ API Routesë¥¼ í†µí•´ì„œë§Œ ìˆ˜í–‰
- Service Role KeyëŠ” ì„œë²„ ì‚¬ì´ë“œì—ì„œë§Œ ì‚¬ìš©
- JWT í† í° ê¸°ë°˜ ì¸ì¦ (ì•¡ì„¸ìŠ¤ í† í°: 1ì‹œê°„, ë¦¬í”„ë ˆì‹œ í† í°: 7ì¼)
- í´ë§ ê¸°ë°˜ ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ (Supabase Realtime ë¯¸ì‚¬ìš©)

### 1.3 í”„ë¡œì íŠ¸ í†µê³„
- **ì´ TypeScript íŒŒì¼**: 333ê°œ
- **API ì—”ë“œí¬ì¸íŠ¸**: 157ê°œ
- **í˜ì´ì§€**: 60ê°œ
- **ì»¨í…ìŠ¤íŠ¸**: 4ê°œ (Auth, Balance, Notification, Pricing)

## 2. ë””ë ‰í† ë¦¬ êµ¬ì¡°

### 2.1 /src/app/ (í˜ì´ì§€ ë° API)

#### ì£¼ìš” í˜ì´ì§€ ê·¸ë£¹:

**ë£¨íŠ¸ í˜ì´ì§€**:
- `/` (page.tsx): ëœë”© í˜ì´ì§€ ë° ì˜ì—…ì‚¬ì› ëŒ€ì‹œë³´ë“œ
- `/login` (page.tsx): ë¡œê·¸ì¸ í˜ì´ì§€
- `/signup` (page.tsx): íšŒì›ê°€ì… í˜ì´ì§€

**ê´€ë¦¬ì í˜ì´ì§€** (`/admin/`):
- `campaigns/`: ìº í˜ì¸ ê´€ë¦¬ ë° ìŠ¹ì¸
- `campaign-industries/`: ìº í˜ì¸ ì—…ì¢… ê´€ë¦¬
- `campaign-settings/`: ìº í˜ì¸ ì„¤ì •
- `user-management/`: íšŒì› ê´€ë¦¬
- `member-approval/`: íšŒì› ìŠ¹ì¸ ê´€ë¦¬
- `point-charge-management/`: í¬ì¸íŠ¸ ì¶©ì „ ê´€ë¦¬
- `tax-invoices/`: ì„¸ê¸ˆê³„ì‚°ì„œ ê´€ë¦¬
- `customer-support/`: ê³ ê°ì§€ì› (ë¬¸ì˜, FAQ ê´€ë¦¬)
- `statistics/`: í†µê³„ ëŒ€ì‹œë³´ë“œ
  - components/: CampaignStatistics, MemberStatistics, MemberLoginStatistics, MemberSignupStatistics
- `system-settings/`: ì‹œìŠ¤í…œ ì„¤ì •

**ì¸ì¦ í˜ì´ì§€** (`/auth/`):
- `find-username/`: ì•„ì´ë”” ì°¾ê¸°
- `find-password/`: ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸°
- `inicis/callback/`: ë³¸ì¸ì¸ì¦ ì½œë°±
- `inicis/success/`: ë³¸ì¸ì¸ì¦ ì„±ê³µ

**ê´‘ê³ ì£¼ ë§ˆì´í˜ì´ì§€** (`/my-site/advertiser/`):
- `dashboard/`: ê´‘ê³ ì£¼ ëŒ€ì‹œë³´ë“œ
- `profile/`: í”„ë¡œí•„ ê´€ë¦¬
- `business-verification/`: ì‚¬ì—…ì ì¸ì¦

**ì˜ì—…ì‚¬ì› í˜ì´ì§€** (`/salesperson/`):
- `invite/`: ì¶”ì²œì¸ ì´ˆëŒ€
- `referrals/`: ì¶”ì²œ ê´€ë¦¬
- `organization/`: ì¡°ì§ ê´€ë¦¬
- `profile/`: í”„ë¡œí•„ ê´€ë¦¬

**ë©”ì‹œì§€ ë°œì†¡** (`/messages/`):
- `send/`: SMS/MMS ë°œì†¡ í˜ì´ì§€

**íƒ€ê²Ÿ ë§ˆì¼€íŒ…** (`/target-marketing/`):
- AI ê¸°ë°˜ íƒ€ê²Ÿ ë§ˆì¼€íŒ… ìº í˜ì¸ ìƒì„±

**ì˜ˆì•½ ì‹œìŠ¤í…œ** (`/reservations/`):
- `calendar/`: ì˜ˆì•½ ìº˜ë¦°ë”
  - `shared/`: ê³µìœ  ìº˜ë¦°ë” ê´€ë¦¬
    - `create/`: ê³µìœ  ìº˜ë¦°ë” ìƒì„±
- `places/`: ê³µê°„ ê´€ë¦¬
  - `add/`: ê³µê°„ ì¶”ê°€
  - `edit/`: ê³µê°„ ìˆ˜ì •
  - `detail/`: ê³µê°„ ìƒì„¸
- `list/`: ì˜ˆì•½ ëª©ë¡
- `create/`: ì˜ˆì•½ ìƒì„±
  - `price/`: ê°€ê²© ì„¤ì •
- `edit/`: ì˜ˆì•½ ìˆ˜ì •
- `detail/`: ì˜ˆì•½ ìƒì„¸
  - `price/`: ê°€ê²© ìƒì„¸
- `message/`: ì˜ˆì•½ ìë™ ë©”ì‹œì§€
  - `auto/`: ìë™ ë©”ì‹œì§€ ê´€ë¦¬
    - `create/`: ìë™ ë©”ì‹œì§€ ìƒì„±
    - `edit/[id]/`: ìë™ ë©”ì‹œì§€ ìˆ˜ì •
  - `list/`: ë©”ì‹œì§€ ëª©ë¡
    - `reserved/`: ì˜ˆì•½ëœ ë©”ì‹œì§€
  - `send/`: ë©”ì‹œì§€ ë°œì†¡
  - `sender-contact/`: ë°œì‹ ì ì—°ë½ì²˜
  - `templates/`: ë©”ì‹œì§€ í…œí”Œë¦¿
- `payments/`: ì˜ˆì•½ ê²°ì œ ê´€ë¦¬
  - `list/`: ê²°ì œ ëª©ë¡
- `statistics/`: ì˜ˆì•½ í†µê³„

**í¬ì¸íŠ¸ ê´€ë¦¬** (`/credit-management/`):
- í¬ì¸íŠ¸ ì¶©ì „ ë° ê±°ë˜ ë‚´ì—­

**ê²°ì œ** (`/payment/`):
- `success/`: ê²°ì œ ì„±ê³µ
- `fail/`: ê²°ì œ ì‹¤íŒ¨
- `close/`: ê²°ì œ ë‹«ê¸°

**ê³ ê°ì§€ì›** (`/support/`):
- ê³µì§€ì‚¬í•­, FAQ, 1:1 ë¬¸ì˜

**ê³µìœ  ìº˜ë¦°ë”** (`/shared/calendar/[token]/`):
- í† í° ê¸°ë°˜ ê³µìœ  ìº˜ë¦°ë” ì ‘ê·¼

**ê¸°íƒ€**:
- `/terms`: ì´ìš©ì•½ê´€
- `/privacy`: ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨

#### API Routes (157ê°œ ì—”ë“œí¬ì¸íŠ¸):

**ì¸ì¦ ê´€ë ¨** (`/api/auth/`):
- `check-email`: ì´ë©”ì¼ ì¤‘ë³µ í™•ì¸
- `check-username`: ì•„ì´ë”” ì¤‘ë³µ í™•ì¸
- `send-verification`: ì´ë©”ì¼ ì¸ì¦ ë°œì†¡
- `find-username`: ì•„ì´ë”” ì°¾ê¸°
- `find-password`: ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸°
- **Google ì†Œì…œ ë¡œê·¸ì¸**:
  - `google-auth-url`: ì¸ì¦ URL ìƒì„±
  - `google-token`: í† í° êµí™˜
  - `google-login`: ë¡œê·¸ì¸
  - `google-signup`: íšŒì›ê°€ì…
- **Kakao ì†Œì…œ ë¡œê·¸ì¸**:
  - `kakao-auth-url`: ì¸ì¦ URL ìƒì„±
  - `kakao-token`: í† í° êµí™˜
  - `kakao-login`: ë¡œê·¸ì¸
  - `kakao-signup`: íšŒì›ê°€ì…
- **Naver ì†Œì…œ ë¡œê·¸ì¸**:
  - `naver-auth-url`: ì¸ì¦ URL ìƒì„±
  - `naver-token`: í† í° êµí™˜
  - `naver-login`: ë¡œê·¸ì¸
  - `naver-signup`: íšŒì›ê°€ì…
- **KGì´ë‹ˆì‹œìŠ¤ ë³¸ì¸ì¸ì¦**:
  - `inicis-auth/request`: ë³¸ì¸ì¸ì¦ ìš”ì²­
  - `inicis-auth/callback`: ë³¸ì¸ì¸ì¦ ì½œë°±
  - `inicis-auth/result`: ë³¸ì¸ì¸ì¦ ê²°ê³¼
- `validate-referral`: ì¶”ì²œì¸ ì½”ë“œ ê²€ì¦
- `validate-referrer`: ì¶”ì²œì¸ ê²€ì¦

**ì‚¬ìš©ì ê´€ë¦¬** (`/api/users/`):
- `login`: ë¡œê·¸ì¸
- `signup`: íšŒì›ê°€ì…
- `signup-with-files`: íŒŒì¼ í¬í•¨ íšŒì›ê°€ì…
- `refresh`: í† í° ê°±ì‹ 
- `me`: ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ/ìˆ˜ì •
- `change-password`: ë¹„ë°€ë²ˆí˜¸ ë³€ê²½
- `withdraw`: íšŒì› íƒˆí‡´
- `update-referral-views`: ì¶”ì²œì¸ ì¡°íšŒìˆ˜ ì—…ë°ì´íŠ¸
- `generate-code`: ì¶”ì²œì¸ ì½”ë“œ ìƒì„±
- `referral-chain`: ì¶”ì²œì¸ ì²´ì¸ ì¡°íšŒ
- `referral-stats`: ì¶”ì²œ í†µê³„
- `social-link`: ì†Œì…œ ê³„ì • ì—°ë™
- `upload-documents`: ë¬¸ì„œ ì—…ë¡œë“œ

**í”„ë¡œí•„ ê´€ë¦¬** (`/api/user/`):
- `profile`: í”„ë¡œí•„ ì¡°íšŒ/ìˆ˜ì •

**ë©”ì‹œì§€ ë°œì†¡** (`/api/messages/`, `/api/message/`):
- `send`: ì¦‰ì‹œ/ì˜ˆì•½ ë°œì†¡
- `scheduled`: ì˜ˆì•½ ë©”ì‹œì§€ ì¡°íšŒ
- `scheduled-send-check`: ì˜ˆì•½ ë°œì†¡ ì²´í¬ (Cron)
- `upload-image`: ì´ë¯¸ì§€ ì—…ë¡œë“œ
- **í…œí”Œë¦¿ ê´€ë¦¬** (`templates/`):
  - GET/POST: í…œí”Œë¦¿ ëª©ë¡/ìƒì„±
  - `[id]`: í…œí”Œë¦¿ ìƒì„¸/ìˆ˜ì •/ì‚­ì œ
- **ë ˆê±°ì‹œ API** (`/api/message/`):
  - `send`: ë©”ì‹œì§€ ë°œì†¡
  - `upload-file`: íŒŒì¼ ì—…ë¡œë“œ

**ë©”ì‹œì§€ ë¡œê·¸** (`/api/message-logs/`):
- ë©”ì‹œì§€ ë°œì†¡ ë¡œê·¸ ì¡°íšŒ

**SMS í…œí”Œë¦¿** (`/api/sms-templates/`):
- SMS í…œí”Œë¦¿ ê´€ë¦¬

**ì¼ë°˜ í…œí”Œë¦¿** (`/api/templates/`):
- GET/POST: í…œí”Œë¦¿ ëª©ë¡/ìƒì„±
- `[id]`: í…œí”Œë¦¿ ìƒì„¸/ìˆ˜ì •/ì‚­ì œ
- `upload-image`: ì´ë¯¸ì§€ ì—…ë¡œë“œ

**ìº í˜ì¸ ê´€ë¦¬** (`/api/campaigns/`):
- GET/POST: ìº í˜ì¸ ëª©ë¡ ì¡°íšŒ/ìƒì„±
- `[id]`: ìƒì„¸ ì¡°íšŒ/ìˆ˜ì •/ì‚­ì œ
- `[id]/rejection`: ê±°ì ˆ ì‚¬ìœ  ì¡°íšŒ
- `ad-costs`: ê´‘ê³ ë¹„ ê³„ì‚°

**ìº í˜ì¸ ì—…ì¢…** (`/api/campaign-industries/`):
- ìº í˜ì¸ ì—…ì¢… ì¡°íšŒ

**ì—…ì¢… ê´€ë¦¬** (`/api/industries/`, `/api/nts-industries/`):
- `industries`: ì—…ì¢… ëª©ë¡ ì¡°íšŒ
- `nts-industries`: êµ­ì„¸ì²­ ì—…ì¢… ëª©ë¡ ì¡°íšŒ

**ê´€ë¦¬ì ê¸°ëŠ¥** (`/api/admin/`):

1. **ìº í˜ì¸ ê´€ë¦¬** (`campaigns/`):
   - GET: ì „ì²´ ìº í˜ì¸ ì¡°íšŒ
   - `[id]`: ìº í˜ì¸ ìƒì„¸
   - `[id]/approve`: ìº í˜ì¸ ìŠ¹ì¸
   - `[id]/reject`: ìº í˜ì¸ ê±°ë¶€
   - `[id]/start`: ìº í˜ì¸ ì‹œì‘
   - `[id]/pause`: ìº í˜ì¸ ì¼ì‹œì •ì§€

2. **ìº í˜ì¸ ì—…ì¢… ê´€ë¦¬** (`campaign-industries/`):
   - GET/POST: ì—…ì¢… ëª©ë¡/ìƒì„±
   - `[id]`: ì—…ì¢… ìƒì„¸/ìˆ˜ì •/ì‚­ì œ

3. **ì»¤ìŠ¤í…€ ì—…ì¢…** (`custom-industries/`):
   - ì»¤ìŠ¤í…€ ì—…ì¢… ê´€ë¦¬

4. **ì‚¬ìš©ì ê´€ë¦¬** (`users/`):
   - GET: ì‚¬ìš©ì ëª©ë¡
   - `bulk`: ì¼ê´„ ì‘ì—…
   - `charge`: í¬ì¸íŠ¸ ì¶©ì „
   - `reset-password`: ë¹„ë°€ë²ˆí˜¸ ì´ˆê¸°í™”
   - `export`: ì—‘ì…€ ë‚´ë³´ë‚´ê¸°

5. **í¬ì¸íŠ¸ ê´€ë¦¬** (`point-charge/`):
   - GET/POST: ì¶©ì „ ë‚´ì—­ ì¡°íšŒ/ìŠ¹ì¸
   - `bulk`: ì¼ê´„ ì¶©ì „

6. **í¬ì¸íŠ¸ í˜„í™©** (`point-status/`):
   - í¬ì¸íŠ¸ í˜„í™© ì¡°íšŒ

7. **ì„¸ê¸ˆê³„ì‚°ì„œ** (`tax-invoices/`):
   - GET/POST: ì„¸ê¸ˆê³„ì‚°ì„œ ëª©ë¡/ë°œí–‰
   - `[id]`: ì„¸ê¸ˆê³„ì‚°ì„œ ìƒì„¸
   - `template`: í…œí”Œë¦¿ ì¡°íšŒ
   - `upload`: íŒŒì¼ ì—…ë¡œë“œ
   - `export`: ì—‘ì…€ ë‚´ë³´ë‚´ê¸°

8. **ë¬¸ì˜ ê´€ë¦¬** (`inquiries/`):
   - GET: ë¬¸ì˜ ëª©ë¡
   - `[id]`: ë¬¸ì˜ ìƒì„¸/ë‹µë³€

9. **ì•½ê´€ ê´€ë¦¬** (`terms/`):
   - GET/POST: ì•½ê´€ ëª©ë¡/ì €ì¥
   - `versions`: ì•½ê´€ ë²„ì „ ì¡°íšŒ

10. **ì‹œìŠ¤í…œ ì„¤ì •** (`system-settings/`):
    - GET/PUT: ì‹œìŠ¤í…œ ì„¤ì • ì¡°íšŒ/ì €ì¥

11. **ë“±ê¸‰ ê´€ë¦¬**:
    - `grade-settings`: ë“±ê¸‰ ì„¤ì •
    - `grade-history`: ë“±ê¸‰ ì´ë ¥

12. **ê¸°íƒ€**:
    - `companies`: ì‚¬ì—…ì ì •ë³´ ì¡°íšŒ
    - `send-approval-notification`: ìŠ¹ì¸ ì•Œë¦¼ ë°œì†¡

**íŠ¸ëœì­ì…˜** (`/api/transactions/`):
- GET: ê±°ë˜ ë‚´ì—­ ì¡°íšŒ
- POST: íŠ¸ëœì­ì…˜ ìƒì„±

**ê²°ì œ** (`/api/payment/`):
- `confirm`: ê²°ì œ í™•ì¸
- **NicePay** (`nicepay/`):
  - `request`: ê²°ì œ ìš”ì²­
  - `approve`: ê²°ì œ ìŠ¹ì¸
  - `return`: ê²°ì œ ë°˜í™˜

**ê°€ê²© ì„¤ì •** (`/api/pricing-settings/`):
- ê°€ê²© ì„¤ì • ì¡°íšŒ/ìˆ˜ì •

**ì‚¬ì´íŠ¸ ì„¤ì •** (`/api/site-settings/`):
- ì‚¬ì´íŠ¸ ì„¤ì • ì¡°íšŒ/ìˆ˜ì •

**AI ê¸°ëŠ¥** (`/api/ai/`):
- `chat`: OpenAI ì±„íŒ…
- `send-mms`: AI MMS ìƒì„±

**ì˜ˆì•½ ì‹œìŠ¤í…œ** (`/api/reservations/`):

1. **ê³µê°„ ê´€ë¦¬** (`spaces/`):
   - GET/POST: ê³µê°„ ëª©ë¡/ìƒì„±
   - `[id]`: ê³µê°„ ìƒì„¸/ìˆ˜ì •/ì‚­ì œ

2. **ì˜ˆì•½ ê´€ë¦¬** (`bookings/`):
   - GET/POST: ì˜ˆì•½ ëª©ë¡/ìƒì„±
   - `[id]`: ì˜ˆì•½ ìƒì„¸/ìˆ˜ì •/ì‚­ì œ

3. **ìë™ ë©”ì‹œì§€ ê·œì¹™** (`auto-rules/`):
   - GET/POST: ê·œì¹™ ëª©ë¡/ìƒì„±
   - `[id]`: ê·œì¹™ ìƒì„¸/ìˆ˜ì •/ì‚­ì œ

4. **ë©”ì‹œì§€ í…œí”Œë¦¿** (`message-templates/`):
   - GET/POST: í…œí”Œë¦¿ ëª©ë¡/ìƒì„±
   - `[id]`: í…œí”Œë¦¿ ìƒì„¸/ìˆ˜ì •/ì‚­ì œ

5. **ë©”ì‹œì§€ ë¡œê·¸** (`message-logs/`):
   - GET: ë©”ì‹œì§€ ë¡œê·¸ ì¡°íšŒ
   - `[id]`: ë¡œê·¸ ìƒì„¸

6. **ì˜ˆì•½ëœ ë©”ì‹œì§€** (`scheduled-messages/`):
   - ì˜ˆì•½ëœ ë©”ì‹œì§€ ì¡°íšŒ

7. **ë©”ì‹œì§€ ë°œì†¡** (`send-message/`):
   - ì˜ˆì•½ ê´€ë ¨ ë©”ì‹œì§€ ë°œì†¡

8. **ê³µìœ  ìº˜ë¦°ë”** (`shared-calendars/`):
   - GET/POST: ê³µìœ  ìº˜ë¦°ë” ëª©ë¡/ìƒì„±
   - `[id]`: ê³µìœ  ìº˜ë¦°ë” ìƒì„¸/ìˆ˜ì •/ì‚­ì œ

9. **í†µê³„** (`statistics/`):
   - ì˜ˆì•½ í†µê³„ ì¡°íšŒ

10. **ë°ì´í„° ë‚´ë³´ë‚´ê¸°**:
    - `export/csv`: CSV ë‚´ë³´ë‚´ê¸°
    - `export/excel`: Excel ë‚´ë³´ë‚´ê¸°

11. **ìë™ ë°œì†¡ ì²´í¬** (`auto-send-check/`):
    - ìë™ ë©”ì‹œì§€ ë°œì†¡ ì²´í¬ (Cron)

12. **ê¸°íƒ€**:
    - `[id]`: ì˜ˆì•½ ìƒì„¸ ì¡°íšŒ

**ë°œì‹ ë²ˆí˜¸ ê´€ë¦¬** (`/api/sender-numbers/`):
- GET/POST: ë°œì‹ ë²ˆí˜¸ ëª©ë¡/ë“±ë¡
- `[id]`: ë°œì‹ ë²ˆí˜¸ ìƒì„¸/ìˆ˜ì •/ì‚­ì œ
- `[id]/set-default`: ê¸°ë³¸ ë°œì‹ ë²ˆí˜¸ ì„¤ì •

**ì£¼ì†Œë¡** (`/api/address-book/`):
- **ê·¸ë£¹** (`groups/`):
  - GET/POST: ê·¸ë£¹ ëª©ë¡/ìƒì„±
  - `[id]`: ê·¸ë£¹ ìƒì„¸/ìˆ˜ì •/ì‚­ì œ
- **ì—°ë½ì²˜** (`contacts/`):
  - GET/POST: ì—°ë½ì²˜ ëª©ë¡/ì¶”ê°€

**ì•Œë¦¼** (`/api/notifications/`):
- GET: ì•Œë¦¼ ëª©ë¡
- POST: ì•Œë¦¼ ë°œì†¡
- `[id]/read`: ì•Œë¦¼ ì½ìŒ ì²˜ë¦¬
- `mark-all-read`: ì „ì²´ ì½ìŒ ì²˜ë¦¬

**ê³µì§€ì‚¬í•­** (`/api/announcements/`):
- GET/POST: ê³µì§€ì‚¬í•­ ëª©ë¡/ìƒì„±
- `[id]`: ê³µì§€ì‚¬í•­ ìƒì„¸/ìˆ˜ì •

**FAQ** (`/api/faqs/`):
- GET/POST: FAQ ëª©ë¡/ìƒì„±
- `[id]`: FAQ ìƒì„¸/ìˆ˜ì •/ì‚­ì œ
- `max-order`: ìµœëŒ€ ìˆœì„œ ì¡°íšŒ

**ë¬¸ì˜** (`/api/inquiries/`):
- GET/POST: ë¬¸ì˜ ëª©ë¡/ìƒì„±
- `[id]`: ë¬¸ì˜ ìƒì„¸
- `[id]/reply`: ë¬¸ì˜ ë‹µë³€

**ì•½ê´€** (`/api/terms/`):
- ì•½ê´€ ì¡°íšŒ

**ì§€ì—­ ë°ì´í„°** (`/api/locations/`):
- `cities`: ì‹œ ëª©ë¡
- `districts`: êµ¬ ëª©ë¡
- `dongs`: ë™ ëª©ë¡

**ì¶”ì²œì¸ ì‹œìŠ¤í…œ**:
- `/api/referrals/dashboard`: ì¶”ì²œì¸ ëŒ€ì‹œë³´ë“œ
- `/api/rewards`: ë¦¬ì›Œë“œ ì¡°íšŒ
- `/api/settlements`: ì •ì‚° ë‚´ì—­

**ì‚¬ì—…ì ì¸ì¦** (`/api/business-verification/`):
- `verify-business-number`: ì‚¬ì—…ìë²ˆí˜¸ ê²€ì¦
- `submit`: ì‚¬ì—…ì ì¸ì¦ ì œì¶œ

**ì„¸ê¸ˆê³„ì‚°ì„œ** (`/api/tax-invoices/`):
- GET/POST: ì„¸ê¸ˆê³„ì‚°ì„œ ëª©ë¡/ìƒì„±
- `excel`: ì—‘ì…€ ë‚´ë³´ë‚´ê¸°

**íŒŒì¼ ì—…ë¡œë“œ** (`/api/upload/`):
- `inquiry`: ë¬¸ì˜ íŒŒì¼ ì—…ë¡œë“œ

**ê³µìœ  ìº˜ë¦°ë”** (`/api/shared/calendar/[token]/`):
- í† í° ê¸°ë°˜ ê³µìœ  ìº˜ë¦°ë” ì¡°íšŒ

**Cron ì‘ì—…** (`/api/cron/`):
- `send-scheduled-messages`: ì˜ˆì•½ ë©”ì‹œì§€ ìë™ ë°œì†¡

### 2.2 /src/components/ (ì»´í¬ë„ŒíŠ¸)

```
components/
â”œâ”€â”€ admin/                    # ê´€ë¦¬ì ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ AdminHeader.tsx       # ê´€ë¦¬ì í—¤ë”
â”‚   â””â”€â”€ AdminSidebar.tsx      # ê´€ë¦¬ì ì‚¬ì´ë“œë°”
â”œâ”€â”€ approval/                 # ìŠ¹ì¸ ê´€ë ¨ ì»´í¬ë„ŒíŠ¸
â”œâ”€â”€ campaigns/                # ìº í˜ì¸ ì»´í¬ë„ŒíŠ¸
â”œâ”€â”€ common/                   # ê³µí†µ ì»´í¬ë„ŒíŠ¸
â”œâ”€â”€ credit/                   # í¬ë ˆë”§ ê´€ë ¨ ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ CreditHistory.tsx     # í¬ë ˆë”§ ì´ë ¥
â”‚   â””â”€â”€ PaymentNoticeModal.tsx # ê²°ì œ ì•ˆë‚´ ëª¨ë‹¬
â”œâ”€â”€ history/                  # ì´ë ¥ ê´€ë ¨ ì»´í¬ë„ŒíŠ¸
â”œâ”€â”€ messages/                 # ë©”ì‹œì§€ ì»´í¬ë„ŒíŠ¸
â”œâ”€â”€ modals/                   # ëª¨ë‹¬ ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ SaveTemplateModal.tsx # í…œí”Œë¦¿ ì €ì¥ ëª¨ë‹¬
â”‚   â”œâ”€â”€ RejectionReasonModal.tsx # ê±°ì ˆ ì‚¬ìœ  ëª¨ë‹¬
â”‚   â”œâ”€â”€ DateRangeModal.tsx    # ë‚ ì§œ ë²”ìœ„ ëª¨ë‹¬
â”‚   â””â”€â”€ TemplateModal.tsx     # í…œí”Œë¦¿ ëª¨ë‹¬
â”œâ”€â”€ profile/                  # í”„ë¡œí•„ ê´€ë ¨ ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ BusinessInfoTab.tsx   # ì‚¬ì—…ì ì •ë³´ íƒ­
â”‚   â”œâ”€â”€ PasswordTab.tsx       # ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ íƒ­
â”‚   â””â”€â”€ TaxInvoiceTab.tsx     # ì„¸ê¸ˆê³„ì‚°ì„œ íƒ­
â”œâ”€â”€ salesperson/              # ì˜ì—…ì‚¬ì› ì»´í¬ë„ŒíŠ¸
â”‚   â””â”€â”€ SalespersonDashboard.tsx # ì˜ì—…ì‚¬ì› ëŒ€ì‹œë³´ë“œ
â”œâ”€â”€ signup/                   # íšŒì›ê°€ì… ì»´í¬ë„ŒíŠ¸
â”œâ”€â”€ support/                  # ê³ ê°ì§€ì› ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ AnnouncementTab.tsx   # ê³µì§€ì‚¬í•­ íƒ­
â”‚   â”œâ”€â”€ FaqTab.tsx            # FAQ íƒ­
â”‚   â””â”€â”€ ContactTab.tsx        # ë¬¸ì˜ íƒ­
â”œâ”€â”€ target-marketing/         # íƒ€ê²Ÿ ë§ˆì¼€íŒ… ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ NumberedParagraph.tsx # ë²ˆí˜¸ ë§¤ê¸´ ë‹¨ë½
â”‚   â””â”€â”€ StructuredRecommendationTable.tsx # ì¶”ì²œ í…Œì´ë¸”
â”œâ”€â”€ terms/                    # ì•½ê´€ ì»´í¬ë„ŒíŠ¸
â”œâ”€â”€ Layout.tsx                # ë©”ì¸ ë ˆì´ì•„ì›ƒ
â”œâ”€â”€ Layout.css                # ë ˆì´ì•„ì›ƒ ìŠ¤íƒ€ì¼
â”œâ”€â”€ Navigation.tsx            # ë„¤ë¹„ê²Œì´ì…˜
â”œâ”€â”€ Footer.tsx                # í‘¸í„°
â”œâ”€â”€ RoleGuard.tsx             # ê¶Œí•œ ê°€ë“œ
â”œâ”€â”€ Pagination.tsx            # í˜ì´ì§€ë„¤ì´ì…˜
â”œâ”€â”€ ConfirmDialog.tsx         # í™•ì¸ ë‹¤ì´ì–¼ë¡œê·¸
â”œâ”€â”€ SuccessModal.tsx          # ì„±ê³µ ëª¨ë‹¬
â”œâ”€â”€ AnnouncementModal.tsx     # ê³µì§€ì‚¬í•­ ëª¨ë‹¬
â””â”€â”€ TermsModal.tsx            # ì•½ê´€ ëª¨ë‹¬
```

### 2.3 /src/contexts/ (ìƒíƒœ ê´€ë¦¬)

#### AuthContext.tsx
- ì‚¬ìš©ì ì¸ì¦ ìƒíƒœ ê´€ë¦¬
- JWT í† í° ê´€ë¦¬ (ì•¡ì„¸ìŠ¤/ë¦¬í”„ë ˆì‹œ)
- ìë™ í† í° ê°±ì‹  (50ë¶„ë§ˆë‹¤)
- ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ìºì‹±
- ì†Œì…œ ë¡œê·¸ì¸ ì§€ì› (Google, Kakao, Naver)

**ì£¼ìš” ê¸°ëŠ¥**:
```typescript
interface AuthContextType {
  user: User | null;
  isLoading: boolean;
  isAuthenticated: boolean;
  login(loginData: LoginRequest): Promise<User>;
  signup(signupData: SignupRequest): Promise<void>;
  logout(): void;
  checkAuth(): Promise<void>;
  refreshAccessToken(): Promise<boolean>;
  getAccessToken(): Promise<string | null>;
  error: string | null;
}
```

#### BalanceContext.tsx
- ê´‘ê³ ë¨¸ë‹ˆ ë° í¬ì¸íŠ¸ ì”ì•¡ ê´€ë¦¬
- íŠ¸ëœì­ì…˜ ë‚´ì—­ ê´€ë¦¬
- ì˜ˆì•½ ê¸ˆì•¡ ê³„ì‚°
- ì‹¤ì‹œê°„ ì”ì•¡ ì—…ë°ì´íŠ¸
- í˜ì´ì§€ ì´ë™ ì‹œ ìë™ ìƒˆë¡œê³ ì¹¨

**íŠ¸ëœì­ì…˜ íƒ€ì…**:
- `charge`: ì¶©ì „
- `usage`: ì‚¬ìš©
- `refund`: í™˜ë¶ˆ
- `penalty`: íŒ¨ë„í‹°
- `reserve`: ì˜ˆì•½
- `unreserve`: ì˜ˆì•½ í•´ì œ

**ì£¼ìš” ê¸°ëŠ¥**:
```typescript
interface BalanceContextType {
  balanceData: BalanceData;
  calculateBalance(): Promise<number>;
  calculatePoints(): Promise<number>;
  getReservedAmount(): Promise<number>;
  getAvailableBalance(): Promise<number>;
  addTransaction(transaction: Transaction): Promise<void>;
  refreshTransactions(): Promise<void>;
  formatCurrency(amount: number): string;
}
```

#### NotificationContext.tsx
- ì•Œë¦¼ ê´€ë¦¬ (30ì´ˆ í´ë§)
- ì½ìŒ/ì•ˆ ì½ìŒ ì²˜ë¦¬
- í˜ì´ì§€ ê°€ì‹œì„± ë³€ê²½ ì‹œ ìë™ ìƒˆë¡œê³ ì¹¨
- í˜ì´ì§€ë„¤ì´ì…˜ ì§€ì›

**ì£¼ìš” ê¸°ëŠ¥**:
```typescript
interface NotificationContextType {
  notifications: Notification[];
  unreadCount: number;
  pagination: PaginationInfo;
  isLoading: boolean;
  fetchNotifications(page: number, unreadOnly: boolean): Promise<void>;
  markAsRead(notificationId: string): Promise<void>;
  markAllAsRead(): Promise<void>;
  refreshNotifications(): Promise<void>;
}
```

#### PricingContext.tsx
- ê°€ê²© ì„¤ì • ê´€ë¦¬
- SMS/LMS/MMS ë‹¨ê°€ ê´€ë¦¬
- ì°¨ë“± ë‹¨ê°€ ì„¤ì •

### 2.4 /src/lib/ (ë¼ì´ë¸ŒëŸ¬ë¦¬)

- **api.ts**: API í˜¸ì¶œ í•¨ìˆ˜, í† í° ê´€ë¦¬, ìë™ ì¬ì‹œë„
- **supabase.ts**: Supabase í´ë¼ì´ì–¸íŠ¸ ì„¤ì • (í´ë§ ê¸°ë°˜)
- **storage.ts**: Supabase Storage ê´€ë ¨ í•¨ìˆ˜
- **utils.ts**: ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ (ë‚ ì§œ í¬ë§·, ì½”ë“œ ìƒì„± ë“±)
- **seedCrypto.ts**: SEED ì•”í˜¸í™” ê´€ë ¨
- **kisaSeed.ts**: KISA SEED ì•”í˜¸í™”
- **targetOptions.ts**: íƒ€ê²Ÿ ë§ˆì¼€íŒ… ì˜µì…˜ ì •ì˜
- **messageSender.ts**: ë©”ì‹œì§€ ë°œì†¡ ë¡œì§ (Naver SENS)
- **naverSensApi.ts**: Naver SENS API í˜¸ì¶œ
- **campaignDraft.ts**: ìº í˜ì¸ ì„ì‹œ ì €ì¥
- **emailUtils.ts**: ì´ë©”ì¼ ë°œì†¡ ìœ í‹¸ë¦¬í‹°
- **termsService.ts**: ì•½ê´€ ê´€ë¦¬ ì„œë¹„ìŠ¤

### 2.5 /src/hooks/ (ì»¤ìŠ¤í…€ í›…)

í˜„ì¬ ì»¤ìŠ¤í…€ í›…ì€ ë³„ë„ íŒŒì¼ë¡œ ë¶„ë¦¬ë˜ì§€ ì•Šì•˜ìœ¼ë©°, Contextì—ì„œ ì§ì ‘ ì œê³µë©ë‹ˆë‹¤.

### 2.6 /src/utils/ (ìœ í‹¸ë¦¬í‹°)

í˜„ì¬ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ëŠ” `/src/lib/utils.ts`ì— í†µí•©ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

### 2.7 /src/services/ (ì„œë¹„ìŠ¤)

í˜„ì¬ ì„œë¹„ìŠ¤ ë ˆì´ì–´ëŠ” ë³„ë„ë¡œ ë¶„ë¦¬ë˜ì§€ ì•Šì•˜ìœ¼ë©°, API Routesì™€ lib í´ë”ì—ì„œ ê´€ë¦¬ë©ë‹ˆë‹¤.

## 3. ì£¼ìš” ê¸°ëŠ¥ ìƒì„¸ ë¶„ì„

### 3.1 ì¸ì¦ ì‹œìŠ¤í…œ

#### JWT ê¸°ë°˜ ì¸ì¦
- **ì•¡ì„¸ìŠ¤ í† í°**: 1ì‹œê°„ ë§Œë£Œ
- **ë¦¬í”„ë ˆì‹œ í† í°**: 7ì¼ ë§Œë£Œ
- ìë™ í† í° ê°±ì‹  (5ë¶„ ë²„í¼)
- 401 ì‘ë‹µ ì‹œ ìë™ ì¬ì‹œë„
- ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ìºì‹±

**ì¸ì¦ í”Œë¡œìš°**:
```
1. ë¡œê·¸ì¸ â†’ ì„œë²„ì—ì„œ JWT ìƒì„±
2. í† í°ì„ localStorageì— ì €ì¥
3. API í˜¸ì¶œ ì‹œ Authorization í—¤ë”ì— í† í° í¬í•¨
4. í† í° ë§Œë£Œ ì „ ìë™ ê°±ì‹ 
5. ë¦¬í”„ë ˆì‹œ í† í°ë„ ë§Œë£Œ ì‹œ ë¡œê·¸ì•„ì›ƒ
```

**í† í° ê´€ë¦¬ ë¡œì§**:
```typescript
// tokenManager from api.ts
const tokenManager = {
  getAccessToken(): string | null {
    if (typeof window === "undefined") return null;
    return localStorage.getItem("accessToken");
  },

  getRefreshToken(): string | null {
    if (typeof window === "undefined") return null;
    return localStorage.getItem("refreshToken");
  },

  setTokens(accessToken: string, refreshToken: string): void {
    if (typeof window === "undefined") return;
    localStorage.setItem("accessToken", accessToken);
    localStorage.setItem("refreshToken", refreshToken);
  },

  clearTokens(): void {
    if (typeof window === "undefined") return;
    localStorage.removeItem("accessToken");
    localStorage.removeItem("refreshToken");
  },

  isTokenExpired(token: string): boolean {
    try {
      const payload = JSON.parse(atob(token.split('.')[1]));
      return payload.exp * 1000 < Date.now() + 5 * 60 * 1000; // 5ë¶„ ë²„í¼
    } catch {
      return true;
    }
  }
};
```

#### ì†Œì…œ ë¡œê·¸ì¸
- **Google**: OAuth 2.0
- **Kakao**: Kakao Login API
- **Naver**: Naver Login API

**ì†Œì…œ ë¡œê·¸ì¸ í”Œë¡œìš°**:
```
1. ê° í”Œë«í¼ì˜ auth-url í˜¸ì¶œ â†’ ì¸ì¦ URL ë°˜í™˜
2. ì‚¬ìš©ìê°€ ì†Œì…œ í”Œë«í¼ì—ì„œ ì¸ì¦
3. ì½œë°±ìœ¼ë¡œ authorization code ë°›ìŒ
4. codeë¡œ access token êµí™˜
5. access tokenìœ¼ë¡œ ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ
6. ê¸°ì¡´ ê³„ì • ì—°ë™ ë˜ëŠ” ì‹ ê·œ ê°€ì…
7. JWT í† í° ë°œê¸‰
```

#### ë³¸ì¸ì¸ì¦
- **KGì´ë‹ˆì‹œìŠ¤**: íœ´ëŒ€í° ë³¸ì¸ì¸ì¦
- **ê³µê³µë°ì´í„° API**: ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸ ê²€ì¦

**ë³¸ì¸ì¸ì¦ í”Œë¡œìš°**:
```
1. ë³¸ì¸ì¸ì¦ ìš”ì²­ (/api/auth/inicis-auth/request)
2. KGì´ë‹ˆì‹œìŠ¤ ì¸ì¦ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
3. ì‚¬ìš©ìê°€ íœ´ëŒ€í° ì¸ì¦ ì§„í–‰
4. ì½œë°±ìœ¼ë¡œ ê²°ê³¼ ìˆ˜ì‹  (/api/auth/inicis-auth/callback)
5. ì¸ì¦ ê²°ê³¼ ì²˜ë¦¬ (/api/auth/inicis-auth/result)
6. ì‚¬ìš©ì ì •ë³´ ì—…ë°ì´íŠ¸
```

**ì‚¬ì—…ì ì¸ì¦ í”Œë¡œìš°**:
```
1. ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸, ëŒ€í‘œìëª…, ê°œì—…ì¼ì ì…ë ¥
2. ê³µê³µë°ì´í„° APIë¡œ ê²€ì¦ (/api/business-verification/verify-business-number)
3. ê²€ì¦ ì„±ê³µ ì‹œ ì‚¬ì—…ì ì •ë³´ ì œì¶œ (/api/business-verification/submit)
4. ê´€ë¦¬ì ìŠ¹ì¸ ëŒ€ê¸°
5. ìŠ¹ì¸ ì‹œ approval_status ì—…ë°ì´íŠ¸
```

### 3.2 ë©”ì‹œì§€ ë°œì†¡ ì‹œìŠ¤í…œ

#### SMS/LMS/MMS ë°œì†¡
- **ì¦‰ì‹œ ë°œì†¡**: ì‹¤ì‹œê°„ Naver SENS API í˜¸ì¶œ
- **ì˜ˆì•½ ë°œì†¡**: DBì— ì €ì¥ í›„ Cronìœ¼ë¡œ ì²˜ë¦¬
- **ë‹¤ì¤‘ ìˆ˜ì‹ ì**: ë°°ì—´ë¡œ ì „ë‹¬
- **ì¹˜í™˜ ë¬¸êµ¬**: `#[ë³€ìˆ˜ëª…]` í˜•ì‹
- **ë©”ì‹œì§€ íƒ€ì… ìë™ ê²°ì •**: ë‚´ìš© ê¸¸ì´ ë° ì´ë¯¸ì§€ ìœ ë¬´ë¡œ íŒë‹¨

**ì§€ì› ë³€ìˆ˜**:
- ìˆ˜ì‹ ì: `#[ì´ë¦„]`, `#[ì „í™”ë²ˆí˜¸]`, `#[ê·¸ë£¹ëª…]`
- ë°œì‹ ì: `#[ë°œì‹ ìëª…]`, `#[íšŒì‚¬ëª…]`
- ë‚ ì§œ/ì‹œê°„: `#[ì˜¤ëŠ˜ë‚ ì§œ]`, `#[í˜„ì¬ì‹œê°]`
- ì»¤ìŠ¤í…€: ì‚¬ìš©ì ì •ì˜ ë³€ìˆ˜

**ë©”ì‹œì§€ íƒ€ì… ê²°ì • ë¡œì§**:
```typescript
// 90byte ê¸°ì¤€
// - SMS: 90byte ì´í•˜
// - LMS: 90byte ì´ˆê³¼, ì´ë¯¸ì§€ ì—†ìŒ
// - MMS: ì´ë¯¸ì§€ í¬í•¨
const getMessageType = (content: string, hasImage: boolean) => {
  if (hasImage) return 'MMS';
  const byteLength = new Blob([content]).size;
  return byteLength <= 90 ? 'SMS' : 'LMS';
};
```

**ë°œì†¡ API ì˜ˆì‹œ**:
```typescript
POST /api/messages/send
{
  "recipients": [
    {
      "phone_number": "010-1234-5678",
      "name": "í™ê¸¸ë™",
      "variables": { "ì¿ í°ë²ˆí˜¸": "ABC123" }
    }
  ],
  "message": "#[ì´ë¦„]ë‹˜, ì¿ í°ë²ˆí˜¸ #[ì¿ í°ë²ˆí˜¸]ë¡œ í• ì¸ë°›ìœ¼ì„¸ìš”!",
  "sendType": "immediate", // or "scheduled"
  "scheduledAt": "2025-10-22T10:00:00Z",
  "isAd": true,
  "imageFileIds": ["file-id-1"]
}
```

#### í…œí”Œë¦¿ ê´€ë¦¬
- **ê³µê°œ/ë¹„ê³µê°œ**: ë‹¤ë¥¸ ì‚¬ìš©ìì™€ ê³µìœ  ê°€ëŠ¥
- **ì¹´í…Œê³ ë¦¬**: ì¼ë°˜, ë§ˆì¼€íŒ…, AI ìƒì„± ë“±
- **ì‚¬ìš© íšŸìˆ˜**: ìë™ ì¶”ì 
- **ì´ë¯¸ì§€ ì²¨ë¶€**: Supabase Storage í™œìš©
- **ë²„íŠ¼ ì„¤ì •**: JSONB í•„ë“œë¡œ ê´€ë¦¬

**í…œí”Œë¦¿ í…Œì´ë¸” êµ¬ì¡°**:
```sql
message_templates (
  id, user_id, name, content, image_url,
  category, template_code, is_private, is_ai_generated,
  ai_model, usage_count, buttons (JSONB), is_active,
  created_at, updated_at
)
```

#### ì˜ˆì•½ ë°œì†¡ ìë™í™”
- **Cron Job**: `/api/cron/send-scheduled-messages`
- **ì‹¤í–‰ ì£¼ê¸°**: Vercel Cron (ë§¤ë¶„ ì‹¤í–‰)
- **ì²˜ë¦¬ ë¡œì§**:
  1. `scheduled_messages` í…Œì´ë¸”ì—ì„œ ë°œì†¡ ëŒ€ê¸° ì¡°íšŒ
  2. í˜„ì¬ ì‹œê°„ ì´í›„ ë©”ì‹œì§€ í•„í„°ë§
  3. Naver SENS API í˜¸ì¶œ
  4. ì„±ê³µ/ì‹¤íŒ¨ ìƒíƒœ ì—…ë°ì´íŠ¸
  5. íŠ¸ëœì­ì…˜ ìƒì„± (í¬ë ˆë”§ ì°¨ê°)

**ë°œì‹ ë²ˆí˜¸ ê´€ë¦¬**:
- ì‚¬ìš©ìë³„ ì—¬ëŸ¬ ë°œì‹ ë²ˆí˜¸ ë“±ë¡ ê°€ëŠ¥
- ê¸°ë³¸ ë°œì‹ ë²ˆí˜¸ ì„¤ì •
- ë¡œê·¸ì¸ ì‹œ ë³¸ì¸ ì „í™”ë²ˆí˜¸ ìë™ ë“±ë¡
- ë°œì‹ ë²ˆí˜¸ ì¸ì¦ í•„ìš”

### 3.3 ìº í˜ì¸ ê´€ë¦¬

#### ìº í˜ì¸ ìƒì„± í”Œë¡œìš°
```
1. AI íƒ€ê²Ÿ ë§ˆì¼€íŒ… í˜ì´ì§€ì—ì„œ ì¡°ê±´ ì„¤ì •
   - ì—°ë ¹ëŒ€, ì§€ì—­, ì—…ì¢…, ì¹´ë“œ ê²°ì œ ì¡°ê±´ ë“±
2. OpenAIë¡œ ë©”ì‹œì§€ ë° ì´ë¯¸ì§€ ìƒì„±
3. ì˜ˆìƒ ë¹„ìš© ê³„ì‚°
4. ìº í˜ì¸ ìƒì„± (PENDING_APPROVAL ìƒíƒœ)
5. í¬ì¸íŠ¸/ê´‘ê³ ë¨¸ë‹ˆ ì˜ˆì•½ (reserve íŠ¸ëœì­ì…˜)
6. ê´€ë¦¬ì ìŠ¹ì¸ ëŒ€ê¸°
```

#### ìº í˜ì¸ ìƒíƒœ
- `PENDING_APPROVAL`: ìŠ¹ì¸ ëŒ€ê¸°
- `APPROVED`: ìŠ¹ì¸ë¨
- `REJECTED`: ê±°ë¶€ë¨
- `RUNNING`: ì‹¤í–‰ ì¤‘
- `PAUSED`: ì¼ì‹œì •ì§€
- `COMPLETED`: ì™„ë£Œ
- `CANCELLED`: ì·¨ì†Œë¨

#### ìŠ¹ì¸ ì›Œí¬í”Œë¡œìš°
```
ì‚¬ìš©ì ìƒì„± â†’ ê´€ë¦¬ì ìŠ¹ì¸ â†’ ìë™ ë°œì†¡ ì‹œì‘
              â†“ (ê±°ë¶€)
            ê±°ë¶€ ì‚¬ìœ  ì…ë ¥ â†’ ì‚¬ìš©ìì—ê²Œ ì•Œë¦¼
```

**ê´€ë¦¬ì ìŠ¹ì¸ API**:
- `POST /api/admin/campaigns/[id]/approve`: ìº í˜ì¸ ìŠ¹ì¸
- `POST /api/admin/campaigns/[id]/reject`: ìº í˜ì¸ ê±°ë¶€
- `POST /api/admin/campaigns/[id]/start`: ìº í˜ì¸ ì‹œì‘
- `POST /api/admin/campaigns/[id]/pause`: ìº í˜ì¸ ì¼ì‹œì •ì§€

#### íƒ€ê²Ÿ ë§ˆì¼€íŒ… ì¡°ê±´
- **ì—°ë ¹ëŒ€**: 10ëŒ€~60ëŒ€, ì „ì²´
- **ì„±ë³„**: ë‚¨/ì—¬ ë¹„ìœ¨ ì„¤ì •
- **ì§€ì—­**: ì‹œ/êµ¬/ë™ ë‹¨ìœ„ (target_locations_detailed JSONB)
- **ì—…ì¢…**: ëŒ€ë¶„ë¥˜/ì†Œë¶„ë¥˜
- **ì¹´ë“œ ìŠ¹ì¸ ì¡°ê±´**:
  - ê¸ˆì•¡: ìµœì†Œ~ìµœëŒ€ (card_amount_max)
  - ì‹œê°„: ì‹œì‘~ì¢…ë£Œ (card_time_start, card_time_end)
  - ë°œì†¡ ì •ì±…: ì‹¤ì‹œê°„/ì¼ê´„ (send_policy_type)

**ì˜ˆì‚° ê´€ë¦¬**:
- `budget`: ìº í˜ì¸ ì „ì²´ ì˜ˆì‚°
- `campaign_budget`: ì‹¤ì œ ì‚¬ìš© ì˜ˆì‚°
- `daily_ad_spend_limit`: ì¼ ìµœëŒ€ ê´‘ê³ ë¹„
- `unit_cost`: ë©”ì‹œì§€ë‹¹ ë‹¨ê°€ (ì°¨ë“± ë‹¨ê°€ ì ìš©)
- `estimated_total_cost`: ì˜ˆìƒ ì´ ë¹„ìš©

**ë°œì†¡ ì •ì±…**:
- **ì‹¤ì‹œê°„ (realtime)**: ì¡°ê±´ ì¶©ì¡± ì‹œ ì¦‰ì‹œ ë°œì†¡
- **ì¼ê´„ (batch)**: íŠ¹ì • ë‚ ì§œ/ì‹œê°„ì— ì¼ê´„ ë°œì†¡

**ìº í˜ì¸ í…Œì´ë¸” êµ¬ì¡°**:
```sql
campaigns (
  id, user_id, name, template_id, status,
  budget, campaign_budget, daily_ad_spend_limit,
  send_policy_type, validity_start_date, validity_end_date,
  scheduled_send_date, scheduled_send_time,
  target_age_groups (TEXT[]),
  target_locations_detailed (JSONB),
  card_amount_max, card_time_start, card_time_end,
  target_industry_top_level, target_industry_specific,
  gender_ratio (JSONB), desired_recipients,
  total_recipients, sent_count, success_count, failed_count,
  expert_review_requested, expert_review_notes,
  schedule_start_date, schedule_end_date,
  schedule_send_time_start, schedule_send_time_end,
  message_template, unit_cost, estimated_total_cost,
  created_at, updated_at
)
```

#### ì—…ì¢… ê´€ë¦¬
- **campaign_industries**: ìº í˜ì¸ìš© ì—…ì¢… (ê´€ë¦¬ì ê´€ë¦¬)
- **custom_industries**: ì‚¬ìš©ì ì •ì˜ ì—…ì¢… (ì§ì ‘ ì…ë ¥)
- **nts_industries**: êµ­ì„¸ì²­ í‘œì¤€ ì—…ì¢… ì½”ë“œ

**ì°¨ë“± ë‹¨ê°€ ì‹œìŠ¤í…œ**:
- ì—…ì¢…ë³„ ë‹¤ë¥¸ ë‹¨ê°€ ì ìš©
- ì •ì‹ ì—…ì¢…(campaign_industries) vs ì»¤ìŠ¤í…€ ì—…ì¢…(custom_industries)
- pricing_settings í…Œì´ë¸”ì—ì„œ ë‹¨ê°€ ê´€ë¦¬

### 3.4 ì˜ˆì•½ ê´€ë¦¬ ì‹œìŠ¤í…œ

#### ê³µê°„ ê´€ë¦¬
- **ê³µê°„ ë“±ë¡**: ì´ë¦„, ì„¤ëª…, ì´ë¯¸ì§€, ê°€ê²©
- **ê³µê°„ ëª©ë¡**: ì‚¬ìš©ìë³„ ê³µê°„ ì¡°íšŒ
- **ê³µê°„ ìˆ˜ì •/ì‚­ì œ**: CRUD ê¸°ëŠ¥
- **ì´ë¯¸ì§€ ê´€ë¦¬**: ì—¬ëŸ¬ ì´ë¯¸ì§€ ì—…ë¡œë“œ (JSONB ë°°ì—´)

**ê³µê°„ í…Œì´ë¸”**:
```sql
places (
  id, user_id, name, description,
  price_per_hour, images (JSONB),
  is_active, created_at, updated_at
)
```

#### ì˜ˆì•½ ìº˜ë¦°ë”
- **ì›”ê°„/ì£¼ê°„/ì¼ê°„ ë·°**: ë‹¤ì–‘í•œ ë·° ì§€ì›
- **ì˜ˆì•½ ìƒì„±**: ë‚ ì§œ/ì‹œê°„, ê³ ê° ì •ë³´ ì…ë ¥
- **ì˜ˆì•½ ìƒíƒœ**: CONFIRMED, CANCELLED, COMPLETED
- **ê°€ê²© ì •ë³´**: ì‹œê°„ë‹¹ ê°€ê²©, ì´ ê¸ˆì•¡ ìë™ ê³„ì‚°
- **ì¶©ëŒ ê°ì§€**: ë™ì¼ ì‹œê°„ëŒ€ ì˜ˆì•½ ë°©ì§€

**ì˜ˆì•½ í…Œì´ë¸”**:
```sql
bookings (
  id, place_id, user_id, customer_name, customer_phone,
  start_time, end_time, status, total_price,
  notes, created_at, updated_at
)
```

#### ìë™ ë©”ì‹œì§€ ë°œì†¡
- **ì˜ˆì•½ í™•ì¸**: ì˜ˆì•½ ì‹œ ìë™ ë°œì†¡
- **ë¦¬ë§ˆì¸ë”**: ì˜ˆì•½ Nì‹œê°„ ì „ ë°œì†¡
- **ì·¨ì†Œ ì•Œë¦¼**: ì˜ˆì•½ ì·¨ì†Œ ì‹œ ë°œì†¡
- **ì™„ë£Œ ê°ì‚¬**: ì˜ˆì•½ ì™„ë£Œ í›„ ë°œì†¡

**ìë™ ë©”ì‹œì§€ ê·œì¹™ í…Œì´ë¸”**:
```sql
reservation_auto_rules (
  id, user_id, trigger_type, space_id,
  message_template_id, is_active,
  send_timing_value, send_timing_unit,
  created_at, updated_at
)
```

**íŠ¸ë¦¬ê±° íƒ€ì…**:
- `BOOKING_CONFIRMED`: ì˜ˆì•½ í™•ì •
- `BOOKING_REMINDER`: ì˜ˆì•½ ë¦¬ë§ˆì¸ë”
- `BOOKING_CANCELLED`: ì˜ˆì•½ ì·¨ì†Œ
- `BOOKING_COMPLETED`: ì˜ˆì•½ ì™„ë£Œ

**ìë™ ë°œì†¡ ì²´í¬ (Cron)**:
- `/api/reservations/auto-send-check`
- ë§¤ë¶„ ì‹¤í–‰
- ë°œì†¡ ì¡°ê±´ ì²´í¬ ë° ë©”ì‹œì§€ ë°œì†¡

#### ê³µìœ  ìº˜ë¦°ë”
- **ê³µìœ  ë§í¬ ìƒì„±**: ê³ ìœ  í† í° ê¸°ë°˜
- **ì™¸ë¶€ ì ‘ê·¼**: ì¸ì¦ ì—†ì´ ì˜ˆì•½ ê°€ëŠ¥
- **ì‹¤ì‹œê°„ ë™ê¸°í™”**: í´ë§ ê¸°ë°˜
- **í† í° ê´€ë¦¬**: í† í° ìƒì„±/ì‚­ì œ/ê°±ì‹ 

**ê³µìœ  ìº˜ë¦°ë” í”Œë¡œìš°**:
```
1. ì‚¬ìš©ìê°€ ê³µìœ  ìº˜ë¦°ë” ìƒì„±
2. ê³ ìœ  í† í° ë°œê¸‰ (UUID)
3. ê³µìœ  ë§í¬ ë³µì‚¬ (/shared/calendar/[token])
4. ì™¸ë¶€ ì‚¬ìš©ìê°€ ë§í¬ë¡œ ì ‘ê·¼
5. ì˜ˆì•½ ê°€ëŠ¥í•œ ì‹œê°„ í™•ì¸
6. ì˜ˆì•½ ì‹ ì²­
7. ì›ë³¸ ìº˜ë¦°ë”ì— ë°˜ì˜
```

**ê³µìœ  ìº˜ë¦°ë” í…Œì´ë¸”**:
```sql
shared_calendars (
  id, user_id, space_id, token (UUID),
  name, is_active, expires_at,
  created_at, updated_at
)
```

#### ì˜ˆì•½ í†µê³„
- **ì˜ˆì•½ í˜„í™©**: ì´ ì˜ˆì•½ ìˆ˜, ì™„ë£Œ/ì·¨ì†Œ ìˆ˜
- **ë§¤ì¶œ í˜„í™©**: ê¸°ê°„ë³„ ë§¤ì¶œ
- **ê³µê°„ë³„ í†µê³„**: ê³µê°„ë³„ ì˜ˆì•½ ë° ë§¤ì¶œ
- **ì›”ë³„ ì¶”ì´**: ì°¨íŠ¸ë¡œ ì‹œê°í™”

### 3.5 ê´€ë¦¬ì ê¸°ëŠ¥

#### ì‚¬ìš©ì ê´€ë¦¬
- **ëª©ë¡ ì¡°íšŒ**: í˜ì´ì§€ë„¤ì´ì…˜, ê²€ìƒ‰, í•„í„°
- **ìƒì„¸ ì •ë³´**: í”„ë¡œí•„, ê±°ë˜ ë‚´ì—­, ìº í˜ì¸
- **ê¶Œí•œ ê´€ë¦¬**: ì—­í•  ë³€ê²½ (USER, ADVERTISER, SALESPERSON, ADMIN)
- **ìŠ¹ì¸ ê´€ë¦¬**: ì‚¬ì—…ì ì¸ì¦ ìŠ¹ì¸/ê±°ë¶€
- **í¬ì¸íŠ¸ ì¶©ì „**: ê°œë³„/ì¼ê´„ ì¶©ì „
- **ë¹„ë°€ë²ˆí˜¸ ì´ˆê¸°í™”**: ì„ì‹œ ë¹„ë°€ë²ˆí˜¸ ë°œê¸‰
- **ì—‘ì…€ ë‚´ë³´ë‚´ê¸°**: ì‚¬ìš©ì ëª©ë¡ ë‹¤ìš´ë¡œë“œ
- **ì¼ê´„ ì‘ì—…**: ì—¬ëŸ¬ ì‚¬ìš©ì ë™ì‹œ ì²˜ë¦¬

**ì‚¬ìš©ì í…Œì´ë¸”**:
```sql
users (
  id, username, email, password, name, phone_number,
  role, approval_status, is_active, last_login_at,
  referral_code, referred_by, payment_mode,
  company_info (JSONB), tax_invoice_info (JSONB),
  documents (JSONB), agreement_info (JSONB),
  kakao_user_id, naver_user_id, google_user_id,
  created_at, updated_at
)
```

**ì—­í• (Role)**:
- `USER`: ì¼ë°˜ ì‚¬ìš©ì
- `ADVERTISER`: ê´‘ê³ ì£¼ (ìŠ¹ì¸ëœ ì‚¬ìš©ì)
- `SALESPERSON`: ì˜ì—…ì‚¬ì›
- `ADMIN`: ê´€ë¦¬ì

**ìŠ¹ì¸ ìƒíƒœ(approval_status)**:
- `PENDING`: ìŠ¹ì¸ ëŒ€ê¸°
- `APPROVED`: ìŠ¹ì¸ë¨
- `REJECTED`: ê±°ë¶€ë¨

#### ìº í˜ì¸ ìŠ¹ì¸
- **ìŠ¹ì¸ ëŒ€ê¸° ëª©ë¡**: PENDING_APPROVAL ìƒíƒœ ìº í˜ì¸
- **ìº í˜ì¸ ìƒì„¸**: íƒ€ê²Ÿ ì¡°ê±´, ì˜ˆì‚°, ë©”ì‹œì§€ í™•ì¸
- **ìŠ¹ì¸**: APPROVEDë¡œ ë³€ê²½, ìë™ ë°œì†¡ ì‹œì‘
- **ê±°ë¶€**: REJECTEDë¡œ ë³€ê²½, ê±°ë¶€ ì‚¬ìœ  ì…ë ¥
- **ì¼ì‹œì •ì§€**: PAUSEDë¡œ ë³€ê²½
- **ì¬ì‹œì‘**: RUNNINGìœ¼ë¡œ ë³€ê²½

**ìŠ¹ì¸ í”„ë¡œì„¸ìŠ¤**:
```
1. ì‚¬ìš©ìê°€ ìº í˜ì¸ ìƒì„± (PENDING_APPROVAL)
2. ì˜ˆì‚° ì˜ˆì•½ (reserve íŠ¸ëœì­ì…˜)
3. ê´€ë¦¬ì ìŠ¹ì¸ ëŒ€ê¸°
4. ê´€ë¦¬ì ìŠ¹ì¸
   - ì˜ˆì•½ í•´ì œ (unreserve)
   - ì‹¤ì œ ì‚¬ìš© (usage)
   - ìƒíƒœ ë³€ê²½ (APPROVED)
5. ìë™ ë°œì†¡ ì‹œì‘
```

#### í¬ì¸íŠ¸ ì¶©ì „ ê´€ë¦¬
- **ì¶©ì „ ìš”ì²­ ëª©ë¡**: ê²°ì œ ëŒ€ê¸°, ì™„ë£Œ ë‚´ì—­
- **ì¶©ì „ ìŠ¹ì¸**: ìˆ˜ë™ ì¶©ì „ (ê´€ë¦¬ì)
- **ì¼ê´„ ì¶©ì „**: ì—¬ëŸ¬ ì‚¬ìš©ìì—ê²Œ í•œë²ˆì— ì¶©ì „
- **ì¶©ì „ ì´ë ¥**: ë‚ ì§œë³„, ì‚¬ìš©ìë³„ ì¡°íšŒ
- **í¬ì¸íŠ¸ í˜„í™©**: ì „ì²´ í¬ì¸íŠ¸ í†µê³„

**íŠ¸ëœì­ì…˜ ìƒì„±**:
```typescript
{
  user_id: userId,
  type: "charge",
  amount: 10000,
  description: "ê´€ë¦¬ì ì¶©ì „",
  metadata: {
    chargedBy: "admin",
    adminUserId: 1,
    reason: "ì´ë²¤íŠ¸ ì§€ê¸‰",
    transactionType: "credit" // or "point"
  },
  status: "completed"
}
```

#### ì„¸ê¸ˆê³„ì‚°ì„œ ê´€ë¦¬
- **ë°œí–‰ ìš”ì²­ ëª©ë¡**: ì‚¬ìš©ì ìš”ì²­ ë‚´ì—­
- **ë°œí–‰**: PDF ìƒì„± ë° ì´ë©”ì¼ ë°œì†¡
- **í…œí”Œë¦¿ ê´€ë¦¬**: ì„¸ê¸ˆê³„ì‚°ì„œ í…œí”Œë¦¿
- **ì—‘ì…€ ë‚´ë³´ë‚´ê¸°**: ì„¸ê¸ˆê³„ì‚°ì„œ ëª©ë¡ ë‹¤ìš´ë¡œë“œ
- **íŒŒì¼ ì—…ë¡œë“œ**: ì„¸ê¸ˆê³„ì‚°ì„œ íŒŒì¼ ê´€ë¦¬

#### í†µê³„ ëŒ€ì‹œë³´ë“œ
- **íšŒì› í†µê³„**:
  - ì´ íšŒì› ìˆ˜, ì‹ ê·œ ê°€ì…ì
  - ì—­í• ë³„, ìŠ¹ì¸ ìƒíƒœë³„ ë¶„í¬
  - ì›”ë³„ ê°€ì… ì¶”ì´ (Chart.js)

- **ë¡œê·¸ì¸ í†µê³„**:
  - ì¼ë³„/ì›”ë³„ ë¡œê·¸ì¸ ìˆ˜
  - í™œì„± ì‚¬ìš©ì ìˆ˜

- **ìº í˜ì¸ í†µê³„**:
  - ì´ ìº í˜ì¸ ìˆ˜, ì‹¤í–‰ ì¤‘ ìº í˜ì¸
  - ìƒíƒœë³„ ë¶„í¬
  - ë°œì†¡ ì„±ê³µë¥ 

- **ë§¤ì¶œ í†µê³„**:
  - ì¼ë³„/ì›”ë³„ ë§¤ì¶œ
  - ê²°ì œ ìˆ˜ë‹¨ë³„ ë¶„í¬

**ì»´í¬ë„ŒíŠ¸**:
- `CampaignStatistics.tsx`: ìº í˜ì¸ í†µê³„
- `MemberStatistics.tsx`: íšŒì› í†µê³„
- `MemberLoginStatistics.tsx`: ë¡œê·¸ì¸ í†µê³„
- `MemberSignupStatistics.tsx`: ê°€ì… í†µê³„

#### ì‹œìŠ¤í…œ ì„¤ì •
- **ì•½ê´€ ê´€ë¦¬**: ì´ìš©ì•½ê´€, ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨
- **FAQ ê´€ë¦¬**: ì¹´í…Œê³ ë¦¬ë³„ ê´€ë¦¬, ìˆœì„œ ë³€ê²½
- **ê³µì§€ì‚¬í•­ ê´€ë¦¬**: íŒì—…, ì¤‘ìš” ê³µì§€
- **ë“±ê¸‰ ì„¤ì •**: ì‚¬ìš©ì ë“±ê¸‰ ê¸°ì¤€
- **ê°€ê²© ì„¤ì •**: SMS/LMS/MMS ë‹¨ê°€, ì°¨ë“± ë‹¨ê°€
- **ì—…ì¢… ê´€ë¦¬**: ìº í˜ì¸ ì—…ì¢… ê´€ë¦¬
- **ì‚¬ì´íŠ¸ ì„¤ì •**: ì‚¬ì´íŠ¸ ê¸°ë³¸ ì„¤ì •

### 3.6 ì˜ì—…ì‚¬ì› ê¸°ëŠ¥

#### ì¶”ì²œì¸ ì‹œìŠ¤í…œ
- **ì¶”ì²œ ì½”ë“œ ìƒì„±**: ë¡œê·¸ì¸ ì‹œ ìë™ ìƒì„±
- **ì¶”ì²œ ë§í¬**: `/signup?ref=<code>` í˜•ì‹
- **ì¶”ì²œ ê´€ê³„**: 1ë‹¨ê³„/2ë‹¨ê³„ ì¶”ì 
- **ì¶”ì²œ ë³´ìƒ**: ì§ì ‘/ê°„ì ‘ ìˆ˜ìˆ˜ë£Œ
- **ì¶”ì²œ ì²´ì¸**: ì „ì²´ ì¶”ì²œ êµ¬ì¡° ì¡°íšŒ

**ì¶”ì²œ ì½”ë“œ ìƒì„± ë¡œì§**:
```typescript
// user ID + random string â†’ base64 encoding
const generateReferralCode = (userId: number): string => {
  const base = userId.toString(36);
  const random = Math.random().toString(36).substring(2, 6);
  return `${base}${random}`.toUpperCase();
};
```

**ì¶”ì²œ ê´€ê³„ í…Œì´ë¸”**:
```sql
referrals (
  id, referrer_id, referred_user_id,
  referral_level (1 or 2), status,
  created_at, updated_at
)
```

#### ìˆ˜ìˆ˜ë£Œ ê´€ë¦¬
- **ì§ì ‘ ì¶”ì²œ**: 1ë‹¨ê³„ ìˆ˜ìˆ˜ë£Œ (ì˜ˆ: ì¶©ì „ì•¡ì˜ 5%)
- **ê°„ì ‘ ì¶”ì²œ**: 2ë‹¨ê³„ ìˆ˜ìˆ˜ë£Œ (ì˜ˆ: ì¶©ì „ì•¡ì˜ 2%)
- **ìˆ˜ìˆ˜ë£Œ ë‚´ì—­**: ë‚ ì§œë³„, ì‚¬ìš©ìë³„ ì¡°íšŒ
- **ì •ì‚° ìš”ì²­**: ì›”ë³„ ì •ì‚°
- **ëŒ€ì‹œë³´ë“œ**: ì‹¤ì‹œê°„ í†µê³„

**ë¦¬ì›Œë“œ ê³„ì‚°**:
```typescript
// ì§ì ‘ ì¶”ì²œ (1ë‹¨ê³„)
const directReward = chargeAmount * 0.05;

// ê°„ì ‘ ì¶”ì²œ (2ë‹¨ê³„)
const indirectReward = chargeAmount * 0.02;
```

**ë¦¬ì›Œë“œ íŠ¸ëœì­ì…˜**:
```sql
transactions (
  type: "charge",
  metadata: {
    isReward: true,
    referralLevel: 1 or 2,
    sourceUserId: <charged_user_id>,
    transactionType: "point" // ë¦¬ì›Œë“œëŠ” í¬ì¸íŠ¸ë¡œ ì§€ê¸‰
  }
)
```

#### ì¡°ì§ ê´€ë¦¬
- **ì¡°ì§ë„**: 1ë‹¨ê³„/2ë‹¨ê³„ ì¶”ì²œ íŠ¸ë¦¬ êµ¬ì¡°
- **íšŒì› ì •ë³´**: ê°€ì…ì¼, ë§ˆì§€ë§‰ ë¡œê·¸ì¸, ì¶©ì „ ë‚´ì—­
- **ì¡°ì§ í†µê³„**: ì´ íšŒì› ìˆ˜, í™œì„± íšŒì› ìˆ˜, ì´ ìˆ˜ìˆ˜ë£Œ

**ì¡°ì§ ì¡°íšŒ API**:
- `GET /api/users/referral-chain`: ì¶”ì²œ ì²´ì¸ ì¡°íšŒ
- `GET /api/users/referral-stats`: ì¶”ì²œ í†µê³„
- `GET /api/referrals/dashboard`: ì¶”ì²œì¸ ëŒ€ì‹œë³´ë“œ

#### ì´ˆëŒ€ í˜ì´ì§€
- **ì¶”ì²œ ë§í¬ ìƒì„±**: ìë™ ìƒì„±ëœ ì½”ë“œ í¬í•¨
- **ë§í¬ ê³µìœ **: ì¹´ì¹´ì˜¤í†¡, ë¬¸ì, ì´ë©”ì¼
- **ì¡°íšŒìˆ˜ ì¶”ì **: ë§í¬ í´ë¦­ íšŸìˆ˜
- **QR ì½”ë“œ**: ì¶”ì²œ ë§í¬ QR ì½”ë“œ ìƒì„±

### 3.7 ê²°ì œ ì‹œìŠ¤í…œ

#### NicePay ì—°ë™
- **ì¶©ì „ ìš”ì²­**: ê¸ˆì•¡ ì…ë ¥ â†’ NicePay ê²°ì œì°½ í˜¸ì¶œ
- **ê²°ì œ ìŠ¹ì¸**: ì½œë°± ì²˜ë¦¬ â†’ íŠ¸ëœì­ì…˜ ìƒì„±
- **ê²°ì œ ê²€ì¦**: ì„œë²„ ì‚¬ì´ë“œ ê²€ì¦
- **ê²°ì œ ì·¨ì†Œ**: ê²°ì œ ì·¨ì†Œ ì²˜ë¦¬

**ê²°ì œ í”Œë¡œìš°**:
```
1. ì‚¬ìš©ìê°€ ì¶©ì „ ê¸ˆì•¡ ì…ë ¥
2. POST /api/payment/nicepay/request í˜¸ì¶œ
3. NicePay ê²°ì œì°½ ì˜¤í”ˆ
4. ì‚¬ìš©ìê°€ ê²°ì œ ì§„í–‰
5. NicePay ì½œë°± â†’ /api/payment/nicepay/return
6. ì„œë²„ì—ì„œ ê²°ì œ ê²€ì¦ (/api/payment/nicepay/approve)
7. íŠ¸ëœì­ì…˜ ìƒì„± (type: "charge")
8. ì”ì•¡ ì—…ë°ì´íŠ¸
```

**ê²°ì œ ê²€ì¦**:
```typescript
// ì„œë²„ì—ì„œ NicePay APIë¡œ ê²°ì œ ê²°ê³¼ ì¬í™•ì¸
const verifyResult = await nicepay.verify(orderId, amount);
if (verifyResult.success) {
  // íŠ¸ëœì­ì…˜ ìƒì„±
  await createTransaction({
    user_id: userId,
    type: "charge",
    amount: amount,
    status: "completed",
    metadata: { orderId, paymentMethod: "card" }
  });
}
```

#### í¬ì¸íŠ¸ ì¶©ì „
- **ê²°ì œ ìˆ˜ë‹¨**: ì‹ ìš©ì¹´ë“œ, ê³„ì¢Œì´ì²´, ê°€ìƒê³„ì¢Œ
- **ì¶©ì „ ë‹¨ìœ„**: 1ë§Œì› ~ 100ë§Œì›
- **ë³´ë„ˆìŠ¤ í¬ì¸íŠ¸**: ì¶©ì „ ê¸ˆì•¡ì— ë”°ë¼ ì¶”ê°€ ì§€ê¸‰ (ì„ íƒ)
- **ì¶©ì „ ì´ë ¥**: ë‚ ì§œë³„, ê¸ˆì•¡ë³„ ì¡°íšŒ

**ê²°ì œ ëª¨ë“œ**:
- `PREPAID`: ì„ ë¶ˆ (í¬ì¸íŠ¸ ì¶©ì „ í›„ ì‚¬ìš©)
- `POSTPAID`: í›„ë¶ˆ (ì‚¬ìš© í›„ ê²°ì œ)

**íŠ¸ëœì­ì…˜ ìƒì„±**:
```typescript
{
  user_id: userId,
  type: "charge",
  amount: 50000,
  description: "í¬ì¸íŠ¸ ì¶©ì „",
  metadata: {
    paymentMethod: "card",
    orderId: "ORDER_12345",
    transactionType: "credit" // or "point"
  },
  status: "completed"
}
```

#### ê±°ë˜ ë‚´ì—­
- **ì „ì²´ ë‚´ì—­**: ì¶©ì „, ì‚¬ìš©, í™˜ë¶ˆ, ì˜ˆì•½
- **í•„í„°ë§**: ê¸°ê°„ë³„, íƒ€ì…ë³„
- **ì—‘ì…€ ë‹¤ìš´ë¡œë“œ**: ê±°ë˜ ë‚´ì—­ ë‚´ë³´ë‚´ê¸°
- **ì‹¤ì‹œê°„ ì”ì•¡**: íŠ¸ëœì­ì…˜ ê¸°ë°˜ ê³„ì‚°

**íŠ¸ëœì­ì…˜ ì¡°íšŒ API**:
```
GET /api/transactions?limit=50&offset=0
â†’ {
  transactions: [...],
  currentBalance: 50000,
  reservedAmount: 10000,
  availableBalance: 40000,
  total: 150
}
```

### 3.8 AI ê¸°ëŠ¥

#### OpenAI ì±„íŒ…
- **GPT-4 ëª¨ë¸**: ë§ˆì¼€íŒ… ì „ë¬¸ê°€ ì—­í• 
- **ì»¨í…ìŠ¤íŠ¸ ìœ ì§€**: ëŒ€í™” íˆìŠ¤í† ë¦¬ ê´€ë¦¬
- **ìŠ¤íŠ¸ë¦¬ë°**: ì‹¤ì‹œê°„ ì‘ë‹µ í‘œì‹œ
- **íƒ€ê²Ÿ ë§ˆì¼€íŒ… ì¶”ì²œ**: AI ê¸°ë°˜ ì „ëµ ì œì•ˆ

**ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸**:
```
ë‹¹ì‹ ì€ ë§ˆì¼€íŒ… ì „ë¬¸ê°€ì…ë‹ˆë‹¤.
ì‚¬ìš©ìì˜ ë¹„ì¦ˆë‹ˆìŠ¤ì— ë§ëŠ” íƒ€ê²Ÿ ë§ˆì¼€íŒ… ì „ëµì„ ì œì•ˆí•˜ì„¸ìš”.
- ì—°ë ¹ëŒ€, ì§€ì—­, ì—…ì¢… ë“± íƒ€ê²Ÿ ì¡°ê±´ ì¶”ì²œ
- íš¨ê³¼ì ì¸ ë©”ì‹œì§€ ì‘ì„±
- ì˜ˆì‚° ìµœì í™” ë°©ì•ˆ
```

**AI ì±„íŒ… API**:
```typescript
POST /api/ai/chat
{
  "messages": [
    { "role": "user", "content": "ì‹ë‹¹ í™ë³´ ë©”ì‹œì§€ ì‘ì„±í•´ì¤˜" }
  ]
}
â†’ {
  "response": "ì•ˆë…•í•˜ì„¸ìš”! ë§›ìˆëŠ” ìŒì‹ê³¼ ë”°ëœ»í•œ ë¶„ìœ„ê¸°ì˜ OOì‹ë‹¹ì…ë‹ˆë‹¤...",
  "suggestions": [...]
}
```

#### MMS ìƒì„±
- **DALL-E 3**: ì´ë¯¸ì§€ ìƒì„±
- **GPT-4**: ë©”ì‹œì§€ ì‘ì„±
- **ìë™ ì¡°í•©**: ì´ë¯¸ì§€ + ë©”ì‹œì§€ â†’ MMS
- **í…œí”Œë¦¿ ì €ì¥**: AI ìƒì„± í…œí”Œë¦¿ ìë™ ì €ì¥

**MMS ìƒì„± í”Œë¡œìš°**:
```
1. ì‚¬ìš©ìê°€ ì£¼ì œ ì…ë ¥ (ì˜ˆ: "í”¼ì í• ì¸ ì´ë²¤íŠ¸")
2. DALL-Eë¡œ ì´ë¯¸ì§€ ìƒì„±
3. GPT-4ë¡œ ë©”ì‹œì§€ ì‘ì„±
4. Supabase Storageì— ì´ë¯¸ì§€ ì €ì¥
5. í…œí”Œë¦¿ ì €ì¥ (is_ai_generated: true)
6. ë¯¸ë¦¬ë³´ê¸° í‘œì‹œ
```

**AI MMS API**:
```typescript
POST /api/ai/send-mms
{
  "prompt": "í”¼ì í• ì¸ ì´ë²¤íŠ¸",
  "targetAudience": "20-30ëŒ€ ì§ì¥ì¸",
  "businessType": "ì‹ë‹¹"
}
â†’ {
  "imageUrl": "https://...",
  "message": "ğŸ• í”¼ì í• ì¸ ì´ë²¤íŠ¸!...",
  "templateId": 123
}
```

#### ì´ë¯¸ì§€ í¸ì§‘
- **html2canvas**: ì›¹ ìº”ë²„ìŠ¤ â†’ ì´ë¯¸ì§€ ë³€í™˜
- **Sharp**: ì„œë²„ ì‚¬ì´ë“œ ì´ë¯¸ì§€ ì²˜ë¦¬
- **í•„í„° ì ìš©**: ë°ê¸°, ëŒ€ë¹„, ì±„ë„ ì¡°ì •
- **í…ìŠ¤íŠ¸ ì˜¤ë²„ë ˆì´**: ë©”ì‹œì§€ ì‚½ì…

## 4. ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ

### 4.1 í•µì‹¬ í…Œì´ë¸”

#### users (ì‚¬ìš©ì)
```sql
CREATE TABLE users (
  id SERIAL PRIMARY KEY,
  username VARCHAR(50) UNIQUE NOT NULL,
  email VARCHAR(255) UNIQUE NOT NULL,
  password VARCHAR(255) NOT NULL,
  name VARCHAR(100) NOT NULL,
  phone_number VARCHAR(20),
  role VARCHAR(20) DEFAULT 'USER', -- USER, ADVERTISER, SALESPERSON, ADMIN
  approval_status VARCHAR(20) DEFAULT 'PENDING', -- PENDING, APPROVED, REJECTED
  is_active BOOLEAN DEFAULT true,
  last_login_at TIMESTAMP,
  referral_code VARCHAR(20) UNIQUE,
  referred_by INTEGER REFERENCES users(id),
  payment_mode VARCHAR(20), -- PREPAID, POSTPAID

  -- JSONB í•„ë“œ
  company_info JSONB, -- {companyName, ceoName, businessNumber, ...}
  tax_invoice_info JSONB, -- {email, manager, contact}
  documents JSONB, -- {businessRegistration, employmentCertificate}
  agreement_info JSONB, -- {termsVersion, agreedAt, ...}

  -- SNS ì—°ë™
  kakao_user_id VARCHAR(255),
  naver_user_id VARCHAR(255),
  google_user_id VARCHAR(255),

  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

-- ì¸ë±ìŠ¤
CREATE INDEX idx_users_email ON users(email);
CREATE INDEX idx_users_username ON users(username);
CREATE INDEX idx_users_referral_code ON users(referral_code);
CREATE INDEX idx_users_role ON users(role);
```

#### transactions (íŠ¸ëœì­ì…˜)
```sql
CREATE TABLE transactions (
  id SERIAL PRIMARY KEY,
  user_id INTEGER NOT NULL REFERENCES users(id),
  type VARCHAR(20) NOT NULL, -- charge, usage, refund, penalty, reserve, unreserve
  amount INTEGER NOT NULL,
  description TEXT NOT NULL,
  reference_id VARCHAR(255),
  metadata JSONB, -- {transactionType, isReward, campaign_id, ...}
  status VARCHAR(20) DEFAULT 'pending', -- pending, completed, failed
  error_message TEXT,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

-- ì¸ë±ìŠ¤
CREATE INDEX idx_transactions_user_id ON transactions(user_id);
CREATE INDEX idx_transactions_type ON transactions(type);
CREATE INDEX idx_transactions_created_at ON transactions(created_at DESC);
```

#### campaigns (ìº í˜ì¸)
```sql
CREATE TABLE campaigns (
  id SERIAL PRIMARY KEY,
  user_id INTEGER NOT NULL REFERENCES users(id),
  name VARCHAR(255) NOT NULL,
  template_id INTEGER REFERENCES message_templates(id),
  status VARCHAR(50) DEFAULT 'PENDING_APPROVAL',

  -- ì˜ˆì‚° ê´€ë ¨
  budget INTEGER DEFAULT 0,
  campaign_budget INTEGER DEFAULT 0,
  daily_ad_spend_limit INTEGER,

  -- ë°œì†¡ ì •ì±…
  send_policy_type VARCHAR(20), -- realtime, batch
  validity_start_date DATE,
  validity_end_date DATE,
  scheduled_send_date DATE,
  scheduled_send_time TIME,

  -- íƒ€ê²Ÿ ì¡°ê±´
  target_age_groups TEXT[], -- ['20s', '30s', ...]
  target_locations_detailed JSONB, -- [{city, district, dong}, ...]
  card_amount_max INTEGER,
  card_time_start TIME,
  card_time_end TIME,
  target_industry_top_level VARCHAR(100),
  target_industry_specific VARCHAR(100),
  gender_ratio JSONB, -- {female: 50, male: 50}
  desired_recipients TEXT,

  -- ë¹„ìš© ë° ì˜ˆìƒ
  unit_cost INTEGER DEFAULT 0,
  estimated_total_cost INTEGER DEFAULT 0,

  -- ë°œì†¡ í˜„í™©
  total_recipients INTEGER DEFAULT 0,
  sent_count INTEGER DEFAULT 0,
  success_count INTEGER DEFAULT 0,
  failed_count INTEGER DEFAULT 0,

  -- ì „ë¬¸ê°€ ë¦¬ë·°
  expert_review_requested BOOLEAN DEFAULT false,
  expert_review_notes TEXT,

  -- ì¼ì •
  schedule_start_date TIMESTAMP,
  schedule_end_date TIMESTAMP,
  schedule_send_time_start TIME,
  schedule_send_time_end TIME,

  -- í…œí”Œë¦¿ ë‚´ìš©
  message_template TEXT,

  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

-- ì¸ë±ìŠ¤
CREATE INDEX idx_campaigns_user_id ON campaigns(user_id);
CREATE INDEX idx_campaigns_status ON campaigns(status);
CREATE INDEX idx_campaigns_created_at ON campaigns(created_at DESC);
```

#### message_templates (ë©”ì‹œì§€ í…œí”Œë¦¿)
```sql
CREATE TABLE message_templates (
  id SERIAL PRIMARY KEY,
  user_id INTEGER REFERENCES users(id),
  name VARCHAR(255) NOT NULL,
  content TEXT NOT NULL,
  image_url TEXT,
  category VARCHAR(50), -- AI_GENERATED, MARKETING, GENERAL
  template_code VARCHAR(100) UNIQUE,
  is_private BOOLEAN DEFAULT true,
  is_ai_generated BOOLEAN DEFAULT false,
  ai_model VARCHAR(50),
  usage_count INTEGER DEFAULT 0,
  buttons JSONB, -- [{id, text, linkType, url}, ...]
  is_active BOOLEAN DEFAULT true,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

-- ì¸ë±ìŠ¤
CREATE INDEX idx_message_templates_user_id ON message_templates(user_id);
CREATE INDEX idx_message_templates_category ON message_templates(category);
```

#### sender_numbers (ë°œì‹ ë²ˆí˜¸)
```sql
CREATE TABLE sender_numbers (
  id SERIAL PRIMARY KEY,
  user_id INTEGER NOT NULL REFERENCES users(id),
  phone_number VARCHAR(20) NOT NULL,
  display_name VARCHAR(100),
  is_default BOOLEAN DEFAULT false,
  is_user_phone BOOLEAN DEFAULT false,
  is_verified BOOLEAN DEFAULT false,
  status VARCHAR(20) DEFAULT 'ACTIVE', -- ACTIVE, INACTIVE
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

-- ì¸ë±ìŠ¤
CREATE INDEX idx_sender_numbers_user_id ON sender_numbers(user_id);
```

#### notifications (ì•Œë¦¼)
```sql
CREATE TABLE notifications (
  id SERIAL PRIMARY KEY,
  recipient_user_id INTEGER REFERENCES users(id),
  recipient_role VARCHAR(20),
  sender_user_id INTEGER REFERENCES users(id),
  title VARCHAR(255) NOT NULL,
  message TEXT NOT NULL,
  type VARCHAR(50) NOT NULL, -- CAMPAIGN_APPROVAL, POINT_CHARGE, ...
  action_url TEXT,
  is_read BOOLEAN DEFAULT false,
  read_at TIMESTAMP,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

-- ì¸ë±ìŠ¤
CREATE INDEX idx_notifications_recipient_user_id ON notifications(recipient_user_id);
CREATE INDEX idx_notifications_is_read ON notifications(is_read);
CREATE INDEX idx_notifications_created_at ON notifications(created_at DESC);
```

#### referrals (ì¶”ì²œì¸)
```sql
CREATE TABLE referrals (
  id SERIAL PRIMARY KEY,
  referrer_id INTEGER NOT NULL REFERENCES users(id),
  referred_user_id INTEGER NOT NULL REFERENCES users(id),
  referral_level INTEGER NOT NULL, -- 1 or 2
  status VARCHAR(20) DEFAULT 'ACTIVE',
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

-- ì¸ë±ìŠ¤
CREATE INDEX idx_referrals_referrer_id ON referrals(referrer_id);
CREATE INDEX idx_referrals_referred_user_id ON referrals(referred_user_id);
```

#### places (ì˜ˆì•½ ê³µê°„)
```sql
CREATE TABLE places (
  id SERIAL PRIMARY KEY,
  user_id INTEGER NOT NULL REFERENCES users(id),
  name VARCHAR(255) NOT NULL,
  description TEXT,
  price_per_hour INTEGER DEFAULT 0,
  images JSONB, -- [{url, order}, ...]
  is_active BOOLEAN DEFAULT true,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

-- ì¸ë±ìŠ¤
CREATE INDEX idx_places_user_id ON places(user_id);
```

#### bookings (ì˜ˆì•½)
```sql
CREATE TABLE bookings (
  id SERIAL PRIMARY KEY,
  place_id INTEGER NOT NULL REFERENCES places(id),
  user_id INTEGER NOT NULL REFERENCES users(id),
  customer_name VARCHAR(100) NOT NULL,
  customer_phone VARCHAR(20) NOT NULL,
  start_time TIMESTAMP NOT NULL,
  end_time TIMESTAMP NOT NULL,
  status VARCHAR(20) DEFAULT 'CONFIRMED', -- CONFIRMED, CANCELLED, COMPLETED
  total_price INTEGER DEFAULT 0,
  notes TEXT,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

-- ì¸ë±ìŠ¤
CREATE INDEX idx_bookings_place_id ON bookings(place_id);
CREATE INDEX idx_bookings_user_id ON bookings(user_id);
CREATE INDEX idx_bookings_start_time ON bookings(start_time);
```

#### scheduled_messages (ì˜ˆì•½ ë©”ì‹œì§€)
```sql
CREATE TABLE scheduled_messages (
  id SERIAL PRIMARY KEY,
  user_id INTEGER NOT NULL REFERENCES users(id),
  sender_number VARCHAR(20) NOT NULL,
  recipients JSONB NOT NULL, -- [{phone_number, name, variables}, ...]
  message TEXT NOT NULL,
  message_type VARCHAR(10), -- SMS, LMS, MMS
  scheduled_at TIMESTAMP NOT NULL,
  is_ad BOOLEAN DEFAULT false,
  image_file_ids TEXT[],
  status VARCHAR(20) DEFAULT 'PENDING', -- PENDING, SENT, FAILED
  sent_at TIMESTAMP,
  error_message TEXT,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

-- ì¸ë±ìŠ¤
CREATE INDEX idx_scheduled_messages_user_id ON scheduled_messages(user_id);
CREATE INDEX idx_scheduled_messages_scheduled_at ON scheduled_messages(scheduled_at);
CREATE INDEX idx_scheduled_messages_status ON scheduled_messages(status);
```

#### reservation_auto_rules (ì˜ˆì•½ ìë™ ë©”ì‹œì§€ ê·œì¹™)
```sql
CREATE TABLE reservation_auto_rules (
  id SERIAL PRIMARY KEY,
  user_id INTEGER NOT NULL REFERENCES users(id),
  space_id INTEGER REFERENCES places(id),
  trigger_type VARCHAR(50) NOT NULL, -- BOOKING_CONFIRMED, BOOKING_REMINDER, ...
  message_template_id INTEGER REFERENCES message_templates(id),
  is_active BOOLEAN DEFAULT true,
  send_timing_value INTEGER, -- ì˜ˆ: 2 (2ì‹œê°„ ì „)
  send_timing_unit VARCHAR(20), -- hours, days
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

-- ì¸ë±ìŠ¤
CREATE INDEX idx_reservation_auto_rules_user_id ON reservation_auto_rules(user_id);
CREATE INDEX idx_reservation_auto_rules_space_id ON reservation_auto_rules(space_id);
```

#### shared_calendars (ê³µìœ  ìº˜ë¦°ë”)
```sql
CREATE TABLE shared_calendars (
  id SERIAL PRIMARY KEY,
  user_id INTEGER NOT NULL REFERENCES users(id),
  space_id INTEGER NOT NULL REFERENCES places(id),
  token UUID UNIQUE NOT NULL DEFAULT gen_random_uuid(),
  name VARCHAR(255) NOT NULL,
  is_active BOOLEAN DEFAULT true,
  expires_at TIMESTAMP,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

-- ì¸ë±ìŠ¤
CREATE INDEX idx_shared_calendars_user_id ON shared_calendars(user_id);
CREATE INDEX idx_shared_calendars_token ON shared_calendars(token);
```

#### campaign_industries (ìº í˜ì¸ ì—…ì¢…)
```sql
CREATE TABLE campaign_industries (
  id SERIAL PRIMARY KEY,
  name VARCHAR(255) NOT NULL,
  parent_id INTEGER REFERENCES campaign_industries(id),
  level INTEGER NOT NULL, -- 1: ëŒ€ë¶„ë¥˜, 2: ì†Œë¶„ë¥˜
  display_order INTEGER DEFAULT 0,
  is_active BOOLEAN DEFAULT true,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

-- ì¸ë±ìŠ¤
CREATE INDEX idx_campaign_industries_parent_id ON campaign_industries(parent_id);
CREATE INDEX idx_campaign_industries_level ON campaign_industries(level);
```

#### custom_industries (ì»¤ìŠ¤í…€ ì—…ì¢…)
```sql
CREATE TABLE custom_industries (
  id SERIAL PRIMARY KEY,
  user_id INTEGER NOT NULL REFERENCES users(id),
  name VARCHAR(255) NOT NULL,
  description TEXT,
  is_active BOOLEAN DEFAULT true,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

-- ì¸ë±ìŠ¤
CREATE INDEX idx_custom_industries_user_id ON custom_industries(user_id);
```

#### pricing_settings (ê°€ê²© ì„¤ì •)
```sql
CREATE TABLE pricing_settings (
  id SERIAL PRIMARY KEY,
  industry_type VARCHAR(50) NOT NULL, -- OFFICIAL, CUSTOM
  industry_id INTEGER, -- campaign_industries.id or custom_industries.id
  message_type VARCHAR(10) NOT NULL, -- SMS, LMS, MMS
  unit_price INTEGER NOT NULL,
  is_active BOOLEAN DEFAULT true,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

-- ì¸ë±ìŠ¤
CREATE INDEX idx_pricing_settings_industry_type ON pricing_settings(industry_type);
CREATE INDEX idx_pricing_settings_message_type ON pricing_settings(message_type);
```

### 4.2 ê´€ê³„ë„

```
users (ì‚¬ìš©ì)
  â”œâ”€ 1:N â†’ transactions (íŠ¸ëœì­ì…˜)
  â”œâ”€ 1:N â†’ campaigns (ìº í˜ì¸)
  â”œâ”€ 1:N â†’ message_templates (í…œí”Œë¦¿)
  â”œâ”€ 1:N â†’ sender_numbers (ë°œì‹ ë²ˆí˜¸)
  â”œâ”€ 1:N â†’ notifications (ì•Œë¦¼)
  â”œâ”€ 1:N â†’ referrals (ì¶”ì²œì¸)
  â”œâ”€ 1:N â†’ places (ê³µê°„)
  â”œâ”€ 1:N â†’ bookings (ì˜ˆì•½)
  â”œâ”€ 1:N â†’ scheduled_messages (ì˜ˆì•½ ë©”ì‹œì§€)
  â”œâ”€ 1:N â†’ reservation_auto_rules (ìë™ ë©”ì‹œì§€ ê·œì¹™)
  â”œâ”€ 1:N â†’ shared_calendars (ê³µìœ  ìº˜ë¦°ë”)
  â””â”€ 1:N â†’ custom_industries (ì»¤ìŠ¤í…€ ì—…ì¢…)

campaigns (ìº í˜ì¸)
  â””â”€ N:1 â†’ message_templates (í…œí”Œë¦¿)

referrals (ì¶”ì²œì¸)
  â”œâ”€ N:1 â†’ users (referrer_id)
  â””â”€ N:1 â†’ users (referred_user_id)

bookings (ì˜ˆì•½)
  â”œâ”€ N:1 â†’ places (ê³µê°„)
  â””â”€ N:1 â†’ users (ì‚¬ìš©ì)

places (ê³µê°„)
  â”œâ”€ 1:N â†’ bookings (ì˜ˆì•½)
  â”œâ”€ 1:N â†’ reservation_auto_rules (ìë™ ë©”ì‹œì§€ ê·œì¹™)
  â””â”€ 1:N â†’ shared_calendars (ê³µìœ  ìº˜ë¦°ë”)

shared_calendars (ê³µìœ  ìº˜ë¦°ë”)
  â”œâ”€ N:1 â†’ users (ì‚¬ìš©ì)
  â””â”€ N:1 â†’ places (ê³µê°„)

reservation_auto_rules (ìë™ ë©”ì‹œì§€ ê·œì¹™)
  â”œâ”€ N:1 â†’ users (ì‚¬ìš©ì)
  â”œâ”€ N:1 â†’ places (ê³µê°„)
  â””â”€ N:1 â†’ message_templates (í…œí”Œë¦¿)

campaign_industries (ìº í˜ì¸ ì—…ì¢…)
  â””â”€ N:1 â†’ campaign_industries (parent_id) -- ìê¸° ì°¸ì¡°

pricing_settings (ê°€ê²© ì„¤ì •)
  â”œâ”€ N:1 â†’ campaign_industries (industry_id) -- industry_type='OFFICIAL'
  â””â”€ N:1 â†’ custom_industries (industry_id) -- industry_type='CUSTOM'
```

## 5. ë³´ì•ˆ ë° ì¸ì¦

### 5.1 JWT í† í° ê´€ë¦¬

**í† í° êµ¬ì¡°**:
```typescript
// ì•¡ì„¸ìŠ¤ í† í° payload
{
  userId: number,
  username: string,
  email: string,
  name: string,
  phoneNumber: string,
  role: string,
  approval_status: string,
  exp: number // 1ì‹œê°„
}

// ë¦¬í”„ë ˆì‹œ í† í° payload
{
  userId: number,
  username: string,
  email: string,
  name: string,
  phoneNumber: string,
  type: "refresh",
  exp: number // 7ì¼
}
```

**í† í° ì €ì¥**:
- localStorageì— ì €ì¥
- `accessToken`, `refreshToken` í‚¤ ì‚¬ìš©
- ì„œë²„ ì‚¬ì´ë“œì—ì„œëŠ” ì‚¬ìš© ë¶ˆê°€

**í† í° ê°±ì‹  ë¡œì§**:
```typescript
// 1. í† í° ë§Œë£Œ 5ë¶„ ì „ ìë™ ê°±ì‹ 
if (tokenManager.isTokenExpired(token)) {
  await refreshAccessToken();
}

// 2. 401 ì‘ë‹µ ì‹œ ìë™ ê°±ì‹  ë° ì¬ì‹œë„
if (response.status === 401) {
  const refreshed = await refreshAccessToken();
  if (refreshed) {
    // ì¬ì‹œë„
    return apiCall(endpoint, options, true);
  }
}
```

### 5.2 ê¶Œí•œ ê´€ë¦¬ (Role-based)

**ì—­í• **:
- `USER`: ì¼ë°˜ ì‚¬ìš©ì
- `ADVERTISER`: ê´‘ê³ ì£¼ (ìŠ¹ì¸ëœ ì‚¬ìš©ì)
- `SALESPERSON`: ì˜ì—…ì‚¬ì›
- `ADMIN`: ê´€ë¦¬ì

**RoleGuard ì»´í¬ë„ŒíŠ¸**:
```typescript
<RoleGuard allowedRoles={['ADMIN']}>
  <AdminDashboard />
</RoleGuard>
```

**API ë ˆë²¨ ê¶Œí•œ ê²€ì¦**:
```typescript
// validateAuthWithSuccess í•¨ìˆ˜ ì‚¬ìš©
const authResult = validateAuthWithSuccess(request);
if (!authResult.isValid) {
  return authResult.errorResponse;
}

const { role } = authResult.userInfo;
if (role !== 'ADMIN') {
  return NextResponse.json(
    { error: 'ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤' },
    { status: 403 }
  );
}
```

### 5.3 íŒŒì¼ ì—…ë¡œë“œ ì •ì±…

**Supabase Storage ë²„í‚·**:
- `public-files`: ê³µê°œ íŒŒì¼ (í…œí”Œë¦¿ ì´ë¯¸ì§€ ë“±)
- `private-files`: ë¹„ê³µê°œ íŒŒì¼ (ì‚¬ì—…ìë“±ë¡ì¦ ë“±)
- `user-uploads`: ì‚¬ìš©ì ì—…ë¡œë“œ íŒŒì¼

**RLS (Row Level Security)**:
```sql
-- ì‚¬ìš©ìëŠ” ìì‹ ì˜ íŒŒì¼ë§Œ ì½ê¸° ê°€ëŠ¥
CREATE POLICY "Users can read own files"
ON storage.objects FOR SELECT
USING (bucket_id = 'private-files' AND owner = auth.uid());

-- ê´€ë¦¬ìëŠ” ëª¨ë“  íŒŒì¼ ì½ê¸° ê°€ëŠ¥
CREATE POLICY "Admins can read all files"
ON storage.objects FOR SELECT
USING (bucket_id = 'private-files' AND is_admin());
```

**íŒŒì¼ í¬ê¸° ì œí•œ**:
- ì´ë¯¸ì§€: 10MB
- ë¬¸ì„œ: 5MB
- ì´ ì—…ë¡œë“œ: 50MB/ì¼

**í—ˆìš© íŒŒì¼ íƒ€ì…**:
- ì´ë¯¸ì§€: `image/jpeg`, `image/png`, `image/gif`
- ë¬¸ì„œ: `application/pdf`, `application/msword`

## 6. ì™¸ë¶€ ì„œë¹„ìŠ¤ ì—°ë™

### 6.1 Supabase
- **ë°ì´í„°ë² ì´ìŠ¤**: PostgreSQL
- **Storage**: íŒŒì¼ ì €ì¥ì†Œ
- **ì¸ì¦**: ì‚¬ìš© ì•ˆ í•¨ (ì»¤ìŠ¤í…€ JWT)
- **Realtime**: ì‚¬ìš© ì•ˆ í•¨ (í´ë§ ì‚¬ìš©)

**ì—°ê²° ì„¤ì •**:
```typescript
const supabase = createClient(
  process.env.NEXT_PUBLIC_SUPABASE_URL!,
  process.env.SUPABASE_SERVICE_ROLE_KEY!, // ì„œë²„ ì‚¬ì´ë“œë§Œ
  {
    db: { schema: "public" },
    auth: {
      autoRefreshToken: false,
      persistSession: false
    }
  }
);
```

### 6.2 Naver SENS (SMS/MMS)
- **ì„œë¹„ìŠ¤ ID**: NAVER_SENS_SERVICE_ID
- **ì•¡ì„¸ìŠ¤ í‚¤**: NAVER_ACCESS_KEY_ID
- **ì‹œí¬ë¦¿ í‚¤**: NAVER_SECRET_KEY

**API í˜¸ì¶œ**:
```typescript
const response = await fetch(
  `https://sens.apigw.ntruss.com/sms/v2/services/${serviceId}/messages`,
  {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json; charset=utf-8',
      'x-ncp-apigw-timestamp': timestamp,
      'x-ncp-iam-access-key': accessKey,
      'x-ncp-apigw-signature-v2': signature
    },
    body: JSON.stringify({
      type: 'SMS', // or 'LMS', 'MMS'
      from: senderNumber,
      content: message,
      messages: [{ to: recipientNumber }]
    })
  }
);
```

### 6.3 OpenAI
- **ëª¨ë¸**: GPT-4, DALL-E 3
- **API í‚¤**: OPENAI_API_KEY

**ì±„íŒ… API**:
```typescript
const completion = await openai.chat.completions.create({
  model: "gpt-4",
  messages: [
    { role: "system", content: "ë‹¹ì‹ ì€ ë§ˆì¼€íŒ… ì „ë¬¸ê°€ì…ë‹ˆë‹¤." },
    { role: "user", content: userMessage }
  ],
  temperature: 0.7
});
```

**ì´ë¯¸ì§€ ìƒì„± API**:
```typescript
const image = await openai.images.generate({
  model: "dall-e-3",
  prompt: userPrompt,
  n: 1,
  size: "1024x1024"
});
```

### 6.4 NicePay (ê²°ì œ)
- **ìš´ì˜ í‚¤**: ì‹¤ì œ ê²°ì œ ì²˜ë¦¬
- **í…ŒìŠ¤íŠ¸ ëª¨ë“œ**: ê°œë°œ/í…ŒìŠ¤íŠ¸ìš©

**ê²°ì œ ìš”ì²­**:
```typescript
const paymentData = {
  clientId: NICEPAY_CLIENT_ID,
  method: 'card',
  orderId: generateOrderId(),
  amount: chargeAmount,
  goodsName: 'í¬ì¸íŠ¸ ì¶©ì „',
  returnUrl: '/payment/success',
  mallUserId: userId
};

AUTHNICE.requestPay(paymentData);
```

### 6.5 ê³µê³µë°ì´í„° API
- **ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸ ê²€ì¦**: ODCLOUD_SERVICE_KEY

**ê²€ì¦ API**:
```typescript
const response = await fetch(
  `https://api.odcloud.kr/api/nts-businessman/v1/validate`,
  {
    method: 'POST',
    headers: {
      'Authorization': `Infuser ${serviceKey}`,
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({
      businesses: [{
        b_no: businessNumber,
        start_dt: startDate,
        p_nm: ceoName
      }]
    })
  }
);
```

## 7. ì„±ëŠ¥ ìµœì í™”

### 7.1 ìºì‹± ì „ëµ
- **ì‚¬ìš©ì ì •ë³´**: localStorage ìºì‹±
- **ì”ì•¡ ì •ë³´**: ë©”ëª¨ë¦¬ ìºì‹± (Context)
- **ì•Œë¦¼**: 30ì´ˆ í´ë§ + í˜ì´ì§€ ê°€ì‹œì„± ê¸°ë°˜ ìƒˆë¡œê³ ì¹¨
- **í† í°**: localStorage ìºì‹± + ìë™ ê°±ì‹ 

### 7.2 ì´ë¯¸ì§€ ìµœì í™”
- **Next.js Image**: ìë™ ìµœì í™”
- **WebP ë³€í™˜**: ìë™ ë³€í™˜
- **Lazy Loading**: ê¸°ë³¸ ì ìš©
- **Sharp**: ì„œë²„ ì‚¬ì´ë“œ ì´ë¯¸ì§€ ì²˜ë¦¬

### 7.3 API í˜¸ì¶œ ìµœì í™”
- **ë””ë°”ìš´ì‹±**: 1ì´ˆ ì´ë‚´ ì¤‘ë³µ í˜¸ì¶œ ë°©ì§€
- **ë°°ì¹˜ ì²˜ë¦¬**: ì—¬ëŸ¬ ìš”ì²­ì„ í•œë²ˆì— ì²˜ë¦¬
- **ì—ëŸ¬ ì¬ì‹œë„**: 401 ì‘ë‹µ ì‹œ ìë™ ì¬ì‹œë„
- **í´ë§**: 30ì´ˆ ê°„ê²© (ì•Œë¦¼, ì˜ˆì•½ ë“±)

### 7.4 ë°ì´í„°ë² ì´ìŠ¤ ìµœì í™”
- **ì¸ë±ìŠ¤**: ìì£¼ ì¡°íšŒë˜ëŠ” ì»¬ëŸ¼ì— ì¸ë±ìŠ¤ ì¶”ê°€
- **í˜ì´ì§€ë„¤ì´ì…˜**: ëŒ€ëŸ‰ ë°ì´í„° ì¡°íšŒ ì‹œ í˜ì´ì§€ë„¤ì´ì…˜
- **JSONB ì¸ë±ìŠ¤**: JSONB í•„ë“œì— GIN ì¸ë±ìŠ¤
- **ë³µí•© ì¸ë±ìŠ¤**: ì—¬ëŸ¬ ì»¬ëŸ¼ ì¡°í•© ì¸ë±ìŠ¤

## 8. ë°°í¬ ë° í™˜ê²½ ì„¤ì •

### 8.1 í™˜ê²½ ë³€ìˆ˜
```bash
# Supabase
NEXT_PUBLIC_SUPABASE_URL=https://xxx.supabase.co
SUPABASE_SERVICE_ROLE_KEY=xxx

# JWT
JWT_SECRET=xxx

# Naver SENS
NAVER_SENS_SERVICE_ID=xxx
NAVER_ACCESS_KEY_ID=xxx
NAVER_SECRET_KEY=xxx

# OpenAI
OPENAI_API_KEY=xxx

# ê³µê³µë°ì´í„° API
ODCLOUD_SERVICE_KEY=xxx

# NicePay
NICEPAY_CLIENT_ID=xxx
NICEPAY_SECRET_KEY=xxx

# ê¸°íƒ€
TEST_CALLING_NUMBER=010-1234-5678
NEXT_PUBLIC_BASE_URL=https://yourdomain.com
```

### 8.2 Vercel ë°°í¬
- **ìë™ ë°°í¬**: Git push ì‹œ ìë™ ë°°í¬
- **í™˜ê²½ ë³€ìˆ˜**: Vercel Dashboardì—ì„œ ì„¤ì •
- **Cron Jobs**: `vercel.json`ì— ì •ì˜

**vercel.json**:
```json
{
  "crons": [
    {
      "path": "/api/cron/send-scheduled-messages",
      "schedule": "* * * * *"
    }
  ]
}
```

### 8.3 ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜
- **ìˆ˜ë™ ë§ˆì´ê·¸ë ˆì´ì…˜**: Supabase SQL Editor ì‚¬ìš©
- **ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼**: `/migrations/` ë””ë ‰í† ë¦¬ì— ì €ì¥
- **ë²„ì „ ê´€ë¦¬**: íƒ€ì„ìŠ¤íƒ¬í”„ ê¸°ë°˜ íŒŒì¼ëª…

**ìµœê·¼ ë§ˆì´ê·¸ë ˆì´ì…˜**:
- `20250121_create_campaign_industries.sql`: ìº í˜ì¸ ì—…ì¢… í…Œì´ë¸” ìƒì„±
- `20250122_add_custom_industries.sql`: ì»¤ìŠ¤í…€ ì—…ì¢… í…Œì´ë¸” ì¶”ê°€
- `20250123_create_pricing_settings.sql`: ê°€ê²© ì„¤ì • í…Œì´ë¸” ìƒì„±

## 9. ìµœê·¼ ì—…ë°ì´íŠ¸ (Phase 2)

### 9.1 ìº í˜ì¸ ì—…ì¢… ê´€ë¦¬ ì‹œìŠ¤í…œ
- **ì •ì‹ ì—…ì¢… (campaign_industries)**: ê´€ë¦¬ìê°€ ê´€ë¦¬í•˜ëŠ” í‘œì¤€ ì—…ì¢…
  - ëŒ€ë¶„ë¥˜/ì†Œë¶„ë¥˜ êµ¬ì¡°
  - ê³„ì¸µí˜• ë°ì´í„° (parent_id)
  - í‘œì‹œ ìˆœì„œ ê´€ë¦¬ (display_order)

- **ì»¤ìŠ¤í…€ ì—…ì¢… (custom_industries)**: ì‚¬ìš©ìê°€ ì§ì ‘ ì…ë ¥í•œ ì—…ì¢…
  - ì‚¬ìš©ìë³„ ê°œë³„ ê´€ë¦¬
  - ì •ì‹ ì—…ì¢…ì— ì—†ëŠ” ìƒˆë¡œìš´ ì—…ì¢…

- **ì—…ì¢… ì„ íƒ ë¡œì§**:
  1. ì •ì‹ ì—…ì¢… ëª©ë¡ì—ì„œ ì„ íƒ
  2. ì—†ìœ¼ë©´ ì»¤ìŠ¤í…€ ì—…ì¢… ì§ì ‘ ì…ë ¥
  3. ê´€ë¦¬ìê°€ ì»¤ìŠ¤í…€ ì—…ì¢… ê²€í†  í›„ ì •ì‹ ì—…ì¢…ìœ¼ë¡œ ë“±ë¡ ê°€ëŠ¥

### 9.2 ì°¨ë“± ë‹¨ê°€ ì‹œìŠ¤í…œ
- **ì—…ì¢…ë³„ ë‹¨ê°€**: ì—…ì¢…ì— ë”°ë¼ ë‹¤ë¥¸ ë©”ì‹œì§€ ë‹¨ê°€ ì ìš©
- **ë©”ì‹œì§€ íƒ€ì…ë³„ ë‹¨ê°€**: SMS, LMS, MMS ê°ê° ë‹¤ë¥¸ ê°€ê²©
- **ì •ì‹ ì—…ì¢… vs ì»¤ìŠ¤í…€ ì—…ì¢…**: ë‹¤ë¥¸ ê°€ê²© ì •ì±… ì ìš© ê°€ëŠ¥

**pricing_settings í…Œì´ë¸”**:
```sql
pricing_settings (
  id, industry_type (OFFICIAL/CUSTOM),
  industry_id, message_type (SMS/LMS/MMS),
  unit_price, is_active,
  created_at, updated_at
)
```

**ë‹¨ê°€ ê³„ì‚° ë¡œì§**:
```typescript
// 1. ì—…ì¢… íƒ€ì… í™•ì¸ (ì •ì‹/ì»¤ìŠ¤í…€)
// 2. ë©”ì‹œì§€ íƒ€ì… í™•ì¸ (SMS/LMS/MMS)
// 3. pricing_settingsì—ì„œ ë‹¨ê°€ ì¡°íšŒ
// 4. ì˜ˆìƒ ì´ ë¹„ìš© = ë‹¨ê°€ Ã— ì˜ˆìƒ ìˆ˜ì‹ ì ìˆ˜
```

### 9.3 ìº í˜ì¸ ìƒì„± í”„ë¡œì„¸ìŠ¤ ê°œì„ 
- **ì—…ì¢… ì„ íƒ**: ì •ì‹ ì—…ì¢… ì„ íƒ ë˜ëŠ” ì»¤ìŠ¤í…€ ì—…ì¢… ì…ë ¥
- **ë‹¨ê°€ ì¡°íšŒ**: ì„ íƒí•œ ì—…ì¢…ì˜ ë‹¨ê°€ ìë™ ì¡°íšŒ
- **ë¹„ìš© ê³„ì‚°**: ì˜ˆìƒ ìˆ˜ì‹ ì ìˆ˜ Ã— ë‹¨ê°€ = ì˜ˆìƒ ì´ ë¹„ìš©
- **ì˜ˆì‚° ì˜ˆì•½**: ìº í˜ì¸ ìƒì„± ì‹œ ì˜ˆì‚° ì˜ˆì•½ (reserve íŠ¸ëœì­ì…˜)
- **ìŠ¹ì¸ í›„ ì°¨ê°**: ê´€ë¦¬ì ìŠ¹ì¸ í›„ ì‹¤ì œ ì°¨ê° (usage íŠ¸ëœì­ì…˜)

### 9.4 ê´€ë¦¬ì ê¸°ëŠ¥ ì¶”ê°€
- **ìº í˜ì¸ ì—…ì¢… ê´€ë¦¬**: `/admin/campaign-industries`
  - ì—…ì¢… ì¶”ê°€/ìˆ˜ì •/ì‚­ì œ
  - ëŒ€ë¶„ë¥˜/ì†Œë¶„ë¥˜ ê´€ë¦¬
  - í‘œì‹œ ìˆœì„œ ì¡°ì •

- **ìº í˜ì¸ ì„¤ì •**: `/admin/campaign-settings`
  - ì—…ì¢…ë³„ ë‹¨ê°€ ì„¤ì •
  - ë©”ì‹œì§€ íƒ€ì…ë³„ ê°€ê²© ê´€ë¦¬

- **ì»¤ìŠ¤í…€ ì—…ì¢… ê²€í† **:
  - ì‚¬ìš©ìê°€ ì…ë ¥í•œ ì»¤ìŠ¤í…€ ì—…ì¢… í™•ì¸
  - ì •ì‹ ì—…ì¢…ìœ¼ë¡œ ë“±ë¡ ì—¬ë¶€ ê²°ì •

## 10. ìœ ì§€ë³´ìˆ˜ ê°€ì´ë“œ

### 10.1 ë¡œê·¸ í™•ì¸
- **Vercel ë¡œê·¸**: ì‹¤ì‹œê°„ ë¡œê·¸ í™•ì¸
- **Supabase ë¡œê·¸**: SQL ì¿¼ë¦¬ ë¡œê·¸
- **ë¸Œë¼ìš°ì € ì½˜ì†”**: í´ë¼ì´ì–¸íŠ¸ ì—ëŸ¬

### 10.2 ì—ëŸ¬ ëª¨ë‹ˆí„°ë§
- **ì„œë²„ ì—ëŸ¬**: `console.error()` + Vercel ë¡œê·¸
- **í´ë¼ì´ì–¸íŠ¸ ì—ëŸ¬**: ë¸Œë¼ìš°ì € ì½˜ì†”

### 10.3 ë°±ì—…
- **ë°ì´í„°ë² ì´ìŠ¤**: Supabase ìë™ ë°±ì—… (ì¼ 1íšŒ)
- **íŒŒì¼**: Supabase Storage ìë™ ë°±ì—…

### 10.4 ì—…ë°ì´íŠ¸
- **Next.js**: `npm update next`
- **Supabase**: ìë™ ì—…ë°ì´íŠ¸
- **ì˜ì¡´ì„±**: `npm outdated` í™•ì¸ í›„ ì—…ë°ì´íŠ¸

---

## ìš”ì•½

MTS MessageëŠ” **Next.js 15 + Supabase + JWT ì¸ì¦**ì„ ê¸°ë°˜ìœ¼ë¡œ í•œ ì¢…í•© ë§ˆì¼€íŒ… í”Œë«í¼ì…ë‹ˆë‹¤.

**í•µì‹¬ ê¸°ëŠ¥**:
1. **ë©”ì‹œì§€ ë°œì†¡**: SMS/LMS/MMS ì¦‰ì‹œ/ì˜ˆì•½ ë°œì†¡
2. **AI íƒ€ê²Ÿ ë§ˆì¼€íŒ…**: OpenAI ê¸°ë°˜ ìº í˜ì¸ ìë™ ìƒì„±
3. **ì˜ˆì•½ ê´€ë¦¬**: ê³µê°„ ì˜ˆì•½ ë° ìë™ ë©”ì‹œì§€
4. **ë‹¤ì¤‘ ì—­í• **: ì¼ë°˜ ì‚¬ìš©ì, ê´‘ê³ ì£¼, ì˜ì—…ì‚¬ì›, ê´€ë¦¬ì
5. **ì¶”ì²œì¸ ì‹œìŠ¤í…œ**: 2ë‹¨ê³„ ìˆ˜ìˆ˜ë£Œ êµ¬ì¡°
6. **ê²°ì œ ì‹œìŠ¤í…œ**: NicePay ì—°ë™ í¬ì¸íŠ¸ ì¶©ì „
7. **ì—…ì¢…ë³„ ì°¨ë“± ë‹¨ê°€**: ì •ì‹ ì—…ì¢…/ì»¤ìŠ¤í…€ ì—…ì¢… ê´€ë¦¬

**ì•„í‚¤í…ì²˜ íŠ¹ì§•**:
- í´ë¼ì´ì–¸íŠ¸ëŠ” API Routesë¥¼ í†µí•´ì„œë§Œ ë°ì´í„° ì ‘ê·¼
- JWT í† í° ê¸°ë°˜ ì¸ì¦ (Supabase Auth ë¯¸ì‚¬ìš©)
- í´ë§ ê¸°ë°˜ ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ (30ì´ˆ ê°„ê²©)
- JSONB í•„ë“œë¥¼ í™œìš©í•œ ìœ ì—°í•œ ë°ì´í„° êµ¬ì¡°
- ì°¨ë“± ë‹¨ê°€ ì‹œìŠ¤í…œìœ¼ë¡œ ì—…ì¢…ë³„ ë‹¤ë¥¸ ê°€ê²© ì ìš©

**ë³´ì•ˆ**:
- Service Role KeyëŠ” ì„œë²„ ì‚¬ì´ë“œì—ì„œë§Œ ì‚¬ìš©
- ì—­í•  ê¸°ë°˜ ê¶Œí•œ ê´€ë¦¬ (RoleGuard)
- ìë™ í† í° ê°±ì‹  ë° ì¬ì‹œë„
- íŒŒì¼ ì—…ë¡œë“œ RLS ì •ì±…

**ìµœê·¼ ì—…ë°ì´íŠ¸ (Phase 2)**:
- ìº í˜ì¸ ì—…ì¢… ê´€ë¦¬ ì‹œìŠ¤í…œ (ì •ì‹/ì»¤ìŠ¤í…€)
- ì°¨ë“± ë‹¨ê°€ ì‹œìŠ¤í…œ (ì—…ì¢…ë³„/ë©”ì‹œì§€ íƒ€ì…ë³„)
- ê´€ë¦¬ì ì—…ì¢… ê´€ë¦¬ í˜ì´ì§€

ì´ ë¬¸ì„œëŠ” ì½”ë“œë² ì´ìŠ¤ì˜ ì „ì²´ì ì¸ êµ¬ì¡°ì™€ ì£¼ìš” ê¸°ëŠ¥ì„ ì´í•´í•˜ëŠ”ë° ë„ì›€ì´ ë  ê²ƒì…ë‹ˆë‹¤.
