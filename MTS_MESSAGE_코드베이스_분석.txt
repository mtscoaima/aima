# MTS Message í”„ë¡œì íŠ¸ ì½”ë“œë² ì´ìŠ¤ ë¶„ì„

## 1. í”„ë¡œì íŠ¸ ê°œìš”

### 1.1 ê¸°ìˆ  ìŠ¤íƒ
- **í”„ë ˆì„ì›Œí¬**: Next.js 15.3.2 (App Router)
- **ì–¸ì–´**: TypeScript
- **ë°ì´í„°ë² ì´ìŠ¤**: Supabase (PostgreSQL)
- **ì¸ì¦**: JWT ê¸°ë°˜ ì»¤ìŠ¤í…€ ì¸ì¦ (Supabase Auth ë¯¸ì‚¬ìš©)
- **ìŠ¤íƒ€ì¼ë§**: Tailwind CSS 4, CSS Modules
- **AI í†µí•©**: OpenAI API (GPT-4)
- **SMS/MMS**: Naver SENS API
- **ê²°ì œ**: NicePay (êµ¬ KGì´ë‹ˆì‹œìŠ¤)
- **ê¸°íƒ€**: React Chart.js, html2canvas, xlsx

### 1.2 ì•„í‚¤í…ì²˜ êµ¬ì¡°
```
í´ë¼ì´ì–¸íŠ¸ (React/Next.js)
    â†“ (API í˜¸ì¶œ)
API Routes (Next.js API)
    â†“ (Service Role Key)
Supabase (PostgreSQL + Storage)
    â†“
ì™¸ë¶€ ì„œë¹„ìŠ¤ (Naver SENS, OpenAI, NicePay, ê³µê³µë°ì´í„° API)
```

**í•µì‹¬ ì•„í‚¤í…ì²˜ ì›ì¹™**:
- í´ë¼ì´ì–¸íŠ¸ì—ì„œëŠ” Supabase ì§ì ‘ ì ‘ê·¼ ë¶ˆê°€
- ëª¨ë“  ë°ì´í„° ì‘ì—…ì€ API Routesë¥¼ í†µí•´ì„œë§Œ ìˆ˜í–‰
- Service Role KeyëŠ” ì„œë²„ ì‚¬ì´ë“œì—ì„œë§Œ ì‚¬ìš©
- JWT í† í° ê¸°ë°˜ ì¸ì¦ (ì•¡ì„¸ìŠ¤ í† í°: 1ì‹œê°„, ë¦¬í”„ë ˆì‹œ í† í°: 7ì¼)

## 2. ë””ë ‰í† ë¦¬ êµ¬ì¡°

### 2.1 /src/app/ (í˜ì´ì§€ ë° API)

#### ì£¼ìš” í˜ì´ì§€ ê·¸ë£¹:
- **ë£¨íŠ¸ (`/`)**: ëœë”© í˜ì´ì§€ (ì¼ë°˜ ì‚¬ìš©ììš©), ì˜ì—…ì‚¬ì› ëŒ€ì‹œë³´ë“œ
- **/admin/**: ê´€ë¦¬ì ì „ìš© í˜ì´ì§€ (ë³„ë„ ë ˆì´ì•„ì›ƒ)
  - campaigns, user-management, member-approval
  - point-charge-management, tax-invoices
  - customer-support, statistics, system-settings

- **/auth/**: ì¸ì¦ ê´€ë ¨ í˜ì´ì§€
  - login, signup, find-username, find-password
  - inicis (ë³¸ì¸ì¸ì¦ ì½œë°±)

- **/my-site/advertiser/**: ê´‘ê³ ì£¼ ë§ˆì´í˜ì´ì§€
  - dashboard, profile, business-verification

- **/salesperson/**: ì˜ì—…ì‚¬ì› ì „ìš© í˜ì´ì§€
  - invite, referrals, organization, profile

- **/messages/**: ë©”ì‹œì§€ ë°œì†¡ í˜ì´ì§€
  - send (SMS/MMS ë°œì†¡)

- **/target-marketing/**: AI íƒ€ê²Ÿ ë§ˆì¼€íŒ… í˜ì´ì§€

- **/reservations/**: ì˜ˆì•½ ê´€ë¦¬ ì‹œìŠ¤í…œ
  - calendar (ìŠ¤ë§ˆíŠ¸ ìº˜ë¦°ë”), places (ê³µê°„ ê´€ë¦¬)
  - list, create, edit, detail
  - message (ìë™ ë©”ì‹œì§€), payments
  - calendar/shared (ê³µìœ  ìº˜ë¦°ë”)

- **/credit-management/**: í¬ì¸íŠ¸ ì¶©ì „ ë° ê´€ë¦¬
- **/payment/**: ê²°ì œ ì„±ê³µ/ì‹¤íŒ¨ í˜ì´ì§€
- **/support/**: ê³ ê°ì§€ì› (ê³µì§€ì‚¬í•­, FAQ, 1:1 ë¬¸ì˜)

#### API Routes (142ê°œ ì—”ë“œí¬ì¸íŠ¸):

**ì¸ì¦ ê´€ë ¨** (`/api/auth/`):
- `check-email`, `check-username`: ì¤‘ë³µ í™•ì¸
- `google-*`, `kakao-*`, `naver-*`: ì†Œì…œ ë¡œê·¸ì¸ (auth-url, login, signup, token)
- `inicis-auth/*`: KGì´ë‹ˆì‹œìŠ¤ ë³¸ì¸ì¸ì¦ (request, callback, result)
- `send-verification`: ì´ë©”ì¼ ì¸ì¦
- `find-username`, `find-password`: ê³„ì • ì°¾ê¸°
- `validate-referral`, `validate-referrer`: ì¶”ì²œì¸ ê²€ì¦

**ì‚¬ìš©ì ê´€ë¦¬** (`/api/users/`):
- `login`, `signup`, `refresh`: ì¸ì¦
- `me`: ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ/ìˆ˜ì •
- `change-password`, `withdraw`: ë¹„ë°€ë²ˆí˜¸ ë³€ê²½, íšŒì› íƒˆí‡´
- `signup-with-files`: íŒŒì¼ í¬í•¨ íšŒì›ê°€ì…
- `update-referral-views`: ì¶”ì²œì¸ ì¡°íšŒìˆ˜ ì—…ë°ì´íŠ¸

**ë©”ì‹œì§€ ë°œì†¡** (`/api/messages/`, `/api/message/`):
- `send`: ì¦‰ì‹œ/ì˜ˆì•½ ë°œì†¡
- `scheduled`: ì˜ˆì•½ ë©”ì‹œì§€ ì¡°íšŒ
- `scheduled-send-check`: ì˜ˆì•½ ë°œì†¡ ì²´í¬ (Cron)
- `templates/*`: í…œí”Œë¦¿ CRUD
- `upload-image`: ì´ë¯¸ì§€ ì—…ë¡œë“œ

**ìº í˜ì¸ ê´€ë¦¬** (`/api/campaigns/`):
- `GET/POST`: ìº í˜ì¸ ëª©ë¡ ì¡°íšŒ/ìƒì„±
- `[id]`: ìƒì„¸ ì¡°íšŒ/ìˆ˜ì •/ì‚­ì œ
- `[id]/rejection`: ê±°ì ˆ ì‚¬ìœ  ì¡°íšŒ
- `ad-costs`: ê´‘ê³ ë¹„ ê³„ì‚°

**ê´€ë¦¬ì ê¸°ëŠ¥** (`/api/admin/`):
- `campaigns/*`: ìº í˜ì¸ ìŠ¹ì¸/ê±°ë¶€/ì¼ì‹œì •ì§€/ì‹œì‘
- `users/*`: ì‚¬ìš©ì ê´€ë¦¬ (ì¼ê´„ ì‘ì—…, ì¶©ì „, ë¹„ë°€ë²ˆí˜¸ ì´ˆê¸°í™”, ì—‘ì…€ ë‚´ë³´ë‚´ê¸°)
- `point-charge/*`: í¬ì¸íŠ¸ ì¶©ì „ ê´€ë¦¬ (ê°œë³„/ì¼ê´„)
- `tax-invoices/*`: ì„¸ê¸ˆê³„ì‚°ì„œ ê´€ë¦¬
- `inquiries/*`: ë¬¸ì˜ ê´€ë¦¬ ë° ë‹µë³€
- `terms/*`: ì•½ê´€ ê´€ë¦¬
- `system-settings`: ì‹œìŠ¤í…œ ì„¤ì •
- `companies`: ì‚¬ì—…ì ì •ë³´ ì¡°íšŒ
- `grade-settings`, `grade-history`: ë“±ê¸‰ ê´€ë¦¬

**íŠ¸ëœì­ì…˜** (`/api/transactions/`):
- `GET`: ê±°ë˜ ë‚´ì—­ ì¡°íšŒ
- `POST`: íŠ¸ëœì­ì…˜ ìƒì„± (ì¶©ì „, ì‚¬ìš©, í™˜ë¶ˆ, ì˜ˆì•½)

**ê²°ì œ** (`/api/payment/`):
- `charge`: NicePay ê²°ì œ
- `verify`: ê²°ì œ ê²€ì¦
- `fail`, `cancel`: ê²°ì œ ì‹¤íŒ¨/ì·¨ì†Œ

**AI ê¸°ëŠ¥** (`/api/ai/`):
- `chat`: OpenAI ì±„íŒ…
- `send-mms`: AI MMS ìƒì„±

**ì˜ˆì•½ ì‹œìŠ¤í…œ** (`/api/reservations/`):
- `places/*`: ê³µê°„ CRUD
- `bookings/*`: ì˜ˆì•½ CRUD
- `messages/*`: ìë™ ë©”ì‹œì§€ ì„¤ì •
- `statistics`: ì˜ˆì•½ í†µê³„
- `payments/*`: ì˜ˆì•½ ê²°ì œ ê´€ë¦¬

**ê¸°íƒ€**:
- `/api/sender-numbers/*`: ë°œì‹ ë²ˆí˜¸ ê´€ë¦¬
- `/api/address-book/*`: ì£¼ì†Œë¡ (ê·¸ë£¹, ì—°ë½ì²˜)
- `/api/notifications/*`: ì•Œë¦¼ ê´€ë¦¬
- `/api/faqs/*`, `/api/announcements/*`: FAQ, ê³µì§€ì‚¬í•­
- `/api/inquiries/*`: 1:1 ë¬¸ì˜
- `/api/locations/*`: ì§€ì—­ ë°ì´í„° (ì‹œ/êµ¬/ë™)
- `/api/industries/*`, `/api/nts-industries/*`: ì—…ì¢… ë°ì´í„°
- `/api/referrals/*`, `/api/rewards/*`, `/api/settlements/*`: ì¶”ì²œì¸ ì‹œìŠ¤í…œ
- `/api/business-verification/*`: ì‚¬ì—…ì ì¸ì¦
- `/api/cron/*`: Cron ì‘ì—… (ì˜ˆì•½ ë©”ì‹œì§€ ë°œì†¡)

### 2.2 /src/components/ (ì»´í¬ë„ŒíŠ¸)

```
components/
â”œâ”€â”€ admin/                    # ê´€ë¦¬ì ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ AdminHeader.tsx
â”‚   â””â”€â”€ AdminSidebar.tsx
â”œâ”€â”€ approval/                 # ìŠ¹ì¸ ê´€ë ¨
â”œâ”€â”€ campaigns/                # ìº í˜ì¸ ì»´í¬ë„ŒíŠ¸
â”œâ”€â”€ common/                   # ê³µí†µ ì»´í¬ë„ŒíŠ¸
â”œâ”€â”€ credit/                   # í¬ë ˆë”§ ê´€ë ¨
â”‚   â”œâ”€â”€ CreditHistory.tsx
â”‚   â””â”€â”€ PaymentNoticeModal.tsx
â”œâ”€â”€ history/                  # ì´ë ¥ ê´€ë ¨
â”œâ”€â”€ messages/                 # ë©”ì‹œì§€ ì»´í¬ë„ŒíŠ¸
â”œâ”€â”€ modals/                   # ëª¨ë‹¬ ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ SaveTemplateModal.tsx
â”‚   â”œâ”€â”€ RejectionReasonModal.tsx
â”‚   â”œâ”€â”€ DateRangeModal.tsx
â”‚   â””â”€â”€ TemplateModal.tsx
â”œâ”€â”€ profile/                  # í”„ë¡œí•„ ê´€ë ¨
â”‚   â”œâ”€â”€ BusinessInfoTab.tsx
â”‚   â”œâ”€â”€ PasswordTab.tsx
â”‚   â””â”€â”€ TaxInvoiceTab.tsx
â”œâ”€â”€ salesperson/              # ì˜ì—…ì‚¬ì› ì»´í¬ë„ŒíŠ¸
â”‚   â””â”€â”€ SalespersonDashboard.tsx
â”œâ”€â”€ signup/                   # íšŒì›ê°€ì… ì»´í¬ë„ŒíŠ¸
â”œâ”€â”€ support/                  # ê³ ê°ì§€ì› ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ AnnouncementTab.tsx
â”‚   â”œâ”€â”€ FaqTab.tsx
â”‚   â””â”€â”€ ContactTab.tsx
â”œâ”€â”€ target-marketing/         # íƒ€ê²Ÿ ë§ˆì¼€íŒ… ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ NumberedParagraph.tsx
â”‚   â””â”€â”€ StructuredRecommendationTable.tsx
â”œâ”€â”€ terms/                    # ì•½ê´€ ì»´í¬ë„ŒíŠ¸
â”œâ”€â”€ Layout.tsx                # ë©”ì¸ ë ˆì´ì•„ì›ƒ
â”œâ”€â”€ Navigation.tsx            # ë„¤ë¹„ê²Œì´ì…˜
â”œâ”€â”€ Footer.tsx                # í‘¸í„°
â”œâ”€â”€ RoleGuard.tsx             # ê¶Œí•œ ê°€ë“œ
â”œâ”€â”€ Pagination.tsx            # í˜ì´ì§€ë„¤ì´ì…˜
â”œâ”€â”€ ConfirmDialog.tsx         # í™•ì¸ ë‹¤ì´ì–¼ë¡œê·¸
â”œâ”€â”€ SuccessModal.tsx          # ì„±ê³µ ëª¨ë‹¬
â”œâ”€â”€ AnnouncementModal.tsx     # ê³µì§€ì‚¬í•­ ëª¨ë‹¬
â””â”€â”€ TermsModal.tsx            # ì•½ê´€ ëª¨ë‹¬
```

### 2.3 /src/contexts/ (ìƒíƒœ ê´€ë¦¬)

#### AuthContext.tsx
- ì‚¬ìš©ì ì¸ì¦ ìƒíƒœ ê´€ë¦¬
- JWT í† í° ê´€ë¦¬ (ì•¡ì„¸ìŠ¤/ë¦¬í”„ë ˆì‹œ)
- ìë™ í† í° ê°±ì‹  (50ë¶„ë§ˆë‹¤)
- ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ìºì‹±
- ì†Œì…œ ë¡œê·¸ì¸ ì§€ì›

**ì£¼ìš” ê¸°ëŠ¥**:
```typescript
- login(loginData): ë¡œê·¸ì¸
- signup(signupData): íšŒì›ê°€ì…
- logout(): ë¡œê·¸ì•„ì›ƒ
- checkAuth(): ì¸ì¦ ìƒíƒœ í™•ì¸
- refreshAccessToken(): í† í° ê°±ì‹ 
- getAccessToken(): ìœ íš¨í•œ í† í° ë°˜í™˜
```

#### BalanceContext.tsx
- ê´‘ê³ ë¨¸ë‹ˆ ë° í¬ì¸íŠ¸ ì”ì•¡ ê´€ë¦¬
- íŠ¸ëœì­ì…˜ ë‚´ì—­ ê´€ë¦¬
- ì˜ˆì•½ ê¸ˆì•¡ ê³„ì‚°
- ì‹¤ì‹œê°„ ì”ì•¡ ì—…ë°ì´íŠ¸

**ì£¼ìš” ê¸°ëŠ¥**:
```typescript
- calculateBalance(): ê´‘ê³ ë¨¸ë‹ˆ ì”ì•¡ ê³„ì‚°
- calculatePoints(): í¬ì¸íŠ¸ ì”ì•¡ ê³„ì‚°
- getReservedAmount(): ì˜ˆì•½ ê¸ˆì•¡ ì¡°íšŒ
- getAvailableBalance(): ì‚¬ìš© ê°€ëŠ¥ ì”ì•¡ ê³„ì‚°
- addTransaction(): íŠ¸ëœì­ì…˜ ì¶”ê°€
- refreshTransactions(): íŠ¸ëœì­ì…˜ ìƒˆë¡œê³ ì¹¨
```

**íŠ¸ëœì­ì…˜ íƒ€ì…**:
- `charge`: ì¶©ì „
- `usage`: ì‚¬ìš©
- `refund`: í™˜ë¶ˆ
- `penalty`: íŒ¨ë„í‹°
- `reserve`: ì˜ˆì•½
- `unreserve`: ì˜ˆì•½ í•´ì œ

#### NotificationContext.tsx
- ì•Œë¦¼ ê´€ë¦¬ (30ì´ˆ í´ë§)
- ì½ìŒ/ì•ˆ ì½ìŒ ì²˜ë¦¬
- í˜ì´ì§€ ê°€ì‹œì„± ë³€ê²½ ì‹œ ìë™ ìƒˆë¡œê³ ì¹¨

**ì£¼ìš” ê¸°ëŠ¥**:
```typescript
- fetchNotifications(page, unreadOnly): ì•Œë¦¼ ì¡°íšŒ
- markAsRead(notificationId): ì½ìŒ ì²˜ë¦¬
- markAllAsRead(): ì „ì²´ ì½ìŒ ì²˜ë¦¬
- refreshNotifications(): ìƒˆë¡œê³ ì¹¨
```

### 2.4 /src/lib/ (ë¼ì´ë¸ŒëŸ¬ë¦¬)

- **api.ts**: API í˜¸ì¶œ í•¨ìˆ˜, í† í° ê´€ë¦¬
- **supabase.ts**: ì‹¤ì‹œê°„ êµ¬ë… (í´ë§ ê¸°ë°˜)
- **storage.ts**: Supabase Storage ê´€ë ¨
- **utils.ts**: ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ (ë‚ ì§œ, ì½”ë“œ ìƒì„± ë“±)
- **seedCrypto.ts**: ì•”í˜¸í™” ê´€ë ¨
- **targetOptions.ts**: íƒ€ê²Ÿ ë§ˆì¼€íŒ… ì˜µì…˜
- **messageSender.ts**: ë©”ì‹œì§€ ë°œì†¡ ë¡œì§ (Naver SENS)

### 2.5 /src/hooks/ (ì»¤ìŠ¤í…€ í›…)

- **useNotifications.tsx**: ì•Œë¦¼ ê´€ë ¨ í›…
- **useNotificationUtils.tsx**: ì•Œë¦¼ ìœ í‹¸ë¦¬í‹° í›…

### 2.6 /src/types/ (íƒ€ì… ì •ì˜)

- **inquiry.ts**: ë¬¸ì˜ íƒ€ì…
- **targetMarketing.ts**: íƒ€ê²Ÿ ë§ˆì¼€íŒ… íƒ€ì…
- **user.ts**: ì‚¬ìš©ì íƒ€ì… (íŒŒì¼ ì—†ìŒ, lib/api.tsì— ì •ì˜)

### 2.7 /src/utils/ (ìœ í‹¸ë¦¬í‹°)

- **formatUtils.ts**: í¬ë§·íŒ… í•¨ìˆ˜
- **idUtils.ts**: ID ê´€ë ¨ ìœ í‹¸ë¦¬í‹°
- **validationUtils.ts**: ìœ íš¨ì„± ê²€ì¦
- **smsNotification.ts**: SMS ì•Œë¦¼
- **messageVariables.ts**: ë©”ì‹œì§€ ë³€ìˆ˜ ì¹˜í™˜
- **authUtils.ts**: ì¸ì¦ ìœ í‹¸ë¦¬í‹°

### 2.8 /src/services/ (ì„œë¹„ìŠ¤)

- **uploadService.ts**: íŒŒì¼ ì—…ë¡œë“œ
- **templateService.ts**: í…œí”Œë¦¿ ì„œë¹„ìŠ¤
- **aiService.ts**: AI ì„œë¹„ìŠ¤ (OpenAI)
- **creditService.ts**: í¬ë ˆë”§ ì„œë¹„ìŠ¤

## 3. ì£¼ìš” ê¸°ëŠ¥ ìƒì„¸ ë¶„ì„

### 3.1 ì¸ì¦ ì‹œìŠ¤í…œ

#### JWT ê¸°ë°˜ ì¸ì¦
- **ì•¡ì„¸ìŠ¤ í† í°**: 1ì‹œê°„ ë§Œë£Œ
- **ë¦¬í”„ë ˆì‹œ í† í°**: 7ì¼ ë§Œë£Œ
- ìë™ í† í° ê°±ì‹  (5ë¶„ ë²„í¼)
- 401 ì‘ë‹µ ì‹œ ìë™ ì¬ì‹œë„

**ì¸ì¦ í”Œë¡œìš°**:
```
1. ë¡œê·¸ì¸ â†’ ì„œë²„ì—ì„œ JWT ìƒì„±
2. í† í°ì„ localStorageì— ì €ì¥
3. API í˜¸ì¶œ ì‹œ Authorization í—¤ë”ì— í† í° í¬í•¨
4. í† í° ë§Œë£Œ ì „ ìë™ ê°±ì‹ 
5. ë¦¬í”„ë ˆì‹œ í† í°ë„ ë§Œë£Œ ì‹œ ë¡œê·¸ì•„ì›ƒ
```

#### ì†Œì…œ ë¡œê·¸ì¸
- **Google**: OAuth 2.0
- **Kakao**: Kakao Login
- **Naver**: Naver Login

**ì†Œì…œ ë¡œê·¸ì¸ í”Œë¡œìš°**:
```
1. ê° í”Œë«í¼ì˜ auth-url í˜¸ì¶œ
2. ì‚¬ìš©ìê°€ ì†Œì…œ í”Œë«í¼ì—ì„œ ì¸ì¦
3. ì½œë°±ìœ¼ë¡œ code ë°›ìŒ
4. codeë¡œ token êµí™˜
5. tokenìœ¼ë¡œ ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ
6. ê¸°ì¡´ ê³„ì • ì—°ë™ ë˜ëŠ” ì‹ ê·œ ê°€ì…
```

#### ë¹„ì¦ˆë‹ˆìŠ¤ ì¸ì¦
- **ê³µê³µë°ì´í„° API**: ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸ ê²€ì¦
- **KGì´ë‹ˆì‹œìŠ¤**: ë³¸ì¸ì¸ì¦
- ì¸ì¦ ì„±ê³µ ì‹œ `approval_status` ì—…ë°ì´íŠ¸

**ì½”ë“œ ì˜ˆì‹œ** (ë¡œê·¸ì¸):
```typescript
// /api/users/login/route.ts
const accessToken = jwt.sign(
  { userId, username, email, name, phoneNumber, role },
  JWT_SECRET,
  { expiresIn: "1h" }
);

const refreshToken = jwt.sign(
  { userId, username, email, name, phoneNumber, type: "refresh" },
  JWT_SECRET,
  { expiresIn: "7d" }
);
```

### 3.2 ë©”ì‹œì§€ ë°œì†¡ ì‹œìŠ¤í…œ

#### SMS/LMS/MMS ë°œì†¡
- **ì¦‰ì‹œ ë°œì†¡**: ì‹¤ì‹œê°„ Naver SENS API í˜¸ì¶œ
- **ì˜ˆì•½ ë°œì†¡**: DBì— ì €ì¥ í›„ Cronìœ¼ë¡œ ì²˜ë¦¬
- **ë‹¤ì¤‘ ìˆ˜ì‹ ì**: ë°°ì—´ë¡œ ì „ë‹¬
- **ì¹˜í™˜ ë¬¸êµ¬**: `#[ë³€ìˆ˜ëª…]` í˜•ì‹

**ì§€ì› ë³€ìˆ˜**:
- ìˆ˜ì‹ ì: `#[ì´ë¦„]`, `#[ì „í™”ë²ˆí˜¸]`, `#[ê·¸ë£¹ëª…]`
- ë°œì‹ ì: `#[ë°œì‹ ìëª…]`, `#[íšŒì‚¬ëª…]`
- ë‚ ì§œ/ì‹œê°„: `#[ì˜¤ëŠ˜ë‚ ì§œ]`, `#[í˜„ì¬ì‹œê°]`
- ì»¤ìŠ¤í…€: ì‚¬ìš©ì ì •ì˜ ë³€ìˆ˜

**ë©”ì‹œì§€ íƒ€ì… ìë™ ê²°ì •**:
```typescript
- ë¬¸ìë§Œ: SMS (90byte ì´í•˜) / LMS (90byte ì´ˆê³¼)
- ì´ë¯¸ì§€ í¬í•¨: MMS
```

**ë°œì†¡ API ì˜ˆì‹œ**:
```typescript
POST /api/messages/send
{
  "recipients": [
    {
      "phone_number": "010-1234-5678",
      "name": "í™ê¸¸ë™",
      "variables": { "ì¿ í°ë²ˆí˜¸": "ABC123" }
    }
  ],
  "message": "#[ì´ë¦„]ë‹˜, ì¿ í°ë²ˆí˜¸ #[ì¿ í°ë²ˆí˜¸]ë¡œ í• ì¸ë°›ìœ¼ì„¸ìš”!",
  "sendType": "immediate", // or "scheduled"
  "scheduledAt": "2025-10-22T10:00:00Z",
  "isAd": true,
  "imageFileIds": ["file-id-1"]
}
```

#### í…œí”Œë¦¿ ê´€ë¦¬
- **ê³µê°œ/ë¹„ê³µê°œ**: ë‹¤ë¥¸ ì‚¬ìš©ìì™€ ê³µìœ  ê°€ëŠ¥
- **ì¹´í…Œê³ ë¦¬**: ì¼ë°˜, ë§ˆì¼€íŒ…, AI ìƒì„± ë“±
- **ì‚¬ìš© íšŸìˆ˜**: ìë™ ì¶”ì 
- **ì´ë¯¸ì§€ ì²¨ë¶€**: Supabase Storage í™œìš©

**í…œí”Œë¦¿ í…Œì´ë¸” êµ¬ì¡°**:
```sql
message_templates (
  id, user_id, name, content, image_url,
  category, is_private, is_ai_generated,
  usage_count, buttons (JSONB), ...
)
```

#### ì˜ˆì•½ ë°œì†¡ ìë™í™”
- **Cron Job**: `/api/cron/send-scheduled-messages`
- **ì‹¤í–‰ ì£¼ê¸°**: Vercel Cron (ë§¤ë¶„ ì‹¤í–‰)
- **ì²˜ë¦¬ ë¡œì§**:
  1. `scheduled_messages` í…Œì´ë¸”ì—ì„œ ë°œì†¡ ëŒ€ê¸° ì¡°íšŒ
  2. í˜„ì¬ ì‹œê°„ ì´í›„ ë©”ì‹œì§€ í•„í„°ë§
  3. Naver SENS API í˜¸ì¶œ
  4. ì„±ê³µ/ì‹¤íŒ¨ ìƒíƒœ ì—…ë°ì´íŠ¸
  5. íŠ¸ëœì­ì…˜ ìƒì„± (í¬ë ˆë”§ ì°¨ê°)

**ë°œì‹ ë²ˆí˜¸ ê´€ë¦¬**:
- ì‚¬ìš©ìë³„ ì—¬ëŸ¬ ë°œì‹ ë²ˆí˜¸ ë“±ë¡ ê°€ëŠ¥
- ê¸°ë³¸ ë°œì‹ ë²ˆí˜¸ ì„¤ì •
- ë¡œê·¸ì¸ ì‹œ ë³¸ì¸ ì „í™”ë²ˆí˜¸ ìë™ ë“±ë¡

### 3.3 ìº í˜ì¸ ê´€ë¦¬

#### ìº í˜ì¸ ìƒì„± í”Œë¡œìš°
```
1. AI íƒ€ê²Ÿ ë§ˆì¼€íŒ… í˜ì´ì§€ì—ì„œ ì¡°ê±´ ì„¤ì •
   - ì—°ë ¹ëŒ€, ì§€ì—­, ì—…ì¢…, ì¹´ë“œ ê²°ì œ ì¡°ê±´ ë“±
2. OpenAIë¡œ ë©”ì‹œì§€ ë° ì´ë¯¸ì§€ ìƒì„±
3. ì˜ˆìƒ ë¹„ìš© ê³„ì‚°
4. ìº í˜ì¸ ìƒì„± (PENDING_APPROVAL ìƒíƒœ)
5. í¬ì¸íŠ¸/ê´‘ê³ ë¨¸ë‹ˆ ì˜ˆì•½ (reserve íŠ¸ëœì­ì…˜)
6. ê´€ë¦¬ì ìŠ¹ì¸ ëŒ€ê¸°
```

#### ìº í˜ì¸ ìƒíƒœ
- `PENDING_APPROVAL`: ìŠ¹ì¸ ëŒ€ê¸°
- `APPROVED`: ìŠ¹ì¸ë¨
- `REJECTED`: ê±°ë¶€ë¨
- `RUNNING`: ì‹¤í–‰ ì¤‘
- `PAUSED`: ì¼ì‹œì •ì§€
- `COMPLETED`: ì™„ë£Œ
- `CANCELLED`: ì·¨ì†Œë¨

#### ìŠ¹ì¸ ì›Œí¬í”Œë¡œìš°
```
ì‚¬ìš©ì ìƒì„± â†’ ê´€ë¦¬ì ìŠ¹ì¸ â†’ ìë™ ë°œì†¡ ì‹œì‘
              â†“ (ê±°ë¶€)
            ê±°ë¶€ ì‚¬ìœ  ì…ë ¥ â†’ ì‚¬ìš©ìì—ê²Œ ì•Œë¦¼
```

**ê´€ë¦¬ì ìŠ¹ì¸ API**:
```
POST /api/admin/campaigns/[id]/approve
PUT /api/admin/campaigns/[id]/reject
POST /api/admin/campaigns/[id]/start
POST /api/admin/campaigns/[id]/pause
```

#### íƒ€ê²Ÿ ë§ˆì¼€íŒ… ì¡°ê±´
- **ì—°ë ¹ëŒ€**: 10ëŒ€~60ëŒ€, ì „ì²´
- **ì„±ë³„**: ë‚¨/ì—¬ ë¹„ìœ¨ ì„¤ì •
- **ì§€ì—­**: ì‹œ/êµ¬/ë™ ë‹¨ìœ„
- **ì—…ì¢…**: ëŒ€ë¶„ë¥˜/ì†Œë¶„ë¥˜
- **ì¹´ë“œ ìŠ¹ì¸ ì¡°ê±´**:
  - ê¸ˆì•¡: ìµœì†Œ~ìµœëŒ€
  - ì‹œê°„: ì‹œì‘~ì¢…ë£Œ
  - ë°œì†¡ ì •ì±…: ì‹¤ì‹œê°„/ì¼ê´„

**ì˜ˆì‚° ê´€ë¦¬**:
- `budget`: ìº í˜ì¸ ì „ì²´ ì˜ˆì‚°
- `campaign_budget`: ì‹¤ì œ ì‚¬ìš© ì˜ˆì‚°
- `daily_ad_spend_limit`: ì¼ ìµœëŒ€ ê´‘ê³ ë¹„
- `unit_cost`: ë©”ì‹œì§€ë‹¹ ë‹¨ê°€
- `estimated_total_cost`: ì˜ˆìƒ ì´ ë¹„ìš©

**ë°œì†¡ ì •ì±…**:
- **ì‹¤ì‹œê°„ (realtime)**: ì¡°ê±´ ì¶©ì¡± ì‹œ ì¦‰ì‹œ ë°œì†¡
- **ì¼ê´„ (batch)**: íŠ¹ì • ë‚ ì§œ/ì‹œê°„ì— ì¼ê´„ ë°œì†¡

**ìº í˜ì¸ í…Œì´ë¸” êµ¬ì¡°**:
```sql
campaigns (
  id, user_id, name, template_id, status,
  budget, campaign_budget, daily_ad_spend_limit,
  send_policy_type, validity_start_date, validity_end_date,
  scheduled_send_date, scheduled_send_time,
  target_age_groups (TEXT[]), target_locations_detailed (JSONB),
  card_amount_max, card_time_start, card_time_end,
  target_industry_top_level, target_industry_specific,
  gender_ratio (JSONB), desired_recipients,
  total_recipients, sent_count, success_count, failed_count,
  expert_review_requested, expert_review_notes, ...
)
```

### 3.4 ì˜ˆì•½ ê´€ë¦¬ ì‹œìŠ¤í…œ

#### ê³µê°„ ê´€ë¦¬
- **ê³µê°„ ë“±ë¡**: ì´ë¦„, ì„¤ëª…, ì´ë¯¸ì§€, ê°€ê²©
- **ê³µê°„ ëª©ë¡**: ì‚¬ìš©ìë³„ ê³µê°„ ì¡°íšŒ
- **ê³µê°„ ìˆ˜ì •/ì‚­ì œ**: CRUD ê¸°ëŠ¥

**ê³µê°„ í…Œì´ë¸”**:
```sql
places (
  id, user_id, name, description,
  price_per_hour, images (JSONB), ...
)
```

#### ì˜ˆì•½ ìº˜ë¦°ë”
- **ì›”ê°„/ì£¼ê°„/ì¼ê°„ ë·°**: ë‹¤ì–‘í•œ ë·° ì§€ì›
- **ì˜ˆì•½ ìƒì„±**: ë‚ ì§œ/ì‹œê°„, ê³ ê° ì •ë³´ ì…ë ¥
- **ì˜ˆì•½ ìƒíƒœ**: ì˜ˆì•½ í™•ì •, ì·¨ì†Œ, ì™„ë£Œ
- **ê°€ê²© ì •ë³´**: ì‹œê°„ë‹¹ ê°€ê²©, ì´ ê¸ˆì•¡ ê³„ì‚°

**ì˜ˆì•½ í…Œì´ë¸”**:
```sql
bookings (
  id, place_id, user_id, customer_name, customer_phone,
  start_time, end_time, status, total_price,
  notes, created_at, updated_at, ...
)
```

#### ìë™ ë©”ì‹œì§€ ë°œì†¡
- **ì˜ˆì•½ í™•ì¸**: ì˜ˆì•½ ì‹œ ìë™ ë°œì†¡
- **ë¦¬ë§ˆì¸ë”**: ì˜ˆì•½ Nì‹œê°„ ì „ ë°œì†¡
- **ì·¨ì†Œ ì•Œë¦¼**: ì˜ˆì•½ ì·¨ì†Œ ì‹œ ë°œì†¡
- **ì™„ë£Œ ê°ì‚¬**: ì˜ˆì•½ ì™„ë£Œ í›„ ë°œì†¡

**ìë™ ë©”ì‹œì§€ ì„¤ì •**:
```sql
reservation_auto_messages (
  id, user_id, trigger_type,
  message_template, is_active,
  send_time_offset, ...
)
```

**íŠ¸ë¦¬ê±° íƒ€ì…**:
- `BOOKING_CONFIRMED`: ì˜ˆì•½ í™•ì •
- `BOOKING_REMINDER`: ì˜ˆì•½ ë¦¬ë§ˆì¸ë”
- `BOOKING_CANCELLED`: ì˜ˆì•½ ì·¨ì†Œ
- `BOOKING_COMPLETED`: ì˜ˆì•½ ì™„ë£Œ

#### ê³µìœ  ìº˜ë¦°ë”
- **ê³µìœ  ë§í¬ ìƒì„±**: í† í° ê¸°ë°˜ ë§í¬
- **ì™¸ë¶€ ì ‘ê·¼**: ì¸ì¦ ì—†ì´ ì˜ˆì•½ ê°€ëŠ¥
- **ì‹¤ì‹œê°„ ë™ê¸°í™”**: í´ë§ ê¸°ë°˜

**ê³µìœ  ìº˜ë¦°ë” í”Œë¡œìš°**:
```
1. ì‚¬ìš©ìê°€ ê³µìœ  ìº˜ë¦°ë” ìƒì„±
2. ê³ ìœ  í† í° ë°œê¸‰
3. ê³µìœ  ë§í¬ ë³µì‚¬
4. ì™¸ë¶€ ì‚¬ìš©ìê°€ ë§í¬ë¡œ ì ‘ê·¼
5. ì˜ˆì•½ ê°€ëŠ¥í•œ ì‹œê°„ í™•ì¸
6. ì˜ˆì•½ ì‹ ì²­
7. ì›ë³¸ ìº˜ë¦°ë”ì— ë°˜ì˜
```

### 3.5 ê´€ë¦¬ì ê¸°ëŠ¥

#### ì‚¬ìš©ì ê´€ë¦¬
- **ëª©ë¡ ì¡°íšŒ**: í˜ì´ì§€ë„¤ì´ì…˜, ê²€ìƒ‰, í•„í„°
- **ìƒì„¸ ì •ë³´**: í”„ë¡œí•„, ê±°ë˜ ë‚´ì—­, ìº í˜ì¸
- **ê¶Œí•œ ê´€ë¦¬**: ì—­í•  ë³€ê²½ (USER, ADVERTISER, SALESPERSON, ADMIN)
- **ìŠ¹ì¸ ê´€ë¦¬**: ì‚¬ì—…ì ì¸ì¦ ìŠ¹ì¸/ê±°ë¶€
- **í¬ì¸íŠ¸ ì¶©ì „**: ê°œë³„/ì¼ê´„ ì¶©ì „
- **ë¹„ë°€ë²ˆí˜¸ ì´ˆê¸°í™”**: ì„ì‹œ ë¹„ë°€ë²ˆí˜¸ ë°œê¸‰
- **ì—‘ì…€ ë‚´ë³´ë‚´ê¸°**: ì‚¬ìš©ì ëª©ë¡ ë‹¤ìš´ë¡œë“œ

**ì‚¬ìš©ì í…Œì´ë¸”**:
```sql
users (
  id, username, email, password, name, phone_number,
  role, approval_status, is_active, last_login_at,
  referral_code, referred_by, payment_mode,
  company_info (JSONB), tax_invoice_info (JSONB),
  documents (JSONB), agreement_info (JSONB), ...
)
```

**ì—­í• (Role)**:
- `USER`: ì¼ë°˜ ì‚¬ìš©ì
- `ADVERTISER`: ê´‘ê³ ì£¼
- `SALESPERSON`: ì˜ì—…ì‚¬ì›
- `ADMIN`: ê´€ë¦¬ì

**ìŠ¹ì¸ ìƒíƒœ(approval_status)**:
- `PENDING`: ìŠ¹ì¸ ëŒ€ê¸°
- `APPROVED`: ìŠ¹ì¸ë¨
- `REJECTED`: ê±°ë¶€ë¨

#### ìº í˜ì¸ ìŠ¹ì¸
- **ìŠ¹ì¸ ëŒ€ê¸° ëª©ë¡**: PENDING_APPROVAL ìƒíƒœ ìº í˜ì¸
- **ìº í˜ì¸ ìƒì„¸**: íƒ€ê²Ÿ ì¡°ê±´, ì˜ˆì‚°, ë©”ì‹œì§€ í™•ì¸
- **ìŠ¹ì¸**: APPROVEDë¡œ ë³€ê²½, ìë™ ë°œì†¡ ì‹œì‘
- **ê±°ë¶€**: REJECTEDë¡œ ë³€ê²½, ê±°ë¶€ ì‚¬ìœ  ì…ë ¥
- **ì¼ì‹œì •ì§€**: PAUSEDë¡œ ë³€ê²½
- **ì¬ì‹œì‘**: RUNNINGìœ¼ë¡œ ë³€ê²½

**ìŠ¹ì¸ í”„ë¡œì„¸ìŠ¤**:
```
1. ì‚¬ìš©ìê°€ ìº í˜ì¸ ìƒì„± (PENDING_APPROVAL)
2. ì˜ˆì‚° ì˜ˆì•½ (reserve íŠ¸ëœì­ì…˜)
3. ê´€ë¦¬ì ìŠ¹ì¸ ëŒ€ê¸°
4. ê´€ë¦¬ì ìŠ¹ì¸
   - ì˜ˆì•½ í•´ì œ (unreserve)
   - ì‹¤ì œ ì‚¬ìš© (usage)
   - ìƒíƒœ ë³€ê²½ (APPROVED)
5. ìë™ ë°œì†¡ ì‹œì‘
```

#### í¬ì¸íŠ¸ ì¶©ì „ ê´€ë¦¬
- **ì¶©ì „ ìš”ì²­ ëª©ë¡**: ê²°ì œ ëŒ€ê¸°, ì™„ë£Œ ë‚´ì—­
- **ì¶©ì „ ìŠ¹ì¸**: ìˆ˜ë™ ì¶©ì „ (ê´€ë¦¬ì)
- **ì¼ê´„ ì¶©ì „**: ì—¬ëŸ¬ ì‚¬ìš©ìì—ê²Œ í•œë²ˆì— ì¶©ì „
- **ì¶©ì „ ì´ë ¥**: ë‚ ì§œë³„, ì‚¬ìš©ìë³„ ì¡°íšŒ

**íŠ¸ëœì­ì…˜ ìƒì„±**:
```typescript
{
  type: "charge",
  amount: 10000,
  description: "ê´€ë¦¬ì ì¶©ì „",
  metadata: {
    chargedBy: "admin",
    adminUserId: 1,
    reason: "ì´ë²¤íŠ¸ ì§€ê¸‰"
  }
}
```

#### ì„¸ê¸ˆê³„ì‚°ì„œ ê´€ë¦¬
- **ë°œí–‰ ìš”ì²­ ëª©ë¡**: ì‚¬ìš©ì ìš”ì²­ ë‚´ì—­
- **ë°œí–‰**: PDF ìƒì„± ë° ì´ë©”ì¼ ë°œì†¡
- **í…œí”Œë¦¿ ê´€ë¦¬**: ì„¸ê¸ˆê³„ì‚°ì„œ í…œí”Œë¦¿
- **ì—‘ì…€ ë‚´ë³´ë‚´ê¸°**: ì„¸ê¸ˆê³„ì‚°ì„œ ëª©ë¡ ë‹¤ìš´ë¡œë“œ

#### í†µê³„ ëŒ€ì‹œë³´ë“œ
- **íšŒì› í†µê³„**:
  - ì´ íšŒì› ìˆ˜, ì‹ ê·œ ê°€ì…ì
  - ì—­í• ë³„, ìŠ¹ì¸ ìƒíƒœë³„ ë¶„í¬
  - ì›”ë³„ ê°€ì… ì¶”ì´

- **ë¡œê·¸ì¸ í†µê³„**:
  - ì¼ë³„/ì›”ë³„ ë¡œê·¸ì¸ ìˆ˜
  - í™œì„± ì‚¬ìš©ì ìˆ˜

- **ìº í˜ì¸ í†µê³„**:
  - ì´ ìº í˜ì¸ ìˆ˜, ì‹¤í–‰ ì¤‘ ìº í˜ì¸
  - ìƒíƒœë³„ ë¶„í¬
  - ë°œì†¡ ì„±ê³µë¥ 

- **ë§¤ì¶œ í†µê³„**:
  - ì¼ë³„/ì›”ë³„ ë§¤ì¶œ
  - ê²°ì œ ìˆ˜ë‹¨ë³„ ë¶„í¬

**ì°¨íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬**: Chart.js

#### ì‹œìŠ¤í…œ ì„¤ì •
- **ì•½ê´€ ê´€ë¦¬**: ì´ìš©ì•½ê´€, ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨
- **FAQ ê´€ë¦¬**: ì¹´í…Œê³ ë¦¬ë³„ ê´€ë¦¬
- **ê³µì§€ì‚¬í•­ ê´€ë¦¬**: íŒì—…, ì¤‘ìš” ê³µì§€
- **ë“±ê¸‰ ì„¤ì •**: ì‚¬ìš©ì ë“±ê¸‰ ê¸°ì¤€
- **ë©”ì‹œì§€ ìš”ê¸ˆ**: SMS/LMS/MMS ë‹¨ê°€ ì„¤ì •

### 3.6 ì˜ì—…ì‚¬ì› ê¸°ëŠ¥

#### ì¶”ì²œì¸ ì‹œìŠ¤í…œ
- **ì¶”ì²œ ì½”ë“œ ìƒì„±**: ë¡œê·¸ì¸ ì‹œ ìë™ ìƒì„±
- **ì¶”ì²œ ë§í¬**: `/signup?ref=<code>` í˜•ì‹
- **ì¶”ì²œ ê´€ê³„**: 1ë‹¨ê³„/2ë‹¨ê³„ ì¶”ì 
- **ì¶”ì²œ ë³´ìƒ**: ì§ì ‘/ê°„ì ‘ ìˆ˜ìˆ˜ë£Œ

**ì¶”ì²œ ì½”ë“œ ìƒì„± ë¡œì§**:
```typescript
// user ID + random string â†’ base64 encoding
const generateReferralCode = (userId: number) => {
  const base = userId.toString(36);
  const random = Math.random().toString(36).substring(2, 6);
  return `${base}${random}`.toUpperCase();
};
```

**ì¶”ì²œ ê´€ê³„ í…Œì´ë¸”**:
```sql
referrals (
  id, referrer_id, referred_user_id,
  referral_level (1 or 2), status, ...
)
```

#### ìˆ˜ìˆ˜ë£Œ ê´€ë¦¬
- **ì§ì ‘ ì¶”ì²œ**: 1ë‹¨ê³„ ìˆ˜ìˆ˜ë£Œ (ì˜ˆ: ì¶©ì „ì•¡ì˜ 5%)
- **ê°„ì ‘ ì¶”ì²œ**: 2ë‹¨ê³„ ìˆ˜ìˆ˜ë£Œ (ì˜ˆ: ì¶©ì „ì•¡ì˜ 2%)
- **ìˆ˜ìˆ˜ë£Œ ë‚´ì—­**: ë‚ ì§œë³„, ì‚¬ìš©ìë³„ ì¡°íšŒ
- **ì •ì‚° ìš”ì²­**: ì›”ë³„ ì •ì‚°

**ë¦¬ì›Œë“œ ê³„ì‚°**:
```typescript
// ì§ì ‘ ì¶”ì²œ (1ë‹¨ê³„)
const directReward = chargeAmount * 0.05;

// ê°„ì ‘ ì¶”ì²œ (2ë‹¨ê³„)
const indirectReward = chargeAmount * 0.02;
```

**ë¦¬ì›Œë“œ íŠ¸ëœì­ì…˜**:
```sql
transactions (
  type: "charge",
  metadata: {
    isReward: true,
    referralLevel: 1 or 2,
    sourceUserId: <charged_user_id>
  }
)
```

#### ì¡°ì§ ê´€ë¦¬
- **ì¡°ì§ë„**: 1ë‹¨ê³„/2ë‹¨ê³„ ì¶”ì²œ íŠ¸ë¦¬ êµ¬ì¡°
- **íšŒì› ì •ë³´**: ê°€ì…ì¼, ë§ˆì§€ë§‰ ë¡œê·¸ì¸, ì¶©ì „ ë‚´ì—­
- **ì¡°ì§ í†µê³„**: ì´ íšŒì› ìˆ˜, í™œì„± íšŒì› ìˆ˜, ì´ ìˆ˜ìˆ˜ë£Œ

**ì¡°ì§ ì¡°íšŒ API**:
```
GET /api/referrals?action=tree
â†’ 1ë‹¨ê³„/2ë‹¨ê³„ ì¶”ì²œ íšŒì› ëª©ë¡ ë°˜í™˜
```

#### ì´ˆëŒ€ í˜ì´ì§€
- **ì¶”ì²œ ë§í¬ ìƒì„±**: ìë™ ìƒì„±ëœ ì½”ë“œ í¬í•¨
- **ë§í¬ ê³µìœ **: ì¹´ì¹´ì˜¤í†¡, ë¬¸ì, ì´ë©”ì¼
- **ì¡°íšŒìˆ˜ ì¶”ì **: ë§í¬ í´ë¦­ íšŸìˆ˜

### 3.7 ê²°ì œ ì‹œìŠ¤í…œ

#### NicePay ì—°ë™
- **ì¶©ì „ ìš”ì²­**: ê¸ˆì•¡ ì…ë ¥ â†’ NicePay ê²°ì œì°½ í˜¸ì¶œ
- **ê²°ì œ ìŠ¹ì¸**: ì½œë°± ì²˜ë¦¬ â†’ íŠ¸ëœì­ì…˜ ìƒì„±
- **ê²°ì œ ê²€ì¦**: ì„œë²„ ì‚¬ì´ë“œ ê²€ì¦

**ê²°ì œ í”Œë¡œìš°**:
```
1. ì‚¬ìš©ìê°€ ì¶©ì „ ê¸ˆì•¡ ì…ë ¥
2. POST /api/payment/charge í˜¸ì¶œ
3. NicePay ê²°ì œì°½ ì˜¤í”ˆ
4. ì‚¬ìš©ìê°€ ê²°ì œ ì§„í–‰
5. NicePay ì½œë°± â†’ /payment/success
6. ì„œë²„ì—ì„œ ê²°ì œ ê²€ì¦
7. íŠ¸ëœì­ì…˜ ìƒì„± (type: "charge")
8. ì”ì•¡ ì—…ë°ì´íŠ¸
```

**ê²°ì œ ê²€ì¦**:
```typescript
// ì„œë²„ì—ì„œ NicePay APIë¡œ ê²°ì œ ê²°ê³¼ ì¬í™•ì¸
const verifyResult = await nicepay.verify(orderId, amount);
if (verifyResult.success) {
  // íŠ¸ëœì­ì…˜ ìƒì„±
}
```

#### í¬ì¸íŠ¸ ì¶©ì „
- **ê²°ì œ ìˆ˜ë‹¨**: ì‹ ìš©ì¹´ë“œ, ê³„ì¢Œì´ì²´, ê°€ìƒê³„ì¢Œ
- **ì¶©ì „ ë‹¨ìœ„**: 1ë§Œì› ~ 100ë§Œì›
- **ë³´ë„ˆìŠ¤ í¬ì¸íŠ¸**: ì¶©ì „ ê¸ˆì•¡ì— ë”°ë¼ ì¶”ê°€ ì§€ê¸‰ (ì„ íƒ)

**íŠ¸ëœì­ì…˜ ìƒì„±**:
```typescript
{
  user_id: userId,
  type: "charge",
  amount: 50000,
  description: "í¬ì¸íŠ¸ ì¶©ì „",
  metadata: {
    paymentMethod: "card",
    orderId: "ORDER_12345",
    transactionType: "credit" // or "point"
  },
  status: "completed"
}
```

#### ê±°ë˜ ë‚´ì—­
- **ì „ì²´ ë‚´ì—­**: ì¶©ì „, ì‚¬ìš©, í™˜ë¶ˆ, ì˜ˆì•½
- **í•„í„°ë§**: ê¸°ê°„ë³„, íƒ€ì…ë³„
- **ì—‘ì…€ ë‹¤ìš´ë¡œë“œ**: ê±°ë˜ ë‚´ì—­ ë‚´ë³´ë‚´ê¸°

**íŠ¸ëœì­ì…˜ ì¡°íšŒ API**:
```
GET /api/transactions?limit=50&offset=0
â†’ {
  transactions: [...],
  currentBalance: 50000,
  reservedAmount: 10000,
  availableBalance: 40000,
  total: 150
}
```

### 3.8 AI ê¸°ëŠ¥

#### OpenAI ì±„íŒ…
- **GPT-4 ëª¨ë¸**: ë§ˆì¼€íŒ… ì „ë¬¸ê°€ ì—­í• 
- **ì»¨í…ìŠ¤íŠ¸ ìœ ì§€**: ëŒ€í™” íˆìŠ¤í† ë¦¬ ê´€ë¦¬
- **ìŠ¤íŠ¸ë¦¬ë°**: ì‹¤ì‹œê°„ ì‘ë‹µ í‘œì‹œ

**ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸**:
```
ë‹¹ì‹ ì€ ë§ˆì¼€íŒ… ì „ë¬¸ê°€ì…ë‹ˆë‹¤.
ì‚¬ìš©ìì˜ ë¹„ì¦ˆë‹ˆìŠ¤ì— ë§ëŠ” íƒ€ê²Ÿ ë§ˆì¼€íŒ… ì „ëµì„ ì œì•ˆí•˜ì„¸ìš”.
- ì—°ë ¹ëŒ€, ì§€ì—­, ì—…ì¢… ë“± íƒ€ê²Ÿ ì¡°ê±´ ì¶”ì²œ
- íš¨ê³¼ì ì¸ ë©”ì‹œì§€ ì‘ì„±
- ì˜ˆì‚° ìµœì í™” ë°©ì•ˆ
```

**AI ì±„íŒ… API**:
```
POST /api/ai/chat
{
  "messages": [
    { "role": "user", "content": "ì‹ë‹¹ í™ë³´ ë©”ì‹œì§€ ì‘ì„±í•´ì¤˜" }
  ]
}
â†’ {
  "response": "ì•ˆë…•í•˜ì„¸ìš”! ë§›ìˆëŠ” ìŒì‹ê³¼ ë”°ëœ»í•œ ë¶„ìœ„ê¸°ì˜ OOì‹ë‹¹ì…ë‹ˆë‹¤...",
  "suggestions": [...]
}
```

#### MMS ìƒì„±
- **DALL-E 3**: ì´ë¯¸ì§€ ìƒì„±
- **GPT-4**: ë©”ì‹œì§€ ì‘ì„±
- **ìë™ ì¡°í•©**: ì´ë¯¸ì§€ + ë©”ì‹œì§€ â†’ MMS

**MMS ìƒì„± í”Œë¡œìš°**:
```
1. ì‚¬ìš©ìê°€ ì£¼ì œ ì…ë ¥ (ì˜ˆ: "í”¼ì í• ì¸ ì´ë²¤íŠ¸")
2. DALL-Eë¡œ ì´ë¯¸ì§€ ìƒì„±
3. GPT-4ë¡œ ë©”ì‹œì§€ ì‘ì„±
4. Supabase Storageì— ì´ë¯¸ì§€ ì €ì¥
5. í…œí”Œë¦¿ ì €ì¥
6. ë¯¸ë¦¬ë³´ê¸° í‘œì‹œ
```

**AI MMS API**:
```
POST /api/ai/send-mms
{
  "prompt": "í”¼ì í• ì¸ ì´ë²¤íŠ¸",
  "targetAudience": "20-30ëŒ€ ì§ì¥ì¸",
  "businessType": "ì‹ë‹¹"
}
â†’ {
  "imageUrl": "https://...",
  "message": "ğŸ• í”¼ì í• ì¸ ì´ë²¤íŠ¸!...",
  "templateId": 123
}
```

#### ì´ë¯¸ì§€ í¸ì§‘
- **html2canvas**: ì›¹ ìº”ë²„ìŠ¤ â†’ ì´ë¯¸ì§€ ë³€í™˜
- **í•„í„° ì ìš©**: ë°ê¸°, ëŒ€ë¹„, ì±„ë„ ì¡°ì •
- **í…ìŠ¤íŠ¸ ì˜¤ë²„ë ˆì´**: ë©”ì‹œì§€ ì‚½ì…

## 4. API ì—”ë“œí¬ì¸íŠ¸ ëª©ë¡

### 4.1 ì¸ì¦ ê´€ë ¨

| ë©”ì„œë“œ | ê²½ë¡œ | ì„¤ëª… |
|--------|------|------|
| POST | `/api/auth/check-email` | ì´ë©”ì¼ ì¤‘ë³µ í™•ì¸ |
| POST | `/api/auth/check-username` | ì•„ì´ë”” ì¤‘ë³µ í™•ì¸ |
| POST | `/api/auth/send-verification` | ì´ë©”ì¼ ì¸ì¦ ë°œì†¡ |
| POST | `/api/auth/find-username` | ì•„ì´ë”” ì°¾ê¸° |
| POST | `/api/auth/find-password` | ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸° |
| GET | `/api/auth/google-auth-url` | Google ë¡œê·¸ì¸ URL |
| POST | `/api/auth/google-token` | Google í† í° êµí™˜ |
| POST | `/api/auth/google-login` | Google ë¡œê·¸ì¸ |
| POST | `/api/auth/google-signup` | Google íšŒì›ê°€ì… |
| GET | `/api/auth/kakao-auth-url` | Kakao ë¡œê·¸ì¸ URL |
| POST | `/api/auth/kakao-token` | Kakao í† í° êµí™˜ |
| POST | `/api/auth/kakao-login` | Kakao ë¡œê·¸ì¸ |
| POST | `/api/auth/kakao-signup` | Kakao íšŒì›ê°€ì… |
| GET | `/api/auth/naver-auth-url` | Naver ë¡œê·¸ì¸ URL |
| POST | `/api/auth/naver-token` | Naver í† í° êµí™˜ |
| POST | `/api/auth/naver-login` | Naver ë¡œê·¸ì¸ |
| POST | `/api/auth/naver-signup` | Naver íšŒì›ê°€ì… |
| POST | `/api/auth/inicis-auth/request` | ë³¸ì¸ì¸ì¦ ìš”ì²­ |
| GET | `/api/auth/inicis-auth/callback` | ë³¸ì¸ì¸ì¦ ì½œë°± |
| POST | `/api/auth/inicis-auth/result` | ë³¸ì¸ì¸ì¦ ê²°ê³¼ |
| POST | `/api/auth/validate-referral` | ì¶”ì²œì¸ ì½”ë“œ ê²€ì¦ |
| POST | `/api/auth/validate-referrer` | ì¶”ì²œì¸ ê²€ì¦ |

### 4.2 ì‚¬ìš©ì ê´€ë¦¬

| ë©”ì„œë“œ | ê²½ë¡œ | ì„¤ëª… |
|--------|------|------|
| POST | `/api/users/login` | ë¡œê·¸ì¸ |
| POST | `/api/users/signup` | íšŒì›ê°€ì… |
| POST | `/api/users/signup-with-files` | íŒŒì¼ í¬í•¨ íšŒì›ê°€ì… |
| POST | `/api/users/refresh` | í† í° ê°±ì‹  |
| GET | `/api/users/me` | ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ |
| PUT | `/api/users/me` | ì‚¬ìš©ì ì •ë³´ ìˆ˜ì • |
| POST | `/api/users/change-password` | ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ |
| POST | `/api/users/withdraw` | íšŒì› íƒˆí‡´ |
| PUT | `/api/users/update-referral-views` | ì¶”ì²œì¸ ì¡°íšŒìˆ˜ ì—…ë°ì´íŠ¸ |

### 4.3 ë©”ì‹œì§€ ë°œì†¡

| ë©”ì„œë“œ | ê²½ë¡œ | ì„¤ëª… |
|--------|------|------|
| POST | `/api/messages/send` | ì¦‰ì‹œ/ì˜ˆì•½ ë°œì†¡ |
| GET | `/api/messages/scheduled` | ì˜ˆì•½ ë©”ì‹œì§€ ì¡°íšŒ |
| POST | `/api/messages/scheduled-send-check` | ì˜ˆì•½ ë°œì†¡ ì²´í¬ (Cron) |
| GET | `/api/messages/templates` | í…œí”Œë¦¿ ëª©ë¡ ì¡°íšŒ |
| POST | `/api/messages/templates` | í…œí”Œë¦¿ ìƒì„± |
| GET | `/api/messages/templates/[id]` | í…œí”Œë¦¿ ìƒì„¸ ì¡°íšŒ |
| PUT | `/api/messages/templates/[id]` | í…œí”Œë¦¿ ìˆ˜ì • |
| DELETE | `/api/messages/templates/[id]` | í…œí”Œë¦¿ ì‚­ì œ |
| POST | `/api/messages/upload-image` | ì´ë¯¸ì§€ ì—…ë¡œë“œ |
| POST | `/api/message/send` | ë©”ì‹œì§€ ë°œì†¡ (ë ˆê±°ì‹œ) |
| POST | `/api/message/upload-file` | íŒŒì¼ ì—…ë¡œë“œ (ë ˆê±°ì‹œ) |
| GET | `/api/message-logs` | ë©”ì‹œì§€ ë¡œê·¸ ì¡°íšŒ |

### 4.4 ìº í˜ì¸ ê´€ë¦¬

| ë©”ì„œë“œ | ê²½ë¡œ | ì„¤ëª… |
|--------|------|------|
| GET | `/api/campaigns` | ìº í˜ì¸ ëª©ë¡ ì¡°íšŒ |
| POST | `/api/campaigns` | ìº í˜ì¸ ìƒì„± |
| GET | `/api/campaigns/[id]` | ìº í˜ì¸ ìƒì„¸ ì¡°íšŒ |
| PUT | `/api/campaigns/[id]` | ìº í˜ì¸ ìˆ˜ì • |
| DELETE | `/api/campaigns/[id]` | ìº í˜ì¸ ì‚­ì œ |
| GET | `/api/campaigns/[id]/rejection` | ê±°ì ˆ ì‚¬ìœ  ì¡°íšŒ |
| POST | `/api/campaigns/ad-costs` | ê´‘ê³ ë¹„ ê³„ì‚° |

### 4.5 ê´€ë¦¬ì ê¸°ëŠ¥

| ë©”ì„œë“œ | ê²½ë¡œ | ì„¤ëª… |
|--------|------|------|
| GET | `/api/admin/campaigns` | ì „ì²´ ìº í˜ì¸ ì¡°íšŒ |
| GET | `/api/admin/campaigns/[id]` | ìº í˜ì¸ ìƒì„¸ |
| POST | `/api/admin/campaigns/[id]/approve` | ìº í˜ì¸ ìŠ¹ì¸ |
| POST | `/api/admin/campaigns/[id]/reject` | ìº í˜ì¸ ê±°ë¶€ |
| POST | `/api/admin/campaigns/[id]/start` | ìº í˜ì¸ ì‹œì‘ |
| POST | `/api/admin/campaigns/[id]/pause` | ìº í˜ì¸ ì¼ì‹œì •ì§€ |
| GET | `/api/admin/users` | ì‚¬ìš©ì ëª©ë¡ |
| POST | `/api/admin/users/bulk` | ì¼ê´„ ì‘ì—… |
| POST | `/api/admin/users/charge` | í¬ì¸íŠ¸ ì¶©ì „ |
| POST | `/api/admin/users/reset-password` | ë¹„ë°€ë²ˆí˜¸ ì´ˆê¸°í™” |
| GET | `/api/admin/users/export` | ì—‘ì…€ ë‚´ë³´ë‚´ê¸° |
| GET | `/api/admin/point-charge` | ì¶©ì „ ë‚´ì—­ ì¡°íšŒ |
| POST | `/api/admin/point-charge` | ì¶©ì „ ìŠ¹ì¸ |
| POST | `/api/admin/point-charge/bulk` | ì¼ê´„ ì¶©ì „ |
| GET | `/api/admin/point-status` | í¬ì¸íŠ¸ í˜„í™© |
| GET | `/api/admin/tax-invoices` | ì„¸ê¸ˆê³„ì‚°ì„œ ëª©ë¡ |
| POST | `/api/admin/tax-invoices` | ì„¸ê¸ˆê³„ì‚°ì„œ ë°œí–‰ |
| GET | `/api/admin/tax-invoices/[id]` | ì„¸ê¸ˆê³„ì‚°ì„œ ìƒì„¸ |
| GET | `/api/admin/tax-invoices/template` | í…œí”Œë¦¿ ì¡°íšŒ |
| POST | `/api/admin/tax-invoices/upload` | íŒŒì¼ ì—…ë¡œë“œ |
| GET | `/api/admin/tax-invoices/export` | ì—‘ì…€ ë‚´ë³´ë‚´ê¸° |
| GET | `/api/admin/inquiries` | ë¬¸ì˜ ëª©ë¡ |
| GET | `/api/admin/inquiries/[id]` | ë¬¸ì˜ ìƒì„¸ |
| POST | `/api/admin/inquiries/[id]` | ë¬¸ì˜ ë‹µë³€ |
| GET | `/api/admin/companies` | ì‚¬ì—…ì ì •ë³´ ì¡°íšŒ |
| GET | `/api/admin/grade-settings` | ë“±ê¸‰ ì„¤ì • ì¡°íšŒ |
| POST | `/api/admin/grade-settings` | ë“±ê¸‰ ì„¤ì • ì €ì¥ |
| GET | `/api/admin/grade-history` | ë“±ê¸‰ ì´ë ¥ ì¡°íšŒ |
| GET | `/api/admin/terms` | ì•½ê´€ ëª©ë¡ |
| POST | `/api/admin/terms` | ì•½ê´€ ì €ì¥ |
| GET | `/api/admin/terms/versions` | ì•½ê´€ ë²„ì „ ì¡°íšŒ |
| POST | `/api/admin/send-approval-notification` | ìŠ¹ì¸ ì•Œë¦¼ ë°œì†¡ |
| GET | `/api/admin/system-settings` | ì‹œìŠ¤í…œ ì„¤ì • ì¡°íšŒ |
| PUT | `/api/admin/system-settings` | ì‹œìŠ¤í…œ ì„¤ì • ì €ì¥ |

### 4.6 íŠ¸ëœì­ì…˜

| ë©”ì„œë“œ | ê²½ë¡œ | ì„¤ëª… |
|--------|------|------|
| GET | `/api/transactions` | ê±°ë˜ ë‚´ì—­ ì¡°íšŒ |
| POST | `/api/transactions` | íŠ¸ëœì­ì…˜ ìƒì„± |

### 4.7 ê²°ì œ

| ë©”ì„œë“œ | ê²½ë¡œ | ì„¤ëª… |
|--------|------|------|
| POST | `/api/payment/charge` | ì¶©ì „ ìš”ì²­ |
| POST | `/api/payment/verify` | ê²°ì œ ê²€ì¦ |
| POST | `/api/payment/fail` | ê²°ì œ ì‹¤íŒ¨ |
| POST | `/api/payment/cancel` | ê²°ì œ ì·¨ì†Œ |

### 4.8 AI ê¸°ëŠ¥

| ë©”ì„œë“œ | ê²½ë¡œ | ì„¤ëª… |
|--------|------|------|
| POST | `/api/ai/chat` | AI ì±„íŒ… |
| POST | `/api/ai/send-mms` | AI MMS ìƒì„± |

### 4.9 ì˜ˆì•½ ì‹œìŠ¤í…œ

| ë©”ì„œë“œ | ê²½ë¡œ | ì„¤ëª… |
|--------|------|------|
| GET | `/api/reservations/places` | ê³µê°„ ëª©ë¡ |
| POST | `/api/reservations/places` | ê³µê°„ ìƒì„± |
| GET | `/api/reservations/places/[id]` | ê³µê°„ ìƒì„¸ |
| PUT | `/api/reservations/places/[id]` | ê³µê°„ ìˆ˜ì • |
| DELETE | `/api/reservations/places/[id]` | ê³µê°„ ì‚­ì œ |
| GET | `/api/reservations/bookings` | ì˜ˆì•½ ëª©ë¡ |
| POST | `/api/reservations/bookings` | ì˜ˆì•½ ìƒì„± |
| GET | `/api/reservations/bookings/[id]` | ì˜ˆì•½ ìƒì„¸ |
| PUT | `/api/reservations/bookings/[id]` | ì˜ˆì•½ ìˆ˜ì • |
| DELETE | `/api/reservations/bookings/[id]` | ì˜ˆì•½ ì‚­ì œ |
| GET | `/api/reservations/statistics` | ì˜ˆì•½ í†µê³„ |
| GET | `/api/reservations/messages` | ìë™ ë©”ì‹œì§€ ì„¤ì • ì¡°íšŒ |
| POST | `/api/reservations/messages` | ìë™ ë©”ì‹œì§€ ì„¤ì • ì €ì¥ |
| GET | `/api/reservations/payments` | ì˜ˆì•½ ê²°ì œ ë‚´ì—­ |

### 4.10 ê¸°íƒ€

| ë©”ì„œë“œ | ê²½ë¡œ | ì„¤ëª… |
|--------|------|------|
| GET | `/api/sender-numbers` | ë°œì‹ ë²ˆí˜¸ ëª©ë¡ |
| POST | `/api/sender-numbers` | ë°œì‹ ë²ˆí˜¸ ë“±ë¡ |
| PUT | `/api/sender-numbers/[id]` | ë°œì‹ ë²ˆí˜¸ ìˆ˜ì • |
| DELETE | `/api/sender-numbers/[id]` | ë°œì‹ ë²ˆí˜¸ ì‚­ì œ |
| POST | `/api/sender-numbers/[id]/set-default` | ê¸°ë³¸ ë°œì‹ ë²ˆí˜¸ ì„¤ì • |
| GET | `/api/address-book/groups` | ì£¼ì†Œë¡ ê·¸ë£¹ ëª©ë¡ |
| POST | `/api/address-book/groups` | ì£¼ì†Œë¡ ê·¸ë£¹ ìƒì„± |
| GET | `/api/address-book/groups/[id]` | ì£¼ì†Œë¡ ê·¸ë£¹ ìƒì„¸ |
| GET | `/api/address-book/contacts` | ì—°ë½ì²˜ ëª©ë¡ |
| POST | `/api/address-book/contacts` | ì—°ë½ì²˜ ì¶”ê°€ |
| GET | `/api/notifications` | ì•Œë¦¼ ëª©ë¡ |
| PUT | `/api/notifications/[id]/read` | ì•Œë¦¼ ì½ìŒ ì²˜ë¦¬ |
| PUT | `/api/notifications/mark-all-read` | ì „ì²´ ì½ìŒ ì²˜ë¦¬ |
| POST | `/api/notifications/send` | ì•Œë¦¼ ë°œì†¡ |
| GET | `/api/faqs` | FAQ ëª©ë¡ |
| POST | `/api/faqs` | FAQ ìƒì„± |
| PUT | `/api/faqs/[id]` | FAQ ìˆ˜ì • |
| DELETE | `/api/faqs/[id]` | FAQ ì‚­ì œ |
| GET | `/api/announcements` | ê³µì§€ì‚¬í•­ ëª©ë¡ |
| POST | `/api/announcements` | ê³µì§€ì‚¬í•­ ìƒì„± |
| PUT | `/api/announcements/[id]` | ê³µì§€ì‚¬í•­ ìˆ˜ì • |
| GET | `/api/inquiries` | ë¬¸ì˜ ëª©ë¡ |
| POST | `/api/inquiries` | ë¬¸ì˜ ìƒì„± |
| GET | `/api/inquiries/[id]` | ë¬¸ì˜ ìƒì„¸ |
| POST | `/api/inquiries/[id]/reply` | ë¬¸ì˜ ë‹µë³€ |
| GET | `/api/locations/cities` | ì‹œ ëª©ë¡ |
| GET | `/api/locations/districts` | êµ¬ ëª©ë¡ |
| GET | `/api/locations/dongs` | ë™ ëª©ë¡ |
| GET | `/api/industries` | ì—…ì¢… ëª©ë¡ |
| GET | `/api/nts-industries` | êµ­ì„¸ì²­ ì—…ì¢… ëª©ë¡ |
| GET | `/api/referrals` | ì¶”ì²œ ë‚´ì—­ ì¡°íšŒ |
| GET | `/api/rewards` | ë¦¬ì›Œë“œ ì¡°íšŒ |
| GET | `/api/settlements` | ì •ì‚° ë‚´ì—­ ì¡°íšŒ |
| POST | `/api/business-verification/verify-business-number` | ì‚¬ì—…ìë²ˆí˜¸ ê²€ì¦ |
| POST | `/api/business-verification/submit` | ì‚¬ì—…ì ì¸ì¦ ì œì¶œ |
| GET | `/api/terms` | ì•½ê´€ ì¡°íšŒ |
| POST | `/api/upload` | íŒŒì¼ ì—…ë¡œë“œ |
| GET | `/api/shared/calendar/[token]` | ê³µìœ  ìº˜ë¦°ë” ì¡°íšŒ |
| POST | `/api/cron/send-scheduled-messages` | ì˜ˆì•½ ë©”ì‹œì§€ ë°œì†¡ (Cron) |

## 5. ë°ì´í„° ëª¨ë¸

### 5.1 í•µì‹¬ í…Œì´ë¸”

#### users (ì‚¬ìš©ì)
```sql
CREATE TABLE users (
  id SERIAL PRIMARY KEY,
  username VARCHAR(50) UNIQUE NOT NULL,
  email VARCHAR(255) UNIQUE NOT NULL,
  password VARCHAR(255) NOT NULL,
  name VARCHAR(100) NOT NULL,
  phone_number VARCHAR(20),
  role VARCHAR(20) DEFAULT 'USER', -- USER, ADVERTISER, SALESPERSON, ADMIN
  approval_status VARCHAR(20) DEFAULT 'PENDING', -- PENDING, APPROVED, REJECTED
  is_active BOOLEAN DEFAULT true,
  last_login_at TIMESTAMP,
  referral_code VARCHAR(20) UNIQUE,
  referred_by INTEGER REFERENCES users(id),
  payment_mode VARCHAR(20), -- PREPAID, POSTPAID

  -- JSONB í•„ë“œ
  company_info JSONB, -- {companyName, ceoName, businessNumber, ...}
  tax_invoice_info JSONB, -- {email, manager, contact}
  documents JSONB, -- {businessRegistration, employmentCertificate}
  agreement_info JSONB, -- {termsVersion, agreedAt, ...}

  -- SNS ì—°ë™
  kakao_user_id VARCHAR(255),
  naver_user_id VARCHAR(255),
  google_user_id VARCHAR(255),

  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);
```

#### transactions (íŠ¸ëœì­ì…˜)
```sql
CREATE TABLE transactions (
  id SERIAL PRIMARY KEY,
  user_id INTEGER NOT NULL REFERENCES users(id),
  type VARCHAR(20) NOT NULL, -- charge, usage, refund, penalty, reserve, unreserve
  amount INTEGER NOT NULL,
  description TEXT NOT NULL,
  reference_id VARCHAR(255),
  metadata JSONB, -- {transactionType, isReward, campaign_id, ...}
  status VARCHAR(20) DEFAULT 'pending', -- pending, completed, failed
  error_message TEXT,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);
```

#### campaigns (ìº í˜ì¸)
```sql
CREATE TABLE campaigns (
  id SERIAL PRIMARY KEY,
  user_id INTEGER NOT NULL REFERENCES users(id),
  name VARCHAR(255) NOT NULL,
  template_id INTEGER REFERENCES message_templates(id),
  status VARCHAR(50) DEFAULT 'PENDING_APPROVAL',

  -- ì˜ˆì‚° ê´€ë ¨
  budget INTEGER DEFAULT 0,
  campaign_budget INTEGER DEFAULT 0,
  daily_ad_spend_limit INTEGER,

  -- ë°œì†¡ ì •ì±…
  send_policy_type VARCHAR(20), -- realtime, batch
  validity_start_date DATE,
  validity_end_date DATE,
  scheduled_send_date DATE,
  scheduled_send_time TIME,

  -- íƒ€ê²Ÿ ì¡°ê±´
  target_age_groups TEXT[], -- ['20s', '30s', ...]
  target_locations_detailed JSONB, -- [{city, district, dong}, ...]
  card_amount_max INTEGER,
  card_time_start TIME,
  card_time_end TIME,
  target_industry_top_level VARCHAR(100),
  target_industry_specific VARCHAR(100),
  gender_ratio JSONB, -- {female: 50, male: 50}
  desired_recipients TEXT,

  -- ë¹„ìš© ë° ì˜ˆìƒ
  unit_cost INTEGER DEFAULT 0,
  estimated_total_cost INTEGER DEFAULT 0,

  -- ë°œì†¡ í˜„í™©
  total_recipients INTEGER DEFAULT 0,
  sent_count INTEGER DEFAULT 0,
  success_count INTEGER DEFAULT 0,
  failed_count INTEGER DEFAULT 0,

  -- ì „ë¬¸ê°€ ë¦¬ë·°
  expert_review_requested BOOLEAN DEFAULT false,
  expert_review_notes TEXT,

  -- ì¼ì •
  schedule_start_date TIMESTAMP,
  schedule_end_date TIMESTAMP,
  schedule_send_time_start TIME,
  schedule_send_time_end TIME,

  -- í…œí”Œë¦¿ ë‚´ìš©
  message_template TEXT,

  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);
```

#### message_templates (ë©”ì‹œì§€ í…œí”Œë¦¿)
```sql
CREATE TABLE message_templates (
  id SERIAL PRIMARY KEY,
  user_id INTEGER REFERENCES users(id),
  name VARCHAR(255) NOT NULL,
  content TEXT NOT NULL,
  image_url TEXT,
  category VARCHAR(50), -- AI_GENERATED, MARKETING, GENERAL
  template_code VARCHAR(100) UNIQUE,
  is_private BOOLEAN DEFAULT true,
  is_ai_generated BOOLEAN DEFAULT false,
  ai_model VARCHAR(50),
  usage_count INTEGER DEFAULT 0,
  buttons JSONB, -- [{id, text, linkType, url}, ...]
  is_active BOOLEAN DEFAULT true,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);
```

#### sender_numbers (ë°œì‹ ë²ˆí˜¸)
```sql
CREATE TABLE sender_numbers (
  id SERIAL PRIMARY KEY,
  user_id INTEGER NOT NULL REFERENCES users(id),
  phone_number VARCHAR(20) NOT NULL,
  display_name VARCHAR(100),
  is_default BOOLEAN DEFAULT false,
  is_user_phone BOOLEAN DEFAULT false,
  is_verified BOOLEAN DEFAULT false,
  status VARCHAR(20) DEFAULT 'ACTIVE', -- ACTIVE, INACTIVE
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);
```

#### notifications (ì•Œë¦¼)
```sql
CREATE TABLE notifications (
  id SERIAL PRIMARY KEY,
  recipient_user_id INTEGER REFERENCES users(id),
  recipient_role VARCHAR(20),
  sender_user_id INTEGER REFERENCES users(id),
  title VARCHAR(255) NOT NULL,
  message TEXT NOT NULL,
  type VARCHAR(50) NOT NULL, -- CAMPAIGN_APPROVAL, POINT_CHARGE, ...
  action_url TEXT,
  is_read BOOLEAN DEFAULT false,
  read_at TIMESTAMP,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);
```

#### referrals (ì¶”ì²œì¸)
```sql
CREATE TABLE referrals (
  id SERIAL PRIMARY KEY,
  referrer_id INTEGER NOT NULL REFERENCES users(id),
  referred_user_id INTEGER NOT NULL REFERENCES users(id),
  referral_level INTEGER NOT NULL, -- 1 or 2
  status VARCHAR(20) DEFAULT 'ACTIVE',
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);
```

#### places (ì˜ˆì•½ ê³µê°„)
```sql
CREATE TABLE places (
  id SERIAL PRIMARY KEY,
  user_id INTEGER NOT NULL REFERENCES users(id),
  name VARCHAR(255) NOT NULL,
  description TEXT,
  price_per_hour INTEGER DEFAULT 0,
  images JSONB, -- [{url, order}, ...]
  is_active BOOLEAN DEFAULT true,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);
```

#### bookings (ì˜ˆì•½)
```sql
CREATE TABLE bookings (
  id SERIAL PRIMARY KEY,
  place_id INTEGER NOT NULL REFERENCES places(id),
  user_id INTEGER NOT NULL REFERENCES users(id),
  customer_name VARCHAR(100) NOT NULL,
  customer_phone VARCHAR(20) NOT NULL,
  start_time TIMESTAMP NOT NULL,
  end_time TIMESTAMP NOT NULL,
  status VARCHAR(20) DEFAULT 'CONFIRMED', -- CONFIRMED, CANCELLED, COMPLETED
  total_price INTEGER DEFAULT 0,
  notes TEXT,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);
```

### 5.2 ê´€ê³„ë„

```
users (ì‚¬ìš©ì)
  â”œâ”€ 1:N â†’ transactions (íŠ¸ëœì­ì…˜)
  â”œâ”€ 1:N â†’ campaigns (ìº í˜ì¸)
  â”œâ”€ 1:N â†’ message_templates (í…œí”Œë¦¿)
  â”œâ”€ 1:N â†’ sender_numbers (ë°œì‹ ë²ˆí˜¸)
  â”œâ”€ 1:N â†’ notifications (ì•Œë¦¼)
  â”œâ”€ 1:N â†’ referrals (ì¶”ì²œì¸)
  â”œâ”€ 1:N â†’ places (ê³µê°„)
  â””â”€ 1:N â†’ bookings (ì˜ˆì•½)

campaigns (ìº í˜ì¸)
  â””â”€ N:1 â†’ message_templates (í…œí”Œë¦¿)

referrals (ì¶”ì²œì¸)
  â”œâ”€ N:1 â†’ users (referrer_id)
  â””â”€ N:1 â†’ users (referred_user_id)

bookings (ì˜ˆì•½)
  â”œâ”€ N:1 â†’ places (ê³µê°„)
  â””â”€ N:1 â†’ users (ì‚¬ìš©ì)
```

## 6. ìƒíƒœ ê´€ë¦¬

### 6.1 AuthContext

**ìƒíƒœ**:
- `user`: í˜„ì¬ ì‚¬ìš©ì ì •ë³´
- `isLoading`: ë¡œë”© ìƒíƒœ
- `isAuthenticated`: ì¸ì¦ ì—¬ë¶€
- `error`: ì—ëŸ¬ ë©”ì‹œì§€

**í•¨ìˆ˜**:
- `login(loginData)`: ë¡œê·¸ì¸
- `signup(signupData)`: íšŒì›ê°€ì…
- `logout()`: ë¡œê·¸ì•„ì›ƒ
- `checkAuth()`: ì¸ì¦ í™•ì¸
- `refreshAccessToken()`: í† í° ê°±ì‹ 
- `getAccessToken()`: ìœ íš¨í•œ í† í° ë°˜í™˜

**íŠ¹ì§•**:
- ìë™ í† í° ê°±ì‹  (50ë¶„ë§ˆë‹¤)
- ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ìºì‹±
- 401 ì‘ë‹µ ì‹œ ìë™ ì¬ì‹œë„
- ë¦¬í”„ë ˆì‹œ í† í° ë§Œë£Œ ì‹œ ìë™ ë¡œê·¸ì•„ì›ƒ

### 6.2 BalanceContext

**ìƒíƒœ**:
- `balanceData`: ì”ì•¡ ì •ë³´
  - `balance`: ì´ ì”ì•¡
  - `reservedAmount`: ì˜ˆì•½ ê¸ˆì•¡
  - `availableBalance`: ì‚¬ìš© ê°€ëŠ¥ ì”ì•¡
  - `transactions`: íŠ¸ëœì­ì…˜ ë‚´ì—­

**í•¨ìˆ˜**:
- `calculateBalance()`: ê´‘ê³ ë¨¸ë‹ˆ ê³„ì‚°
- `calculatePoints()`: í¬ì¸íŠ¸ ê³„ì‚°
- `getReservedAmount()`: ì˜ˆì•½ ê¸ˆì•¡ ê³„ì‚°
- `getAvailableBalance()`: ì‚¬ìš© ê°€ëŠ¥ ì”ì•¡ ê³„ì‚°
- `addTransaction()`: íŠ¸ëœì­ì…˜ ì¶”ê°€
- `refreshTransactions()`: ìƒˆë¡œê³ ì¹¨
- `formatCurrency(amount)`: í†µí™” í¬ë§·íŒ…

**íŠ¹ì§•**:
- íŠ¸ëœì­ì…˜ ê¸°ë°˜ ì‹¤ì‹œê°„ ê³„ì‚°
- í˜ì´ì§€ ì´ë™ ì‹œ ìë™ ìƒˆë¡œê³ ì¹¨
- ë””ë°”ìš´ì‹± (1ì´ˆ)
- ê´‘ê³ ë¨¸ë‹ˆ/í¬ì¸íŠ¸ ë¶„ë¦¬ ê´€ë¦¬

### 6.3 NotificationContext

**ìƒíƒœ**:
- `notifications`: ì•Œë¦¼ ëª©ë¡
- `unreadCount`: ì½ì§€ ì•Šì€ ì•Œë¦¼ ìˆ˜
- `pagination`: í˜ì´ì§€ë„¤ì´ì…˜ ì •ë³´
- `isLoading`: ë¡œë”© ìƒíƒœ

**í•¨ìˆ˜**:
- `fetchNotifications(page, unreadOnly)`: ì•Œë¦¼ ì¡°íšŒ
- `markAsRead(notificationId)`: ì½ìŒ ì²˜ë¦¬
- `markAllAsRead()`: ì „ì²´ ì½ìŒ ì²˜ë¦¬
- `refreshNotifications()`: ìƒˆë¡œê³ ì¹¨

**íŠ¹ì§•**:
- 30ì´ˆë§ˆë‹¤ í´ë§
- í˜ì´ì§€ ê°€ì‹œì„± ë³€ê²½ ì‹œ ìë™ ìƒˆë¡œê³ ì¹¨
- ë¡œê·¸ì•„ì›ƒ ì‹œ ìƒíƒœ ì´ˆê¸°í™”

## 7. ë³´ì•ˆ ë° ì¸ì¦

### 7.1 JWT í† í° ê´€ë¦¬

**í† í° êµ¬ì¡°**:
```typescript
// ì•¡ì„¸ìŠ¤ í† í° payload
{
  userId: number,
  username: string,
  email: string,
  name: string,
  phoneNumber: string,
  role: string,
  approval_status: string,
  exp: number
}

// ë¦¬í”„ë ˆì‹œ í† í° payload
{
  userId: number,
  username: string,
  email: string,
  name: string,
  phoneNumber: string,
  type: "refresh",
  exp: number
}
```

**í† í° ì €ì¥**:
- localStorageì— ì €ì¥
- `accessToken`, `refreshToken` í‚¤ ì‚¬ìš©
- ì„œë²„ ì‚¬ì´ë“œì—ì„œëŠ” ì‚¬ìš© ë¶ˆê°€

**í† í° ê°±ì‹  ë¡œì§**:
```typescript
// 1. í† í° ë§Œë£Œ 5ë¶„ ì „ ìë™ ê°±ì‹ 
if (tokenManager.isTokenExpired(token)) {
  await refreshAccessToken();
}

// 2. 401 ì‘ë‹µ ì‹œ ìë™ ê°±ì‹  ë° ì¬ì‹œë„
if (response.status === 401) {
  const refreshed = await refreshAccessToken();
  if (refreshed) {
    // ì¬ì‹œë„
    return apiCall(endpoint, options, true);
  }
}
```

### 7.2 ê¶Œí•œ ê´€ë¦¬ (Role-based)

**ì—­í• **:
- `USER`: ì¼ë°˜ ì‚¬ìš©ì
- `ADVERTISER`: ê´‘ê³ ì£¼ (ìŠ¹ì¸ëœ ì‚¬ìš©ì)
- `SALESPERSON`: ì˜ì—…ì‚¬ì›
- `ADMIN`: ê´€ë¦¬ì

**RoleGuard ì»´í¬ë„ŒíŠ¸**:
```typescript
<RoleGuard allowedRoles={['ADMIN']}>
  <AdminDashboard />
</RoleGuard>
```

**API ë ˆë²¨ ê¶Œí•œ ê²€ì¦**:
```typescript
const authResult = validateAuthWithSuccess(request);
if (!authResult.isValid) {
  return authResult.errorResponse;
}

const { role } = authResult.userInfo;
if (role !== 'ADMIN') {
  return NextResponse.json(
    { error: 'ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤' },
    { status: 403 }
  );
}
```

### 7.3 íŒŒì¼ ì—…ë¡œë“œ ì •ì±…

**Supabase Storage ë²„í‚·**:
- `public-files`: ê³µê°œ íŒŒì¼ (í…œí”Œë¦¿ ì´ë¯¸ì§€ ë“±)
- `private-files`: ë¹„ê³µê°œ íŒŒì¼ (ì‚¬ì—…ìë“±ë¡ì¦ ë“±)
- `user-uploads`: ì‚¬ìš©ì ì—…ë¡œë“œ íŒŒì¼

**RLS (Row Level Security)**:
```sql
-- ì‚¬ìš©ìëŠ” ìì‹ ì˜ íŒŒì¼ë§Œ ì½ê¸° ê°€ëŠ¥
CREATE POLICY "Users can read own files"
ON storage.objects FOR SELECT
USING (bucket_id = 'private-files' AND owner = auth.uid());

-- ê´€ë¦¬ìëŠ” ëª¨ë“  íŒŒì¼ ì½ê¸° ê°€ëŠ¥
CREATE POLICY "Admins can read all files"
ON storage.objects FOR SELECT
USING (bucket_id = 'private-files' AND is_admin());
```

**íŒŒì¼ í¬ê¸° ì œí•œ**:
- ì´ë¯¸ì§€: 10MB
- ë¬¸ì„œ: 5MB
- ì´ ì—…ë¡œë“œ: 50MB/ì¼

**í—ˆìš© íŒŒì¼ íƒ€ì…**:
- ì´ë¯¸ì§€: `image/jpeg`, `image/png`, `image/gif`
- ë¬¸ì„œ: `application/pdf`, `application/msword`

## 8. ì™¸ë¶€ ì„œë¹„ìŠ¤ ì—°ë™

### 8.1 Supabase
- **ë°ì´í„°ë² ì´ìŠ¤**: PostgreSQL
- **Storage**: íŒŒì¼ ì €ì¥ì†Œ
- **ì¸ì¦**: ì‚¬ìš© ì•ˆ í•¨ (ì»¤ìŠ¤í…€ JWT)
- **Realtime**: ì‚¬ìš© ì•ˆ í•¨ (í´ë§ ì‚¬ìš©)

**ì—°ê²° ì„¤ì •**:
```typescript
const supabase = createClient(
  process.env.NEXT_PUBLIC_SUPABASE_URL!,
  process.env.SUPABASE_SERVICE_ROLE_KEY!, // ì„œë²„ ì‚¬ì´ë“œë§Œ
  {
    db: { schema: "public" },
    auth: {
      autoRefreshToken: false,
      persistSession: false
    }
  }
);
```

### 8.2 Naver SENS (SMS/MMS)
- **ì„œë¹„ìŠ¤ ID**: NAVER_SENS_SERVICE_ID
- **ì•¡ì„¸ìŠ¤ í‚¤**: NAVER_ACCESS_KEY_ID
- **ì‹œí¬ë¦¿ í‚¤**: NAVER_SECRET_KEY

**API í˜¸ì¶œ**:
```typescript
const response = await fetch(
  `https://sens.apigw.ntruss.com/sms/v2/services/${serviceId}/messages`,
  {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json; charset=utf-8',
      'x-ncp-apigw-timestamp': timestamp,
      'x-ncp-iam-access-key': accessKey,
      'x-ncp-apigw-signature-v2': signature
    },
    body: JSON.stringify({
      type: 'SMS', // or 'LMS', 'MMS'
      from: senderNumber,
      content: message,
      messages: [{ to: recipientNumber }]
    })
  }
);
```

### 8.3 OpenAI
- **ëª¨ë¸**: GPT-4, DALL-E 3
- **API í‚¤**: OPENAI_API_KEY

**ì±„íŒ… API**:
```typescript
const completion = await openai.chat.completions.create({
  model: "gpt-4",
  messages: [
    { role: "system", content: "ë‹¹ì‹ ì€ ë§ˆì¼€íŒ… ì „ë¬¸ê°€ì…ë‹ˆë‹¤." },
    { role: "user", content: userMessage }
  ],
  temperature: 0.7
});
```

**ì´ë¯¸ì§€ ìƒì„± API**:
```typescript
const image = await openai.images.generate({
  model: "dall-e-3",
  prompt: userPrompt,
  n: 1,
  size: "1024x1024"
});
```

### 8.4 NicePay (ê²°ì œ)
- **ìš´ì˜ í‚¤**: ì‹¤ì œ ê²°ì œ ì²˜ë¦¬
- **í…ŒìŠ¤íŠ¸ ëª¨ë“œ**: ê°œë°œ/í…ŒìŠ¤íŠ¸ìš©

**ê²°ì œ ìš”ì²­**:
```typescript
const paymentData = {
  clientId: NICEPAY_CLIENT_ID,
  method: 'card',
  orderId: generateOrderId(),
  amount: chargeAmount,
  goodsName: 'í¬ì¸íŠ¸ ì¶©ì „',
  returnUrl: '/payment/success',
  mallUserId: userId
};

AUTHNICE.requestPay(paymentData);
```

### 8.5 ê³µê³µë°ì´í„° API
- **ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸ ê²€ì¦**: ODCLOUD_SERVICE_KEY

**ê²€ì¦ API**:
```typescript
const response = await fetch(
  `https://api.odcloud.kr/api/nts-businessman/v1/validate`,
  {
    method: 'POST',
    headers: {
      'Authorization': `Infuser ${serviceKey}`,
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({
      businesses: [{
        b_no: businessNumber,
        start_dt: startDate,
        p_nm: ceoName
      }]
    })
  }
);
```

## 9. ì„±ëŠ¥ ìµœì í™”

### 9.1 ìºì‹± ì „ëµ
- **ì‚¬ìš©ì ì •ë³´**: localStorage ìºì‹±
- **ì”ì•¡ ì •ë³´**: ë©”ëª¨ë¦¬ ìºì‹± (Context)
- **ì•Œë¦¼**: 30ì´ˆ í´ë§ + í˜ì´ì§€ ê°€ì‹œì„± ê¸°ë°˜ ìƒˆë¡œê³ ì¹¨

### 9.2 ì´ë¯¸ì§€ ìµœì í™”
- **Next.js Image**: ìë™ ìµœì í™”
- **WebP ë³€í™˜**: ìë™ ë³€í™˜
- **Lazy Loading**: ê¸°ë³¸ ì ìš©

### 9.3 API í˜¸ì¶œ ìµœì í™”
- **ë””ë°”ìš´ì‹±**: 1ì´ˆ ì´ë‚´ ì¤‘ë³µ í˜¸ì¶œ ë°©ì§€
- **ë°°ì¹˜ ì²˜ë¦¬**: ì—¬ëŸ¬ ìš”ì²­ì„ í•œë²ˆì— ì²˜ë¦¬
- **ì—ëŸ¬ ì¬ì‹œë„**: 401 ì‘ë‹µ ì‹œ ìë™ ì¬ì‹œë„

### 9.4 ë°ì´í„°ë² ì´ìŠ¤ ìµœì í™”
- **ì¸ë±ìŠ¤**: ìì£¼ ì¡°íšŒë˜ëŠ” ì»¬ëŸ¼ì— ì¸ë±ìŠ¤ ì¶”ê°€
- **í˜ì´ì§€ë„¤ì´ì…˜**: ëŒ€ëŸ‰ ë°ì´í„° ì¡°íšŒ ì‹œ í˜ì´ì§€ë„¤ì´ì…˜
- **JSONB ì¸ë±ìŠ¤**: JSONB í•„ë“œì— GIN ì¸ë±ìŠ¤

## 10. ë°°í¬ ë° í™˜ê²½ ì„¤ì •

### 10.1 í™˜ê²½ ë³€ìˆ˜
```bash
# Supabase
NEXT_PUBLIC_SUPABASE_URL=https://xxx.supabase.co
SUPABASE_SERVICE_ROLE_KEY=xxx

# JWT
JWT_SECRET=xxx

# Naver SENS
NAVER_SENS_SERVICE_ID=xxx
NAVER_ACCESS_KEY_ID=xxx
NAVER_SECRET_KEY=xxx

# OpenAI
OPENAI_API_KEY=xxx

# ê³µê³µë°ì´í„° API
ODCLOUD_SERVICE_KEY=xxx

# NicePay
NICEPAY_CLIENT_ID=xxx
NICEPAY_SECRET_KEY=xxx

# ê¸°íƒ€
TEST_CALLING_NUMBER=010-1234-5678
NEXT_PUBLIC_BASE_URL=https://yourdomain.com
```

### 10.2 Vercel ë°°í¬
- **ìë™ ë°°í¬**: Git push ì‹œ ìë™ ë°°í¬
- **í™˜ê²½ ë³€ìˆ˜**: Vercel Dashboardì—ì„œ ì„¤ì •
- **Cron Jobs**: `vercel.json`ì— ì •ì˜

**vercel.json**:
```json
{
  "crons": [
    {
      "path": "/api/cron/send-scheduled-messages",
      "schedule": "* * * * *"
    }
  ]
}
```

### 10.3 ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜
- **ìˆ˜ë™ ë§ˆì´ê·¸ë ˆì´ì…˜**: Supabase SQL Editor ì‚¬ìš©
- **ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼**: `/migrations/` ë””ë ‰í† ë¦¬ì— ì €ì¥
- **ë²„ì „ ê´€ë¦¬**: íƒ€ì„ìŠ¤íƒ¬í”„ ê¸°ë°˜ íŒŒì¼ëª…

## 11. í…ŒìŠ¤íŠ¸

### 11.1 ìˆ˜ë™ í…ŒìŠ¤íŠ¸
- **ì‹œë‚˜ë¦¬ì˜¤ ê¸°ë°˜**: `/docs/quick-test-scenarios.md`
- **ì¢…í•© í…ŒìŠ¤íŠ¸**: `/docs/manual-test-guide-3weeks.md`

### 11.2 í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€
- **ì¸ì¦**: ë¡œê·¸ì¸, íšŒì›ê°€ì…, ì†Œì…œ ë¡œê·¸ì¸
- **ë©”ì‹œì§€ ë°œì†¡**: ì¦‰ì‹œ/ì˜ˆì•½ ë°œì†¡, í…œí”Œë¦¿ ê´€ë¦¬
- **ìº í˜ì¸**: ìƒì„±, ìŠ¹ì¸, ë°œì†¡
- **ê²°ì œ**: ì¶©ì „, ê²€ì¦
- **ì˜ˆì•½**: ê³µê°„ ê´€ë¦¬, ì˜ˆì•½ ê´€ë¦¬

### 11.3 ë²„ê·¸ ë¦¬í¬íŒ…
- GitHub Issues ì‚¬ìš©
- ì¬í˜„ ë‹¨ê³„ ëª…í™•íˆ ê¸°ìˆ 
- ìŠ¤í¬ë¦°ìƒ· ì²¨ë¶€

## 12. ìœ ì§€ë³´ìˆ˜ ê°€ì´ë“œ

### 12.1 ë¡œê·¸ í™•ì¸
- **Vercel ë¡œê·¸**: ì‹¤ì‹œê°„ ë¡œê·¸ í™•ì¸
- **Supabase ë¡œê·¸**: SQL ì¿¼ë¦¬ ë¡œê·¸
- **ë¸Œë¼ìš°ì € ì½˜ì†”**: í´ë¼ì´ì–¸íŠ¸ ì—ëŸ¬

### 12.2 ì—ëŸ¬ ëª¨ë‹ˆí„°ë§
- **ì„œë²„ ì—ëŸ¬**: `console.error()` + Vercel ë¡œê·¸
- **í´ë¼ì´ì–¸íŠ¸ ì—ëŸ¬**: ë¸Œë¼ìš°ì € ì½˜ì†”

### 12.3 ë°±ì—…
- **ë°ì´í„°ë² ì´ìŠ¤**: Supabase ìë™ ë°±ì—… (ì¼ 1íšŒ)
- **íŒŒì¼**: Supabase Storage ìë™ ë°±ì—…

### 12.4 ì—…ë°ì´íŠ¸
- **Next.js**: `npm update next`
- **Supabase**: ìë™ ì—…ë°ì´íŠ¸
- **ì˜ì¡´ì„±**: `npm outdated` í™•ì¸ í›„ ì—…ë°ì´íŠ¸

---

## ìš”ì•½

MTS MessageëŠ” **Next.js 15 + Supabase + JWT ì¸ì¦**ì„ ê¸°ë°˜ìœ¼ë¡œ í•œ ì¢…í•© ë§ˆì¼€íŒ… í”Œë«í¼ì…ë‹ˆë‹¤.

**í•µì‹¬ ê¸°ëŠ¥**:
1. **ë©”ì‹œì§€ ë°œì†¡**: SMS/LMS/MMS ì¦‰ì‹œ/ì˜ˆì•½ ë°œì†¡
2. **AI íƒ€ê²Ÿ ë§ˆì¼€íŒ…**: OpenAI ê¸°ë°˜ ìº í˜ì¸ ìë™ ìƒì„±
3. **ì˜ˆì•½ ê´€ë¦¬**: ê³µê°„ ì˜ˆì•½ ë° ìë™ ë©”ì‹œì§€
4. **ë‹¤ì¤‘ ì—­í• **: ì¼ë°˜ ì‚¬ìš©ì, ê´‘ê³ ì£¼, ì˜ì—…ì‚¬ì›, ê´€ë¦¬ì
5. **ì¶”ì²œì¸ ì‹œìŠ¤í…œ**: 2ë‹¨ê³„ ìˆ˜ìˆ˜ë£Œ êµ¬ì¡°
6. **ê²°ì œ ì‹œìŠ¤í…œ**: NicePay ì—°ë™ í¬ì¸íŠ¸ ì¶©ì „

**ì•„í‚¤í…ì²˜ íŠ¹ì§•**:
- í´ë¼ì´ì–¸íŠ¸ëŠ” API Routesë¥¼ í†µí•´ì„œë§Œ ë°ì´í„° ì ‘ê·¼
- JWT í† í° ê¸°ë°˜ ì¸ì¦ (Supabase Auth ë¯¸ì‚¬ìš©)
- í´ë§ ê¸°ë°˜ ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸
- JSONB í•„ë“œë¥¼ í™œìš©í•œ ìœ ì—°í•œ ë°ì´í„° êµ¬ì¡°

**ë³´ì•ˆ**:
- Service Role KeyëŠ” ì„œë²„ ì‚¬ì´ë“œì—ì„œë§Œ ì‚¬ìš©
- ì—­í•  ê¸°ë°˜ ê¶Œí•œ ê´€ë¦¬
- ìë™ í† í° ê°±ì‹  ë° ì¬ì‹œë„

ì´ ë¬¸ì„œëŠ” ì½”ë“œë² ì´ìŠ¤ì˜ ì „ì²´ì ì¸ êµ¬ì¡°ì™€ ì£¼ìš” ê¸°ëŠ¥ì„ ì´í•´í•˜ëŠ”ë° ë„ì›€ì´ ë  ê²ƒì…ë‹ˆë‹¤.
